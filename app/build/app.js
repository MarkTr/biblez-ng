
// lib/layout/version.js
enyo&&enyo.version&&(enyo.version.layout="2.4.0");

// lib/layout/contextual/source/ContextualLayout.js
enyo.kind({name:"enyo.ContextualLayout",kind:"Layout",adjustPosition:function(){if(this.container.showing&&this.container.hasNode()){this.resetPositioning();var t=this.getViewWidth(),i=this.getViewHeight(),o=this.container.vertFlushMargin,s=i-this.container.vertFlushMargin,e=this.container.horizFlushMargin,n=t-this.container.horizFlushMargin;if(o>this.offset.top+this.offset.height||this.offset.top>s){if(this.applyVerticalFlushPositioning(e,n))return;if(this.applyHorizontalFlushPositioning(e,n))return;if(this.applyVerticalPositioning())return}else if((e>this.offset.left+this.offset.width||this.offset.left>n)&&this.applyHorizontalPositioning())return;var h=this.getBoundingRect(this.container.node);if(h.width>this.container.widePopup){if(this.applyVerticalPositioning())return}else if(h.height>this.container.longPopup&&this.applyHorizontalPositioning())return;if(this.applyVerticalPositioning())return;if(this.applyHorizontalPositioning())return}},initVerticalPositioning:function(){this.resetPositioning(),this.container.addClass("vertical");var t=this.getBoundingRect(this.container.node),i=this.getViewHeight();return this.container.floating?i/2>this.offset.top?(this.applyPosition({top:this.offset.top+this.offset.height,bottom:"auto"}),this.container.addClass("below")):(this.applyPosition({top:this.offset.top-t.height,bottom:"auto"}),this.container.addClass("above")):t.top+t.height>i&&i-t.bottom<t.top-t.height?this.container.addClass("above"):this.container.addClass("below"),t=this.getBoundingRect(this.container.node),t.top+t.height>i||0>t.top?!1:!0},applyVerticalPositioning:function(){if(!this.initVerticalPositioning())return!1;var t=this.getBoundingRect(this.container.node),i=this.getViewWidth();if(this.container.floating){var o=this.offset.left+this.offset.width/2-t.width/2;o+t.width>i?(this.applyPosition({left:this.offset.left+this.offset.width-t.width}),this.container.addClass("left")):0>o?(this.applyPosition({left:this.offset.left}),this.container.addClass("right")):this.applyPosition({left:o})}else{var s=this.offset.left+this.offset.width/2-t.left-t.width/2;t.right+s>i?(this.applyPosition({left:this.offset.left+this.offset.width-t.right}),this.container.addRemoveClass("left",!0)):0>t.left+s?this.container.addRemoveClass("right",!0):this.applyPosition({left:s})}return!0},applyVerticalFlushPositioning:function(t,i){if(!this.initVerticalPositioning())return!1;var o=this.getBoundingRect(this.container.node),s=this.getViewWidth();return t>this.offset.left+this.offset.width/2?(this.offset.left+this.offset.width/2<this.container.horizBuffer?this.applyPosition({left:this.container.horizBuffer+(this.container.floating?0:-o.left)}):this.applyPosition({left:this.offset.width/2+(this.container.floating?this.offset.left:0)}),this.container.addClass("right"),this.container.addClass("corner"),!0):this.offset.left+this.offset.width/2>i?(this.offset.left+this.offset.width/2>s-this.container.horizBuffer?this.applyPosition({left:s-this.container.horizBuffer-o.right}):this.applyPosition({left:this.offset.left+this.offset.width/2-o.right}),this.container.addClass("left"),this.container.addClass("corner"),!0):!1},initHorizontalPositioning:function(){this.resetPositioning();var t=this.getBoundingRect(this.container.node),i=this.getViewWidth();return this.container.floating?i/2>this.offset.left+this.offset.width?(this.applyPosition({left:this.offset.left+this.offset.width}),this.container.addRemoveClass("left",!0)):(this.applyPosition({left:this.offset.left-t.width}),this.container.addRemoveClass("right",!0)):this.offset.left-t.width>0?(this.applyPosition({left:this.offset.left-t.left-t.width}),this.container.addRemoveClass("right",!0)):(this.applyPosition({left:this.offset.width}),this.container.addRemoveClass("left",!0)),this.container.addRemoveClass("horizontal",!0),t=this.getBoundingRect(this.container.node),0>t.left||t.left+t.width>i?!1:!0},applyHorizontalPositioning:function(){if(!this.initHorizontalPositioning())return!1;var t=this.getBoundingRect(this.container.node),i=this.getViewHeight(),o=this.offset.top+this.offset.height/2;return this.container.floating?o>=i/2-.05*i&&i/2+.05*i>=o?this.applyPosition({top:this.offset.top+this.offset.height/2-t.height/2,bottom:"auto"}):i/2>this.offset.top+this.offset.height?(this.applyPosition({top:this.offset.top,bottom:"auto"}),this.container.addRemoveClass("high",!0)):(this.applyPosition({top:this.offset.top-t.height+2*this.offset.height,bottom:"auto"}),this.container.addRemoveClass("low",!0)):o>=i/2-.05*i&&i/2+.05*i>=o?this.applyPosition({top:(this.offset.height-t.height)/2}):i/2>this.offset.top+this.offset.height?(this.applyPosition({top:-this.offset.height}),this.container.addRemoveClass("high",!0)):(this.applyPosition({top:t.top-t.height-this.offset.top+this.offset.height}),this.container.addRemoveClass("low",!0)),!0},applyHorizontalFlushPositioning:function(t,i){if(!this.initHorizontalPositioning())return!1;var o=this.getBoundingRect(this.container.node),s=this.getViewHeight();return this.container.floating?s/2>this.offset.top?(this.applyPosition({top:this.offset.top+this.offset.height/2}),this.container.addRemoveClass("high",!0)):(this.applyPosition({top:this.offset.top+this.offset.height/2-o.height}),this.container.addRemoveClass("low",!0)):o.top+o.height>s&&s-o.bottom<o.top-o.height?(this.applyPosition({top:o.top-o.height-this.offset.top-this.offset.height/2}),this.container.addRemoveClass("low",!0)):(this.applyPosition({top:this.offset.height/2}),this.container.addRemoveClass("high",!0)),t>this.offset.left+this.offset.width?(this.container.addClass("left"),this.container.addClass("corner"),!0):this.offset.left>i?(this.container.addClass("right"),this.container.addClass("corner"),!0):!1},getBoundingRect:function(t){var i=t.getBoundingClientRect();return i.width&&i.height?i:{left:i.left,right:i.right,top:i.top,bottom:i.bottom,width:i.right-i.left,height:i.bottom-i.top}},getViewHeight:function(){return void 0===window.innerHeight?document.documentElement.clientHeight:window.innerHeight},getViewWidth:function(){return void 0===window.innerWidth?document.documentElement.clientWidth:window.innerWidth},applyPosition:function(t){var i="";for(var o in t)i+=o+":"+t[o]+(isNaN(t[o])?"; ":"px; ");this.container.addStyles(i)},resetPositioning:function(){this.container.removeClass("right"),this.container.removeClass("left"),this.container.removeClass("high"),this.container.removeClass("low"),this.container.removeClass("corner"),this.container.removeClass("below"),this.container.removeClass("above"),this.container.removeClass("vertical"),this.container.removeClass("horizontal"),this.applyPosition({left:"auto"}),this.applyPosition({top:"auto"})},reflow:function(){this.offset=this.container.activatorOffset,this.adjustPosition()}});

// lib/layout/fittable/source/FittableLayout.js
enyo.kind({name:"enyo.FittableLayout",kind:"Layout",constructor:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.container.addRemoveClass("force-left-to-right",enyo.Control.prototype.rtl&&!this.container.get("rtl"))}}),calcFitIndex:function(){var t,i,o=this.container.children;for(i=0;o.length>i;i++)if(t=o[i],t.fit&&t.showing)return i},getFitControl:function(){var t=this.container.children,i=t[this.fitIndex];return i&&i.fit&&i.showing||(this.fitIndex=this.calcFitIndex(),i=t[this.fitIndex]),i},shouldReverse:function(){return this.container.rtl&&"h"===this.orient},getFirstChild:function(){var t=this.getShowingChildren();return this.shouldReverse()?t[t.length-1]:t[0]},getLastChild:function(){var t=this.getShowingChildren();return this.shouldReverse()?t[0]:t[t.length-1]},getShowingChildren:function(){for(var t=[],i=0,o=this.container.children,e=o.length;e>i;i++)o[i].showing&&t.push(o[i]);return t},_reflow:function(t,i,o,e){this.container.addRemoveClass("enyo-stretch",!this.container.noStretch);var s,n,h,a,r,f=this.getFitControl(),l=this.container.hasNode(),d=0,g=0,c=0;if(f&&l){if(s=enyo.dom.calcPaddingExtents(l),n=f.getBounds(),d=l[i]-(s[o]+s[e]),this.shouldReverse()){a=this.getFirstChild(),c=d-(n[o]+n[t]);var p=enyo.dom.getComputedBoxValue(a.hasNode(),"margin",o)||0;if(a==f)g=p;else{var u=a.getBounds(),y=u[o];g=n[o]+p-y}}else{h=this.getLastChild(),g=n[o]-(s[o]||0);var w=enyo.dom.getComputedBoxValue(h.hasNode(),"margin",e)||0;if(h==f)c=w;else{var v=h.getBounds(),C=n[o]+n[t],m=v[o]+v[t]+w;c=m-C}}r=d-(g+c),f.applyStyle(t,r+"px")}},reflow:function(){"h"==this.orient?this._reflow("width","clientWidth","left","right"):this._reflow("height","clientHeight","top","bottom")}}),enyo.kind({name:"enyo.FittableColumnsLayout",kind:"FittableLayout",orient:"h",layoutClass:"enyo-fittable-columns-layout"}),enyo.kind({name:"enyo.FittableRowsLayout",kind:"FittableLayout",layoutClass:"enyo-fittable-rows-layout",orient:"v"});

// lib/layout/fittable/source/FittableRows.js
enyo.kind({name:"enyo.FittableRows",layoutKind:"FittableRowsLayout",noStretch:!1});

// lib/layout/fittable/source/FittableColumns.js
enyo.kind({name:"enyo.FittableColumns",layoutKind:"FittableColumnsLayout",noStretch:!1});

// lib/layout/fittable/source/FittableHeaderLayout.js
enyo.kind({name:"enyo.FittableHeaderLayout",kind:"FittableColumnsLayout",applyFitSize:enyo.inherit(function(t){return function(i,e,o,n){var s=o-n,h=this.getFitControl();0>s?(h.applyStyle("padding-left",Math.abs(s)+"px"),h.applyStyle("padding-right",null)):s>0?(h.applyStyle("padding-left",null),h.applyStyle("padding-right",Math.abs(s)+"px")):(h.applyStyle("padding-left",null),h.applyStyle("padding-right",null)),t.apply(this,arguments)}})});

// lib/layout/list/source/FlyweightRepeater.js
enyo.kind({name:"enyo.FlyweightRepeater",published:{count:0,noSelect:!1,multiSelect:!1,toggleSelected:!1,clientClasses:"",clientStyle:"",rowOffset:0,orient:"v"},events:{onSetupItem:"",onRenderRow:""},bottomUp:!1,components:[{kind:"Selection",onSelect:"selectDeselect",onDeselect:"selectDeselect"},{name:"client"}],create:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.noSelectChanged(),this.multiSelectChanged(),this.clientClassesChanged(),this.clientStyleChanged()}}),noSelectChanged:function(){this.noSelect&&this.$.selection.clear()},multiSelectChanged:function(){this.$.selection.setMulti(this.multiSelect)},clientClassesChanged:function(){this.$.client.setClasses(this.clientClasses)},clientStyleChanged:function(){this.$.client.setStyle(this.clientStyle)},setupItem:function(t){this.doSetupItem({index:t,selected:this.isSelected(t)})},generateChildHtml:enyo.inherit(function(t){return function(){var i="";this.index=null;for(var e=0,o=0;this.count>e;e++)o=this.rowOffset+(this.bottomUp?this.count-e-1:e),this.setupItem(o),this.$.client.setAttribute("data-enyo-index",o),"h"==this.orient&&this.$.client.setStyle("display:inline-block;"),i+=t.apply(this,arguments),this.$.client.teardownRender();return i}}),previewDomEvent:function(t){var i=this.index=this.rowForEvent(t);t.rowIndex=t.index=i,t.flyweight=this},decorateEvent:enyo.inherit(function(t){return function(i,e){var o=e&&null!=e.index?e.index:this.index;e&&null!=o&&(e.index=o,e.flyweight=this),t.apply(this,arguments)}}),tap:function(t,i){this.noSelect||-1===i.index||(this.toggleSelected?this.$.selection.toggle(i.index):this.$.selection.select(i.index))},selectDeselect:function(t,i){this.renderRow(i.key)},getSelection:function(){return this.$.selection},isSelected:function(t){return this.getSelection().isSelected(t)},renderRow:function(t){if(!(this.rowOffset>t||t>=this.count+this.rowOffset)){this.setupItem(t);var i=this.fetchRowNode(t);i&&(enyo.dom.setInnerHtml(i,this.$.client.generateChildHtml()),this.$.client.teardownChildren(),this.doRenderRow({rowIndex:t}))}},fetchRowNode:function(t){return this.hasNode()?this.node.querySelector('[data-enyo-index="'+t+'"]'):void 0},rowForEvent:function(t){if(!this.hasNode())return-1;for(var i=t.target;i&&i!==this.node;){var e=i.getAttribute&&i.getAttribute("data-enyo-index");if(null!==e)return Number(e);i=i.parentNode}return-1},prepareRow:function(t){if(!(this.rowOffset>t||t>=this.count+this.rowOffset)){this.setupItem(t);var i=this.fetchRowNode(t);enyo.FlyweightRepeater.claimNode(this.$.client,i)}},lockRow:function(){this.$.client.teardownChildren()},performOnRow:function(t,i,e){this.rowOffset>t||t>=this.count+this.rowOffset||i&&(this.prepareRow(t),enyo.call(e||null,i),this.lockRow())},statics:{claimNode:function(t,i){var e;i&&(e=i.id!==t.id?i.querySelector("#"+t.id):i),t.generated=Boolean(e||!t.tag),t.node=e,t.node&&t.rendered();for(var o,n=0,s=t.children;o=s[n];n++)this.claimNode(o,i)}}});

// lib/layout/list/source/List.js
enyo.kind({name:"enyo.List",kind:"Scroller",classes:"enyo-list",published:{count:0,rowsPerPage:50,orient:"v",bottomUp:!1,noSelect:!1,multiSelect:!1,toggleSelected:!1,fixedSize:!1,reorderable:!1,centerReorderContainer:!0,reorderComponents:[],pinnedReorderComponents:[],swipeableComponents:[],enableSwipe:!1,persistSwipeableItem:!1},events:{onSetupItem:"",onSetupReorderComponents:"",onSetupPinnedReorderComponents:"",onReorder:"",onSetupSwipeItem:"",onSwipeDrag:"",onSwipe:"",onSwipeComplete:""},handlers:{onAnimateFinish:"animateFinish",onRenderRow:"rowRendered",ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish",onup:"up",onholdpulse:"holdpulse",onflick:"flick"},rowSize:0,listTools:[{name:"port",classes:"enyo-list-port enyo-border-box",components:[{name:"generator",kind:"FlyweightRepeater",canGenerate:!1,components:[{tag:null,name:"client"}]},{name:"holdingarea",allowHtml:!0,classes:"enyo-list-holdingarea"},{name:"page0",allowHtml:!0,classes:"enyo-list-page"},{name:"page1",allowHtml:!0,classes:"enyo-list-page"},{name:"placeholder",classes:"enyo-list-placeholder"},{name:"swipeableComponents",style:"position:absolute; display:block; top:-1000px; left:0;"}]}],reorderHoldTimeMS:600,draggingRowIndex:-1,initHoldCounter:3,holdCounter:3,holding:!1,draggingRowNode:null,placeholderRowIndex:-1,dragToScrollThreshold:.1,prevScrollTop:0,autoScrollTimeoutMS:20,autoScrollTimeout:null,autoscrollPageY:0,pinnedReorderMode:!1,initialPinPosition:-1,itemMoved:!1,currentPageNumber:-1,completeReorderTimeout:null,swipeIndex:null,swipeDirection:null,persistentItemVisible:!1,persistentItemOrigin:null,swipeComplete:!1,completeSwipeTimeout:null,completeSwipeDelayMS:500,normalSwipeSpeedMS:200,fastSwipeSpeedMS:100,percentageDraggedThreshold:.2,importProps:enyo.inherit(function(t){return function(e){e&&e.reorderable&&(this.touch=!0),t.apply(this,arguments)}}),create:enyo.inherit(function(t){return function(){this.pageSizes=[],this.orientV="v"==this.orient,this.vertical=this.orientV?"default":"hidden",t.apply(this,arguments),this.$.generator.orient=this.orient,this.getStrategy().translateOptimized=!0,this.$.port.addRemoveClass("horizontal",!this.orientV),this.$.port.addRemoveClass("vertical",this.orientV),this.$.page0.addRemoveClass("vertical",this.orientV),this.$.page1.addRemoveClass("vertical",this.orientV),this.bottomUpChanged(),this.noSelectChanged(),this.multiSelectChanged(),this.toggleSelectedChanged(),this.$.generator.setRowOffset(0),this.$.generator.setCount(this.count)}}),initComponents:enyo.inherit(function(t){return function(){this.createReorderTools(),t.apply(this,arguments),this.createSwipeableComponents()}}),createReorderTools:function(){this.createComponent({name:"reorderContainer",classes:"enyo-list-reorder-container",ondown:"sendToStrategy",ondrag:"sendToStrategy",ondragstart:"sendToStrategy",ondragfinish:"sendToStrategy",onflick:"sendToStrategy"})},createStrategy:enyo.inherit(function(t){return function(){this.controlParentName="strategy",t.apply(this,arguments),this.createChrome(this.listTools),this.controlParentName="client",this.discoverControlParent()}}),createSwipeableComponents:function(){for(var t=0;this.swipeableComponents.length>t;t++)this.$.swipeableComponents.createComponent(this.swipeableComponents[t],{owner:this.owner})},rendered:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.$.generator.node=this.$.port.hasNode(),this.$.generator.generated=!0,this.reset()}}),resizeHandler:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.refresh()}}),bottomUpChanged:function(){this.$.generator.bottomUp=this.bottomUp,this.$.page0.applyStyle(this.pageBound,null),this.$.page1.applyStyle(this.pageBound,null),this.pageBound=this.orientV?this.bottomUp?"bottom":"top":this.rtl?this.bottomUp?"left":"right":this.bottomUp?"right":"left",!this.orientV&&this.bottomUp&&(this.$.page0.applyStyle("left","auto"),this.$.page1.applyStyle("left","auto")),this.hasNode()&&this.reset()},noSelectChanged:function(){this.$.generator.setNoSelect(this.noSelect)},multiSelectChanged:function(){this.$.generator.setMultiSelect(this.multiSelect)},toggleSelectedChanged:function(){this.$.generator.setToggleSelected(this.toggleSelected)},countChanged:function(){this.hasNode()&&this.updateMetrics()},sendToStrategy:function(t,e){this.$.strategy.dispatchEvent("on"+e.type,e,t)},updateMetrics:function(){this.defaultPageSize=this.rowsPerPage*(this.rowSize||100),this.pageCount=Math.ceil(this.count/this.rowsPerPage),this.portSize=0;for(var t=0;this.pageCount>t;t++)this.portSize+=this.getPageSize(t);this.adjustPortSize()},holdpulse:function(t,e){return this.getReorderable()&&!this.isReordering()?e.holdTime>=this.reorderHoldTimeMS&&this.shouldStartReordering(t,e)?(this.startReordering(e),!1):void 0:void 0},dragstart:function(t,e){return this.isReordering()?!0:this.isSwipeable()?this.swipeDragStart(t,e):void 0},drag:function(t,e){return this.shouldDoReorderDrag(e)?(e.preventDefault(),this.reorderDrag(e),!0):this.isSwipeable()?(e.preventDefault(),this.swipeDrag(t,e),!0):void 0},dragfinish:function(t,e){this.isReordering()?this.finishReordering(t,e):this.isSwipeable()&&this.swipeDragFinish(t,e)},up:function(t,e){this.isReordering()&&this.finishReordering(t,e)},generatePage:function(t,e){this.page=t;var i=this.rowsPerPage*this.page;this.$.generator.setRowOffset(i);var o=Math.min(this.count-i,this.rowsPerPage);this.$.generator.setCount(o);var n=this.$.generator.generateChildHtml();e.setContent(n),this.getReorderable()&&this.draggingRowIndex>-1&&this.hideReorderingRow();var s=e.getBounds(),r=this.orientV?s.height:s.width;if(!this.rowSize&&r>0&&(this.rowSize=Math.floor(r/o),this.updateMetrics()),!this.fixedSize){var h=this.getPageSize(t);h!=r&&r>0&&(this.pageSizes[t]=r,this.portSize+=r-h)}},pageForRow:function(t){return Math.floor(t/this.rowsPerPage)},preserveDraggingRowNode:function(t){this.draggingRowNode&&this.pageForRow(this.draggingRowIndex)===t&&(this.$.holdingarea.hasNode().appendChild(this.draggingRowNode),this.draggingRowNode=null,this.removedInitialPage=!0)},update:function(t){var e=!1,i=this.positionToPageInfo(t),o=i.pos+this.scrollerSize/2,n=Math.floor(o/Math.max(i.size,this.scrollerSize)+.5)+i.no,s=0===n%2?n:n-1;this.p0!=s&&this.isPageInRange(s)&&(this.preserveDraggingRowNode(this.p0),this.generatePage(s,this.$.page0),this.positionPage(s,this.$.page0),this.p0=s,e=!0,this.p0RowBounds=this.getPageRowSizes(this.$.page0)),s=0===n%2?Math.max(1,n-1):n,this.p1!=s&&this.isPageInRange(s)&&(this.preserveDraggingRowNode(this.p1),this.generatePage(s,this.$.page1),this.positionPage(s,this.$.page1),this.p1=s,e=!0,this.p1RowBounds=this.getPageRowSizes(this.$.page1)),e&&(this.$.generator.setRowOffset(0),this.$.generator.setCount(this.count),this.fixedSize||(this.adjustBottomPage(),this.adjustPortSize()))},getPageRowSizes:function(t){for(var e,i,o={},n=t.hasNode().querySelectorAll("div[data-enyo-index]"),s=0;n.length>s;s++)e=n[s].getAttribute("data-enyo-index"),null!==e&&(i=enyo.dom.getBounds(n[s]),o[parseInt(e,10)]={height:i.height,width:i.width});return o},updateRowBounds:function(t){this.p0RowBounds[t]?this.updateRowBoundsAtIndex(t,this.p0RowBounds,this.$.page0):this.p1RowBounds[t]&&this.updateRowBoundsAtIndex(t,this.p1RowBounds,this.$.page1)},updateRowBoundsAtIndex:function(t,e,i){var o=i.hasNode().querySelector('div[data-enyo-index="'+t+'"]'),n=enyo.dom.getBounds(o);e[t].height=n.height,e[t].width=n.width},updateForPosition:function(t){this.update(this.calcPos(t))},calcPos:function(t){return this.bottomUp?this.portSize-this.scrollerSize-t:t},adjustBottomPage:function(){var t=this.p0>=this.p1?this.$.page0:this.$.page1;this.positionPage(t.pageNo,t)},adjustPortSize:function(){this.scrollerSize=this.orientV?this.getBounds().height:this.getBounds().width;var t=Math.max(this.scrollerSize,this.portSize);this.$.port.applyStyle(this.orientV?"height":"width",t+"px"),this.orientV||this.$.port.applyStyle("height",this.getBounds().height+"px")},positionPage:function(t,e){e.pageNo=t;var i=this.pageToPosition(t);e.applyStyle(this.pageBound,i+"px")},pageToPosition:function(t){for(var e=0,i=t;i>0;)i--,e+=this.getPageSize(i);return e},positionToPageInfo:function(t){for(var e=-1,i=this.calcPos(t),o=this.defaultPageSize;i>=0;)e++,o=this.getPageSize(e),i-=o;return e=Math.max(e,0),{no:e,size:o,pos:i+o,startRow:e*this.rowsPerPage,endRow:Math.min((e+1)*this.rowsPerPage-1,this.count-1)}},isPageInRange:function(t){return t==Math.max(0,Math.min(this.pageCount-1,t))},getPageSize:function(t){var e=this.pageSizes[t];if(!e){var i=this.rowsPerPage*t,o=Math.min(this.count-i,this.rowsPerPage);e=this.defaultPageSize*(o/this.rowsPerPage)}return Math.max(1,e)},invalidatePages:function(){this.p0=this.p1=null,this.p0RowBounds={},this.p1RowBounds={},this.$.page0.setContent(""),this.$.page1.setContent("")},invalidateMetrics:function(){this.pageSizes=[],this.rowSize=0,this.updateMetrics()},scroll:enyo.inherit(function(t){return function(e,i){var o=t.apply(this,arguments),n=this.orientV?this.getScrollTop():this.getScrollLeft();return this.lastPos===n?o:(this.lastPos=n,this.update(n),this.pinnedReorderMode&&this.reorderScroll(e,i),o)}}),setScrollTop:enyo.inherit(function(t){return function(e){this.update(e),t.apply(this,arguments),this.twiddle()}}),getScrollPosition:function(){return this.calcPos(this[this.orientV?"getScrollTop":"getScrollLeft"]())},setScrollPosition:function(t){this[this.orientV?"setScrollTop":"setScrollLeft"](this.calcPos(t))},scrollToBottom:enyo.inherit(function(t){return function(){this.update(this.getScrollBounds().maxTop),t.apply(this,arguments)}}),scrollToRow:function(t){var e=this.pageForRow(t),i=this.pageToPosition(e);if(this.updateForPosition(i),i=this.pageToPosition(e),this.setScrollPosition(i),e==this.p0||e==this.p1){var o=this.$.generator.fetchRowNode(t);if(o){var n=this.orientV?o.offsetTop:o.offsetLeft;this.bottomUp&&(n=this.getPageSize(e)-(this.orientV?o.offsetHeight:o.offsetWidth)-n);var s=this.getScrollPosition()+n;this.setScrollPosition(s)}}},scrollToStart:function(){this[this.bottomUp?this.orientV?"scrollToBottom":"scrollToRight":"scrollToTop"]()},scrollToEnd:function(){this[this.bottomUp?this.orientV?"scrollToTop":"scrollToLeft":this.orientV?"scrollToBottom":"scrollToRight"]()},refresh:function(){this.invalidatePages(),this.update(this[this.orientV?"getScrollTop":"getScrollLeft"]()),this.stabilize(),4===enyo.platform.android&&this.twiddle()},reset:function(){this.getSelection().clear(),this.invalidateMetrics(),this.invalidatePages(),this.stabilize(),this.scrollToStart()},getSelection:function(){return this.$.generator.getSelection()},select:function(t,e){return this.getSelection().select(t,e)},deselect:function(t){return this.getSelection().deselect(t)},isSelected:function(t){return this.$.generator.isSelected(t)},renderRow:function(t){this.$.generator.renderRow(t)},rowRendered:function(t,e){this.updateRowBounds(e.rowIndex)},prepareRow:function(t){this.$.generator.prepareRow(t)},lockRow:function(){this.$.generator.lockRow()},performOnRow:function(t,e,i){this.$.generator.performOnRow(t,e,i)},animateFinish:function(){return this.twiddle(),!0},twiddle:function(){var t=this.getStrategy();enyo.call(t,"twiddle")},pageForPageNumber:function(t,e){return 0===t%2?e&&t!==this.p0?null:this.$.page0:e&&t!==this.p1?null:this.$.page1},shouldStartReordering:function(t,e){return!this.getReorderable()||null==e.rowIndex||0>e.rowIndex||this.pinnedReorderMode||t!==this.$.strategy||null==e.index||0>e.index?!1:!0},startReordering:function(t){this.$.strategy.listReordering=!0,this.buildReorderContainer(),this.doSetupReorderComponents(t),this.styleReorderContainer(t),this.draggingRowIndex=this.placeholderRowIndex=t.rowIndex,this.draggingRowNode=t.target,this.removedInitialPage=!1,this.itemMoved=!1,this.initialPageNumber=this.currentPageNumber=this.pageForRow(t.rowIndex),this.prevScrollTop=this.getScrollTop(),this.replaceNodeWithPlaceholder(t.rowIndex)},buildReorderContainer:function(){this.$.reorderContainer.destroyClientControls();for(var t=0;this.reorderComponents.length>t;t++)this.$.reorderContainer.createComponent(this.reorderComponents[t],{owner:this.owner});this.$.reorderContainer.render()},styleReorderContainer:function(t){this.setItemPosition(this.$.reorderContainer,t.rowIndex),this.setItemBounds(this.$.reorderContainer,t.rowIndex),this.$.reorderContainer.setShowing(!0),this.centerReorderContainer&&this.centerReorderContainerOnPointer(t)},appendNodeToReorderContainer:function(t){this.$.reorderContainer.createComponent({allowHtml:!0,content:t.innerHTML}).render()},centerReorderContainerOnPointer:function(t){var e=enyo.dom.calcNodePosition(this.hasNode()),i=t.pageX-e.left-parseInt(this.$.reorderContainer.domStyles.width,10)/2,o=t.pageY-e.top+this.getScrollTop()-parseInt(this.$.reorderContainer.domStyles.height,10)/2;"ScrollStrategy"!=this.getStrategyKind()&&(i-=this.getScrollLeft(),o-=this.getScrollTop()),this.positionReorderContainer(i,o)},positionReorderContainer:function(t,e){this.$.reorderContainer.addClass("enyo-animatedTopAndLeft"),this.$.reorderContainer.addStyles("left:"+t+"px;top:"+e+"px;"),this.setPositionReorderContainerTimeout()},setPositionReorderContainerTimeout:function(){this.clearPositionReorderContainerTimeout(),this.positionReorderContainerTimeout=setTimeout(this.bindSafely(function(){this.$.reorderContainer.removeClass("enyo-animatedTopAndLeft"),this.clearPositionReorderContainerTimeout()}),100)},clearPositionReorderContainerTimeout:function(){this.positionReorderContainerTimeout&&(clearTimeout(this.positionReorderContainerTimeout),this.positionReorderContainerTimeout=null)},shouldDoReorderDrag:function(){return!this.getReorderable()||0>this.draggingRowIndex||this.pinnedReorderMode?!1:!0},reorderDrag:function(t){this.positionReorderNode(t),this.checkForAutoScroll(t),this.updatePlaceholderPosition(t.pageY)},updatePlaceholderPosition:function(t){var e=this.getRowIndexFromCoordinate(t);-1!==e&&(e>=this.placeholderRowIndex?this.movePlaceholderToIndex(Math.min(this.count,e+1)):this.movePlaceholderToIndex(e))},positionReorderNode:function(t){var e=this.$.reorderContainer.getBounds(),i=e.left+t.ddx,o=e.top+t.ddy;o="ScrollStrategy"==this.getStrategyKind()?o+(this.getScrollTop()-this.prevScrollTop):o,this.$.reorderContainer.addStyles("top: "+o+"px ; left: "+i+"px"),this.prevScrollTop=this.getScrollTop()},checkForAutoScroll:function(t){var e,i=enyo.dom.calcNodePosition(this.hasNode()),o=this.getBounds();this.autoscrollPageY=t.pageY,t.pageY-i.top<o.height*this.dragToScrollThreshold?(e=100*(1-(t.pageY-i.top)/(o.height*this.dragToScrollThreshold)),this.scrollDistance=-1*e):t.pageY-i.top>o.height*(1-this.dragToScrollThreshold)?(e=100*((t.pageY-i.top-o.height*(1-this.dragToScrollThreshold))/(o.height-o.height*(1-this.dragToScrollThreshold))),this.scrollDistance=1*e):this.scrollDistance=0,0===this.scrollDistance?this.stopAutoScrolling():this.autoScrollTimeout||this.startAutoScrolling()},stopAutoScrolling:function(){this.autoScrollTimeout&&(clearTimeout(this.autoScrollTimeout),this.autoScrollTimeout=null)},startAutoScrolling:function(){this.autoScrollTimeout=setInterval(this.bindSafely(this.autoScroll),this.autoScrollTimeoutMS)},autoScroll:function(){0===this.scrollDistance?this.stopAutoScrolling():this.autoScrollTimeout||this.startAutoScrolling(),this.setScrollPosition(this.getScrollPosition()+this.scrollDistance),this.positionReorderNode({ddx:0,ddy:0}),this.updatePlaceholderPosition(this.autoscrollPageY)},movePlaceholderToIndex:function(t){var e,i;if(!(0>t)){t>=this.count?(e=null,i=this.pageForPageNumber(this.pageForRow(this.count-1)).hasNode()):(e=this.$.generator.fetchRowNode(t),i=e.parentNode);var o=this.pageForRow(t);o>=this.pageCount&&(o=this.currentPageNumber),i.insertBefore(this.placeholderNode,e),this.currentPageNumber!==o&&(this.updatePageSize(this.currentPageNumber),this.updatePageSize(o),this.updatePagePositions(o)),this.placeholderRowIndex=t,this.currentPageNumber=o,this.itemMoved=!0}},finishReordering:function(t,e){return!this.isReordering()||this.pinnedReorderMode||this.completeReorderTimeout?void 0:(this.stopAutoScrolling(),this.$.strategy.listReordering=!1,this.moveReorderedContainerToDroppedPosition(e),this.completeReorderTimeout=setTimeout(this.bindSafely(this.completeFinishReordering,e),100),e.preventDefault(),!0)},moveReorderedContainerToDroppedPosition:function(){var t=this.getRelativeOffset(this.placeholderNode,this.hasNode()),e="ScrollStrategy"==this.getStrategyKind()?t.top:t.top-this.getScrollTop(),i=t.left-this.getScrollLeft();this.positionReorderContainer(i,e)},completeFinishReordering:function(t){return this.completeReorderTimeout=null,this.placeholderRowIndex>this.draggingRowIndex&&(this.placeholderRowIndex=Math.max(0,this.placeholderRowIndex-1)),this.draggingRowIndex!=this.placeholderRowIndex||!this.pinnedReorderComponents.length||this.pinnedReorderMode||this.itemMoved?(this.removeDraggingRowNode(),this.removePlaceholderNode(),this.emptyAndHideReorderContainer(),this.pinnedReorderMode=!1,this.reorderRows(t),this.draggingRowIndex=this.placeholderRowIndex=-1,this.refresh(),void 0):(this.beginPinnedReorder(t),void 0)},beginPinnedReorder:function(t){this.buildPinnedReorderContainer(),this.doSetupPinnedReorderComponents(enyo.mixin(t,{index:this.draggingRowIndex})),this.pinnedReorderMode=!0,this.initialPinPosition=t.pageY},emptyAndHideReorderContainer:function(){this.$.reorderContainer.destroyComponents(),this.$.reorderContainer.setShowing(!1)},buildPinnedReorderContainer:function(){this.$.reorderContainer.destroyClientControls();for(var t=0;this.pinnedReorderComponents.length>t;t++)this.$.reorderContainer.createComponent(this.pinnedReorderComponents[t],{owner:this.owner});this.$.reorderContainer.render()},reorderRows:function(t){this.doReorder(this.makeReorderEvent(t)),this.positionReorderedNode(),this.updateListIndices()},makeReorderEvent:function(t){return t.reorderFrom=this.draggingRowIndex,t.reorderTo=this.placeholderRowIndex,t},positionReorderedNode:function(){if(!this.removedInitialPage){var t=this.$.generator.fetchRowNode(this.placeholderRowIndex);if(t&&(t.parentNode.insertBefore(this.hiddenNode,t),this.showNode(this.hiddenNode)),this.hiddenNode=null,this.currentPageNumber!=this.initialPageNumber){var e,i,o=this.pageForPageNumber(this.currentPageNumber),n=this.pageForPageNumber(this.currentPageNumber+1);this.initialPageNumber<this.currentPageNumber?(e=o.hasNode().firstChild,n.hasNode().appendChild(e)):(e=o.hasNode().lastChild,i=n.hasNode().firstChild,n.hasNode().insertBefore(e,i)),this.correctPageSizes(),this.updatePagePositions(this.initialPageNumber)}}},updateListIndices:function(){if(this.shouldDoRefresh())return this.refresh(),this.correctPageSizes(),void 0;var t,e,i,o,n=Math.min(this.draggingRowIndex,this.placeholderRowIndex),s=Math.max(this.draggingRowIndex,this.placeholderRowIndex),r=this.draggingRowIndex-this.placeholderRowIndex>0?1:-1;if(1===r){for(t=this.$.generator.fetchRowNode(this.draggingRowIndex),t&&t.setAttribute("data-enyo-index","reordered"),e=s-1,i=s;e>=n;e--)t=this.$.generator.fetchRowNode(e),t&&(o=parseInt(t.getAttribute("data-enyo-index"),10),i=o+1,t.setAttribute("data-enyo-index",i));t=this.hasNode().querySelector('[data-enyo-index="reordered"]'),t.setAttribute("data-enyo-index",this.placeholderRowIndex)}else for(t=this.$.generator.fetchRowNode(this.draggingRowIndex),t&&t.setAttribute("data-enyo-index",this.placeholderRowIndex),e=n+1,i=n;s>=e;e++)t=this.$.generator.fetchRowNode(e),t&&(o=parseInt(t.getAttribute("data-enyo-index"),10),i=o-1,t.setAttribute("data-enyo-index",i))},shouldDoRefresh:function(){return Math.abs(this.initialPageNumber-this.currentPageNumber)>1},getNodeStyle:function(t){var e=this.$.generator.fetchRowNode(t);if(e){var i=this.getRelativeOffset(e,this.hasNode()),o=enyo.dom.getBounds(e);return{h:o.height,w:o.width,left:i.left,top:i.top}}},getRelativeOffset:function(t,e){var i={top:0,left:0};if(t!==e&&t.parentNode)do i.top+=t.offsetTop||0,i.left+=t.offsetLeft||0,t=t.offsetParent;while(t&&t!==e);return i},replaceNodeWithPlaceholder:function(t){var e=this.$.generator.fetchRowNode(t);if(!e)return enyo.log("No node - "+t),void 0;this.placeholderNode=this.createPlaceholderNode(e),this.hiddenNode=this.hideNode(e);var i=this.pageForPageNumber(this.currentPageNumber);i.hasNode().insertBefore(this.placeholderNode,this.hiddenNode)},createPlaceholderNode:function(t){var e=this.$.placeholder.hasNode().cloneNode(!0),i=enyo.dom.getBounds(t);return e.style.height=i.height+"px",e.style.width=i.width+"px",e},removePlaceholderNode:function(){this.removeNode(this.placeholderNode),this.placeholderNode=null},removeDraggingRowNode:function(){this.draggingRowNode=null;var t=this.$.holdingarea.hasNode();t.innerHTML=""},removeNode:function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},updatePageSize:function(t){if(!(0>t)){var e=this.pageForPageNumber(t,!0);if(e){var i=this.pageSizes[t],o=Math.max(1,e.getBounds().height);this.pageSizes[t]=o,this.portSize+=o-i}}},updatePagePositions:function(t){this.positionPage(this.currentPageNumber,this.pageForPageNumber(this.currentPageNumber)),this.positionPage(t,this.pageForPageNumber(t))},correctPageSizes:function(){var t=this.initialPageNumber%2;this.updatePageSize(this.currentPageNumber,this.$["page"+this.currentPage]),t!=this.currentPageNumber&&this.updatePageSize(this.initialPageNumber,this.$["page"+t])},hideNode:function(t){return t.style.display="none",t},showNode:function(t){return t.style.display="block",t},dropPinnedRow:function(t){this.moveReorderedContainerToDroppedPosition(t),this.completeReorderTimeout=setTimeout(this.bindSafely(this.completeFinishReordering,t),100)},cancelPinnedMode:function(t){this.placeholderRowIndex=this.draggingRowIndex,this.dropPinnedRow(t)},getRowIndexFromCoordinate:function(t){var e=this.getScrollTop()+t-enyo.dom.calcNodePosition(this.hasNode()).top;if(0>e)return-1;var i=this.positionToPageInfo(e),o=i.no==this.p0?this.p0RowBounds:this.p1RowBounds;if(!o)return this.count;for(var n=i.pos,s=this.placeholderNode?enyo.dom.getBounds(this.placeholderNode).height:0,r=0,h=i.startRow;i.endRow>=h;++h){if(h===this.placeholderRowIndex&&(r+=s,r>=n))return-1;if(h!==this.draggingRowIndex&&(r+=o[h].height,r>=n))return h}return h},getIndexPosition:function(t){return enyo.dom.calcNodePosition(this.$.generator.fetchRowNode(t))},setItemPosition:function(t,e){var i=this.getNodeStyle(e),o="ScrollStrategy"==this.getStrategyKind()?i.top:i.top-this.getScrollTop(),n="top:"+o+"px; left:"+i.left+"px;";t.addStyles(n)},setItemBounds:function(t,e){var i=this.getNodeStyle(e),o="width:"+i.w+"px; height:"+i.h+"px;";t.addStyles(o)},reorderScroll:function(){"ScrollStrategy"==this.getStrategyKind()&&this.$.reorderContainer.addStyles("top:"+(this.initialPinPosition+this.getScrollTop()-this.rowSize)+"px;"),this.updatePlaceholderPosition(this.initialPinPosition)},hideReorderingRow:function(){var t=this.hasNode().querySelector('[data-enyo-index="'+this.draggingRowIndex+'"]');t&&(this.hiddenNode=this.hideNode(t))},isReordering:function(){return this.draggingRowIndex>-1},isSwiping:function(){return null!=this.swipeIndex&&!this.swipeComplete&&null!=this.swipeDirection},swipeDragStart:function(t,e){return null==e.index||e.vertical?!0:(this.completeSwipeTimeout&&this.completeSwipe(e),this.swipeComplete=!1,this.swipeIndex!=e.index&&(this.clearSwipeables(),this.swipeIndex=e.index),this.swipeDirection=e.xDirection,this.persistentItemVisible||this.startSwipe(e),this.draggedXDistance=0,this.draggedYDistance=0,!0)},swipeDrag:function(t,e){return this.persistentItemVisible?(this.dragPersistentItem(e),this.preventDragPropagation):this.isSwiping()?(this.dragSwipeableComponents(this.calcNewDragPosition(e.ddx)),this.draggedXDistance=e.dx,this.draggedYDistance=e.dy,!0):!1},swipeDragFinish:function(t,e){if(this.persistentItemVisible)this.dragFinishPersistentItem(e);else{if(!this.isSwiping())return!1;var i=this.calcPercentageDragged(this.draggedXDistance);i>this.percentageDraggedThreshold&&e.xDirection===this.swipeDirection?this.swipe(this.fastSwipeSpeedMS):this.backOutSwipe(e)}return this.preventDragPropagation},isSwipeable:function(){return this.enableSwipe&&0!==this.$.swipeableComponents.controls.length&&!this.isReordering()&&!this.pinnedReorderMode},positionSwipeableContainer:function(t,e){var i=this.$.generator.fetchRowNode(t);if(i){var o=this.getRelativeOffset(i,this.hasNode()),n=enyo.dom.getBounds(i),s=1==e?-1*n.width:n.width;this.$.swipeableComponents.addStyles("top: "+o.top+"px; left: "+s+"px; height: "+n.height+"px; width: "+n.width+"px;")}},calcNewDragPosition:function(t){var e=this.$.swipeableComponents.getBounds(),i=e.left,o=this.$.swipeableComponents.getBounds(),n=1==this.swipeDirection?0:-1*o.width,s=1==this.swipeDirection?i+t>n?n:i+t:n>i+t?n:i+t;return s},dragSwipeableComponents:function(t){this.$.swipeableComponents.applyStyle("left",t+"px")},startSwipe:function(t){t.index=this.swipeIndex,this.positionSwipeableContainer(this.swipeIndex,t.xDirection),this.$.swipeableComponents.setShowing(!0),this.setPersistentItemOrigin(t.xDirection),this.doSetupSwipeItem(t)},dragPersistentItem:function(t){var e=0,i="right"==this.persistentItemOrigin?Math.max(e,e+t.dx):Math.min(e,e+t.dx);this.$.swipeableComponents.applyStyle("left",i+"px")},dragFinishPersistentItem:function(t){var e=this.calcPercentageDragged(t.dx)>.2,i=t.dx>0?"right":0>t.dx?"left":null;this.persistentItemOrigin==i?e?this.slideAwayItem():this.bounceItem(t):this.bounceItem(t)},setPersistentItemOrigin:function(t){this.persistentItemOrigin=1==t?"left":"right"},calcPercentageDragged:function(t){return Math.abs(t/this.$.swipeableComponents.getBounds().width)},swipe:function(t){this.swipeComplete=!0,this.animateSwipe(0,t)},backOutSwipe:function(){var t=this.$.swipeableComponents.getBounds(),e=1==this.swipeDirection?-1*t.width:t.width;this.animateSwipe(e,this.fastSwipeSpeedMS),this.swipeDirection=null},bounceItem:function(){var t=this.$.swipeableComponents.getBounds();t.left!=t.width&&this.animateSwipe(0,this.normalSwipeSpeedMS)},slideAwayItem:function(){var t=this.$.swipeableComponents,e=t.getBounds().width,i="left"==this.persistentItemOrigin?-1*e:e;this.animateSwipe(i,this.normalSwipeSpeedMS),this.persistentItemVisible=!1,this.setPersistSwipeableItem(!1)},clearSwipeables:function(){this.$.swipeableComponents.setShowing(!1),this.persistentItemVisible=!1,this.setPersistSwipeableItem(!1)},completeSwipe:function(){this.completeSwipeTimeout&&(clearTimeout(this.completeSwipeTimeout),this.completeSwipeTimeout=null),this.getPersistSwipeableItem()?this.swipeComplete&&(this.persistentItemVisible=!0):(this.$.swipeableComponents.setShowing(!1),this.swipeComplete&&this.doSwipeComplete({index:this.swipeIndex,xDirection:this.swipeDirection})),this.swipeIndex=null,this.swipeDirection=null},animateSwipe:function(t,e){var i=enyo.now(),o=this.$.swipeableComponents,n=parseInt(o.domStyles.left,10),s=t-n;this.stopAnimateSwipe();var r=this.bindSafely(function(){var t=enyo.now()-i,h=t/e,a=n+s*Math.min(h,1);o.applyStyle("left",a+"px"),this.job=enyo.requestAnimationFrame(r),t/e>=1&&(this.stopAnimateSwipe(),this.completeSwipeTimeout=setTimeout(this.bindSafely(function(){this.completeSwipe()}),this.completeSwipeDelayMS))});this.job=enyo.requestAnimationFrame(r)},stopAnimateSwipe:function(){this.job&&(this.job=enyo.cancelRequestAnimationFrame(this.job))}});

// lib/layout/list/source/PulldownList.js
enyo.kind({name:"enyo.PulldownList",kind:"List",touch:!0,pully:null,pulldownTools:[{name:"pulldown",classes:"enyo-list-pulldown",components:[{name:"puller",kind:"Puller"}]}],events:{onPullStart:"",onPullCancel:"",onPull:"",onPullRelease:"",onPullComplete:""},handlers:{onScrollStart:"scrollStartHandler",onScrollStop:"scrollStopHandler",ondragfinish:"dragfinish"},pullingMessage:"Pull down to refresh...",pulledMessage:"Release to refresh...",loadingMessage:"Loading...",pullingIconClass:"enyo-puller-arrow enyo-puller-arrow-down",pulledIconClass:"enyo-puller-arrow enyo-puller-arrow-up",loadingIconClass:"",create:enyo.inherit(function(t){return function(){var e={kind:"Puller",showing:!1,text:this.loadingMessage,iconClass:this.loadingIconClass,onCreate:"setPully"};this.listTools.splice(0,0,e),t.apply(this,arguments),this.setPulling()}}),initComponents:enyo.inherit(function(t){return function(){this.createChrome(this.pulldownTools),this.accel=enyo.dom.canAccelerate(),this.translation=this.accel?"translate3d":"translate",this.strategyKind=this.resetStrategyKind(),t.apply(this,arguments)}}),resetStrategyKind:function(){return enyo.platform.android>=3?"TranslateScrollStrategy":"TouchScrollStrategy"},setPully:function(t,e){this.pully=e.originator},scrollStartHandler:function(){this.firedPullStart=!1,this.firedPull=!1,this.firedPullCancel=!1},scroll:enyo.inherit(function(t){return function(){var e=t.apply(this,arguments);this.completingPull&&this.pully.setShowing(!1);var i=this.getStrategy().$.scrollMath||this.getStrategy(),o=-1*this.getScrollTop();return i.isInOverScroll()&&o>0&&(enyo.dom.transformValue(this.$.pulldown,this.translation,"0,"+o+"px"+(this.accel?",0":"")),this.firedPullStart||(this.firedPullStart=!0,this.pullStart(),this.pullHeight=this.$.pulldown.getBounds().height),o>this.pullHeight&&!this.firedPull&&(this.firedPull=!0,this.firedPullCancel=!1,this.pull()),this.firedPull&&!this.firedPullCancel&&this.pullHeight>o&&(this.firedPullCancel=!0,this.firedPull=!1,this.pullCancel())),e}}),scrollStopHandler:function(){this.completingPull&&(this.completingPull=!1,this.doPullComplete())},dragfinish:function(){if(this.firedPull){var t=this.getStrategy().$.scrollMath||this.getStrategy();t.setScrollY(-1*this.getScrollTop()-this.pullHeight),this.pullRelease()}},completePull:function(){this.completingPull=!0;var t=this.getStrategy().$.scrollMath||this.getStrategy();t.setScrollY(this.pullHeight),t.start()},pullStart:function(){this.setPulling(),this.pully.setShowing(!1),this.$.puller.setShowing(!0),this.doPullStart()},pull:function(){this.setPulled(),this.doPull()},pullCancel:function(){this.setPulling(),this.doPullCancel()},pullRelease:function(){this.$.puller.setShowing(!1),this.pully.setShowing(!0),this.doPullRelease()},setPulling:function(){this.$.puller.setText(this.pullingMessage),this.$.puller.setIconClass(this.pullingIconClass)},setPulled:function(){this.$.puller.setText(this.pulledMessage),this.$.puller.setIconClass(this.pulledIconClass)}}),enyo.kind({name:"enyo.Puller",classes:"enyo-puller",published:{text:"",iconClass:""},events:{onCreate:""},components:[{name:"icon"},{name:"text",tag:"span",classes:"enyo-puller-text"}],create:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.doCreate(),this.textChanged(),this.iconClassChanged()}}),textChanged:function(){this.$.text.setContent(this.text)},iconClassChanged:function(){this.$.icon.setClasses(this.iconClass)}});

// lib/layout/list/source/AroundList.js
enyo.kind({name:"enyo.AroundList",kind:"enyo.List",listTools:[{name:"port",classes:"enyo-list-port enyo-border-box",components:[{name:"aboveClient"},{name:"generator",kind:"FlyweightRepeater",canGenerate:!1,components:[{tag:null,name:"client"}]},{name:"holdingarea",allowHtml:!0,classes:"enyo-list-holdingarea"},{name:"page0",allowHtml:!0,classes:"enyo-list-page"},{name:"page1",allowHtml:!0,classes:"enyo-list-page"},{name:"belowClient"},{name:"placeholder"},{name:"swipeableComponents",style:"position:absolute; display:block; top:-1000px; left:0px;"}]}],aboveComponents:null,initComponents:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.aboveComponents&&this.$.aboveClient.createComponents(this.aboveComponents,{owner:this.owner}),this.belowComponents&&this.$.belowClient.createComponents(this.belowComponents,{owner:this.owner})}}),updateMetrics:function(){this.defaultPageSize=this.rowsPerPage*(this.rowSize||100),this.pageCount=Math.ceil(this.count/this.rowsPerPage),this.aboveHeight=this.$.aboveClient.getBounds().height,this.belowHeight=this.$.belowClient.getBounds().height,this.portSize=this.aboveHeight+this.belowHeight;for(var t=0;this.pageCount>t;t++)this.portSize+=this.getPageSize(t);this.adjustPortSize()},positionPage:function(t,e){e.pageNo=t;var i=this.pageToPosition(t),o=this.bottomUp?this.belowHeight:this.aboveHeight;i+=o,e.applyStyle(this.pageBound,i+"px")},scrollToContentStart:function(){var t=this.bottomUp?this.belowHeight:this.aboveHeight;this.setScrollPosition(t)}});

// lib/layout/list/source/GridListImageItem.js
enyo.kind({name:"enyo.GridListImageItem",classes:"enyo-gridlist-imageitem",components:[{name:"image",kind:"enyo.Image",classes:"image"},{name:"caption",classes:"caption"},{name:"subCaption",classes:"sub-caption"}],published:{source:"",caption:"",subCaption:"",selected:!1,centered:!0,imageSizing:"",useCaption:!0,useSubCaption:!0},bindings:[{from:".source",to:".$.image.src"},{from:".caption",to:".$.caption.content"},{from:".caption",to:".$.caption.showing",kind:"enyo.EmptyBinding"},{from:".subCaption",to:".$.subCaption.content"},{from:".subCaption",to:".$.subCaption.showing",kind:"enyo.EmptyBinding"}],create:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.selectedChanged(),this.imageSizingChanged(),this.centeredChanged()}}),selectedChanged:function(){this.addRemoveClass("selected",this.selected)},disabledChanged:function(){this.addRemoveClass("disabled",this.disabled)},imageSizingChanged:function(){this.$.image.setSizing(this.imageSizing),this.addRemoveClass("sized-image",!!this.imageSizing),this.imageSizing&&(this.useCaptionChanged(),this.useSubCaptionChanged())},useCaptionChanged:function(){this.addRemoveClass("use-caption",this.useCaption)},useSubCaptionChanged:function(){this.addRemoveClass("use-subcaption",this.useSubCaption)},centeredChanged:function(){this.addRemoveClass("centered",this.centered)}});

// lib/layout/slideable/source/Slideable.js
enyo.kind({name:"enyo.Slideable",kind:"Control",published:{axis:"h",value:0,unit:"px",min:0,max:0,accelerated:"auto",overMoving:!0,draggable:!0},events:{onAnimateFinish:"",onChange:""},preventDragPropagation:!1,tools:[{kind:"Animator",onStep:"animatorStep",onEnd:"animatorComplete"}],handlers:{ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish"},kDragScalar:1,dragEventProp:"dx",unitModifier:!1,canTransform:!1,create:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.acceleratedChanged(),this.transformChanged(),this.axisChanged(),this.valueChanged(),this.addClass("enyo-slideable")}}),initComponents:enyo.inherit(function(t){return function(){this.createComponents(this.tools),t.apply(this,arguments)}}),rendered:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.canModifyUnit(),this.updateDragScalar()}}),resizeHandler:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.updateDragScalar()}}),canModifyUnit:function(){if(!this.canTransform){var t=this.getInitialStyleValue(this.hasNode(),this.boundary);t.match(/px/i)&&"%"===this.unit&&(this.unitModifier=this.getBounds()[this.dimension])}},getInitialStyleValue:function(t,e){var i=enyo.dom.getComputedStyle(t);return i?i.getPropertyValue(e):t&&t.currentStyle?t.currentStyle[e]:"0"},updateBounds:function(t,e){var i={};i[this.boundary]=t,this.setBounds(i,this.unit),this.setInlineStyles(t,e)},updateDragScalar:function(){if("%"==this.unit){var t=this.getBounds()[this.dimension];this.kDragScalar=t?100/t:1,this.canTransform||this.updateBounds(this.value,100)}},transformChanged:function(){this.canTransform=enyo.dom.canTransform()},acceleratedChanged:function(){(!enyo.platform.android||2>=enyo.platform.android)&&enyo.dom.accelerate(this,this.accelerated)},axisChanged:function(){var t="h"==this.axis;this.dragMoveProp=t?"dx":"dy",this.shouldDragProp=t?"horizontal":"vertical",this.transform=t?"translateX":"translateY",this.dimension=t?"width":"height",this.boundary=t?"left":"top"},setInlineStyles:function(t,e){var i={};this.unitModifier?(i[this.boundary]=this.percentToPixels(t,this.unitModifier),i[this.dimension]=this.unitModifier,this.setBounds(i)):(e?i[this.dimension]=e:i[this.boundary]=t,this.setBounds(i,this.unit))},valueChanged:function(t){var e=this.value;this.isOob(e)&&!this.isAnimating()&&(this.value=this.overMoving?this.dampValue(e):this.clampValue(e)),enyo.platform.android>2&&(this.value?(0===t||void 0===t)&&enyo.dom.accelerate(this,this.accelerated):enyo.dom.accelerate(this,!1)),this.canTransform?enyo.dom.transformValue(this,this.transform,this.value+this.unit):this.setInlineStyles(this.value,!1),this.doChange()},getAnimator:function(){return this.$.animator},isAtMin:function(){return this.value<=this.calcMin()},isAtMax:function(){return this.value>=this.calcMax()},calcMin:function(){return this.min},calcMax:function(){return this.max},clampValue:function(t){var e=this.calcMin(),i=this.calcMax();return Math.max(e,Math.min(t,i))},dampValue:function(t){return this.dampBound(this.dampBound(t,this.min,1),this.max,-1)},dampBound:function(t,e,i){var o=t;return e*i>o*i&&(o=e+(o-e)/4),o},percentToPixels:function(t,e){return Math.floor(e/100*t)},pixelsToPercent:function(t){var e=this.unitModifier?this.getBounds()[this.dimension]:this.container.getBounds()[this.dimension];return 100*(t/e)},shouldDrag:function(t){return this.draggable&&t[this.shouldDragProp]},isOob:function(t){return t>this.calcMax()||this.calcMin()>t},dragstart:function(t,e){return this.shouldDrag(e)?(e.preventDefault(),this.$.animator.stop(),e.dragInfo={},this.dragging=!0,this.drag0=this.value,this.dragd0=0,this.preventDragPropagation):void 0},drag:function(t,e){if(this.dragging){e.preventDefault();var i=this.canTransform?e[this.dragMoveProp]*this.kDragScalar:this.pixelsToPercent(e[this.dragMoveProp]),o=this.drag0+i,n=i-this.dragd0;return this.dragd0=i,n&&(e.dragInfo.minimizing=0>n),this.setValue(o),this.preventDragPropagation}},dragfinish:function(t,e){return this.dragging?(this.dragging=!1,this.completeDrag(e),e.preventTap(),this.preventDragPropagation):void 0},completeDrag:function(t){this.value!==this.calcMax()&&this.value!=this.calcMin()&&this.animateToMinMax(t.dragInfo.minimizing)},isAnimating:function(){return this.$.animator.isAnimating()},play:function(t,e){this.$.animator.play({startValue:t,endValue:e,node:this.hasNode()})},animateTo:function(t){this.play(this.value,t)},animateToMin:function(){this.animateTo(this.calcMin())},animateToMax:function(){this.animateTo(this.calcMax())},animateToMinMax:function(t){t?this.animateToMin():this.animateToMax()},animatorStep:function(t){return this.setValue(t.value),!0},animatorComplete:function(t){return this.doAnimateFinish(t),!0},toggleMinMax:function(){this.animateToMinMax(!this.isAtMin())}});

// lib/layout/panels/source/arrangers/Arranger.js
enyo.kind({name:"enyo.Arranger",kind:"Layout",layoutClass:"enyo-arranger",accelerated:"auto",dragProp:"ddx",dragDirectionProp:"xDirection",canDragProp:"horizontal",incrementalPoints:!1,destroy:enyo.inherit(function(t){return function(){for(var e,i=this.container.getPanels(),o=0;e=i[o];o++)e._arranger=null;t.apply(this,arguments)}}),arrange:function(){},size:function(){},start:function(){var t=this.container.fromIndex,e=this.container.toIndex,i=this.container.transitionPoints=[t];if(this.incrementalPoints)for(var o=Math.abs(e-t)-2,n=t;o>=0;)n+=t>e?-1:1,i.push(n),o--;i.push(this.container.toIndex)},finish:function(){},calcArrangementDifference:function(){},canDragEvent:function(t){return t[this.canDragProp]},calcDragDirection:function(t){return t[this.dragDirectionProp]},calcDrag:function(t){return t[this.dragProp]},drag:function(t,e,i,o,n){var s=this.measureArrangementDelta(-t,e,i,o,n);return s},measureArrangementDelta:function(t,e,i,o,n){var s=this.calcArrangementDifference(e,i,o,n),r=s?t/Math.abs(s):0;return r*=this.container.fromIndex>this.container.toIndex?-1:1},_arrange:function(t){this.containerBounds||this.reflow();var e=this.getOrderedControls(t);this.arrange(e,t)},arrangeControl:function(t,e){t._arranger=enyo.mixin(t._arranger||{},e)},flow:function(){this.c$=[].concat(this.container.getPanels()),this.controlsIndex=0;for(var t,e=0,i=this.container.getPanels();t=i[e];e++)if(enyo.dom.accelerate(t,!t.preventAccelerate&&this.accelerated),enyo.platform.safari)for(var o,n=t.children,s=0;o=n[s];s++)enyo.dom.accelerate(o,this.accelerated)},reflow:function(){var t=this.container.hasNode();this.containerBounds=t?{width:t.clientWidth,height:t.clientHeight}:{},this.size()},flowArrangement:function(){var t=this.container.arrangement;if(t)for(var e,i=0,o=this.container.getPanels();(e=o[i])&&t[i];i++)this.flowControl(e,t[i])},flowControl:function(t,e){enyo.Arranger.positionControl(t,e);var i=e.opacity;null!=i&&enyo.Arranger.opacifyControl(t,i)},getOrderedControls:function(t){for(var e=Math.floor(t),i=e-this.controlsIndex,o=i>0,n=this.c$||[],s=0;Math.abs(i)>s;s++)o?n.push(n.shift()):n.unshift(n.pop());return this.controlsIndex=e,n},statics:{positionControl:function(t,e,i){var o=i||"px";if(!this.updating)if(!enyo.dom.canTransform()||t.preventTransform||enyo.platform.android||10===enyo.platform.ie)enyo.dom.canTransform()&&t.preventTransform&&enyo.dom.transform(t,{translateX:null,translateY:null}),t.setBounds(e,i);else{var n=e.left,s=e.top;n=enyo.isString(n)?n:n&&n+o,s=enyo.isString(s)?s:s&&s+o,enyo.dom.transform(t,{translateX:n||null,translateY:s||null})}},opacifyControl:function(t,e){var i=e;i=i>.99?1:.01>i?0:i,9>enyo.platform.ie?t.applyStyle("filter","progid:DXImageTransform.Microsoft.Alpha(Opacity="+100*i+")"):t.applyStyle("opacity",i)}}});

// lib/layout/panels/source/arrangers/CardArranger.js
enyo.kind({name:"enyo.CardArranger",kind:"Arranger",layoutClass:"enyo-arranger enyo-arranger-fit",calcArrangementDifference:function(){return this.containerBounds.width},arrange:function(t){for(var e,i,n=0;e=t[n];n++)i=0===n?1:0,this.arrangeControl(e,{opacity:i})},start:enyo.inherit(function(t){return function(){t.apply(this,arguments);for(var e,i=this.container.getPanels(),n=0;e=i[n];n++){var o=e.showing;e.setShowing(n==this.container.fromIndex||n==this.container.toIndex),e.showing&&!o&&e.resized()}}}),finish:enyo.inherit(function(t){return function(){t.apply(this,arguments);for(var e,i=this.container.getPanels(),n=0;e=i[n];n++)e.setShowing(n==this.container.toIndex)}}),destroy:enyo.inherit(function(t){return function(){for(var e,i=this.container.getPanels(),n=0;e=i[n];n++)enyo.Arranger.opacifyControl(e,1),e.showing||e.setShowing(!0);t.apply(this,arguments)}})});

// lib/layout/panels/source/arrangers/CardSlideInArranger.js
enyo.kind({name:"enyo.CardSlideInArranger",kind:"CardArranger",start:function(){for(var t,e=this.container.getPanels(),i=0;t=e[i];i++){var n=t.showing;t.setShowing(i==this.container.fromIndex||i==this.container.toIndex),t.showing&&!n&&t.resized()}var o=this.container.fromIndex;i=this.container.toIndex,this.container.transitionPoints=[i+"."+o+".s",i+"."+o+".f"]},finish:enyo.inherit(function(t){return function(){t.apply(this,arguments);for(var e,i=this.container.getPanels(),n=0;e=i[n];n++)e.setShowing(n==this.container.toIndex)}}),arrange:function(t,e){for(var i,n,o=e.split("."),s=o[0],r=o[1],a="s"==o[2],h=this.containerBounds.width,l=0,d=this.container.getPanels();i=d[l];l++)n=h,r==l&&(n=a?0:-h),s==l&&(n=a?h:0),r==l&&r==s&&(n=0),this.arrangeControl(i,{left:n})},destroy:enyo.inherit(function(t){return function(){for(var e,i=this.container.getPanels(),n=0;e=i[n];n++)enyo.Arranger.positionControl(e,{left:null});t.apply(this,arguments)}})});

// lib/layout/panels/source/arrangers/CarouselArranger.js
enyo.kind({name:"enyo.CarouselArranger",kind:"Arranger",size:function(){var t,e,i,n,o,s=this.container.getPanels(),r=this.containerPadding=this.container.hasNode()?enyo.dom.calcPaddingExtents(this.container.node):{},a=this.containerBounds;a.height-=r.top+r.bottom,a.width-=r.left+r.right;var h;for(t=0,i=0;o=s[t];t++)n=enyo.dom.calcMarginExtents(o.hasNode()),o.width=o.getBounds().width,o.marginWidth=n.right+n.left,i+=(o.fit?0:o.width)+o.marginWidth,o.fit&&(h=o);if(h){var l=a.width-i;h.width=l>=0?l:h.width}for(t=0,e=r.left;o=s[t];t++)o.setBounds({top:r.top,bottom:r.bottom,width:o.fit?o.width:null})},arrange:function(t,e){this.container.wrap?this.arrangeWrap(t,e):this.arrangeNoWrap(t,e)},arrangeNoWrap:function(t,e){var i,n,o,s,r=this.container.getPanels(),a=this.container.clamp(e),h=this.containerBounds.width;for(i=a,o=0;(s=r[i])&&(o+=s.width+s.marginWidth,!(o>h));i++);var l=h-o,d=0;if(l>0)for(i=a-1,n=0;s=r[i];i--)if(n+=s.width+s.marginWidth,0>=l-n){d=l-n,a=i;break}var c,u;for(i=0,u=this.containerPadding.left+d;s=r[i];i++)c=s.width+s.marginWidth,a>i?this.arrangeControl(s,{left:-c}):(this.arrangeControl(s,{left:Math.floor(u)}),u+=c)},arrangeWrap:function(t){for(var e,i=0,n=this.containerPadding.left;e=t[i];i++)this.arrangeControl(e,{left:n}),n+=e.width+e.marginWidth},calcArrangementDifference:function(t,e,i,n){var o=Math.abs(t%this.c$.length);return e[o].left-n[o].left},destroy:enyo.inherit(function(t){return function(){for(var e,i=this.container.getPanels(),n=0;e=i[n];n++)enyo.Arranger.positionControl(e,{left:null,top:null}),e.applyStyle("top",null),e.applyStyle("bottom",null),e.applyStyle("left",null),e.applyStyle("width",null);t.apply(this,arguments)}})});

// lib/layout/panels/source/arrangers/CollapsingArranger.js
enyo.kind({name:"enyo.CollapsingArranger",kind:"CarouselArranger",peekWidth:0,size:enyo.inherit(function(t){return function(){this.clearLastSize(),t.apply(this,arguments)}}),clearLastSize:function(){for(var t,e=0,i=this.container.getPanels();t=i[e];e++)t._fit&&e!=i.length-1&&(t.applyStyle("width",null),t._fit=null)},constructor:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.peekWidth=null!=this.container.peekWidth?this.container.peekWidth:this.peekWidth}}),arrange:function(t,e){for(var i,n=this.container.getPanels(),o=0,s=this.containerPadding.left,r=0;i=n[o];o++)i.getShowing()?(this.arrangeControl(i,{left:s+r*this.peekWidth}),o>=e&&(s+=i.width+i.marginWidth-this.peekWidth),r++):(this.arrangeControl(i,{left:s}),o>=e&&(s+=i.width+i.marginWidth)),o==n.length-1&&0>e&&this.arrangeControl(i,{left:s-e})},calcArrangementDifference:function(t,e,i,n){var o=this.container.getPanels().length-1;return Math.abs(n[o].left-e[o].left)},flowControl:enyo.inherit(function(t){return function(e,i){if(t.apply(this,arguments),this.container.realtimeFit){var n=this.container.getPanels(),o=n.length-1,s=n[o];e==s&&this.fitControl(e,i.left)}}}),finish:enyo.inherit(function(t){return function(){if(t.apply(this,arguments),!this.container.realtimeFit&&this.containerBounds){var e=this.container.getPanels(),i=this.container.arrangement,n=e.length-1,o=e[n];this.fitControl(o,i[n].left)}}}),fitControl:function(t,e){t._fit=!0,t.applyStyle("width",this.containerBounds.width-e+"px"),t.resized()}});

// lib/layout/panels/source/arrangers/DockRightArranger.js
enyo.kind({name:"enyo.DockRightArranger",kind:"Arranger",basePanel:!1,overlap:0,layoutWidth:0,constructor:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.overlap=null!=this.container.overlap?this.container.overlap:this.overlap,this.layoutWidth=null!=this.container.layoutWidth?this.container.layoutWidth:this.layoutWidth}}),size:function(){var t,e,i,n=this.container.getPanels(),o=this.containerPadding=this.container.hasNode()?enyo.dom.calcPaddingExtents(this.container.node):{},s=this.containerBounds;s.width-=o.left+o.right;var r,a=s.width,h=n.length;for(this.container.transitionPositions={},t=0;i=n[t];t++)i.width=0===t&&this.container.basePanel?a:i.getBounds().width;for(t=0;i=n[t];t++){0===t&&this.container.basePanel&&i.setBounds({width:a}),i.setBounds({top:o.top,bottom:o.bottom});for(var l=0;i=n[l];l++){var d;if(0===t&&this.container.basePanel)d=0;else if(t>l)d=a;else{if(t!==l)break;r=a>this.layoutWidth?this.overlap:0,d=a-n[t].width+r}this.container.transitionPositions[t+"."+l]=d}if(h>l)for(var c=!1,u=t+1;h>u;u++){if(r=0,c)r=0;else if(n[t].width+n[u].width-this.overlap>a)r=0,c=!0;else{for(r=n[t].width-this.overlap,e=t;u>e;e++){var g=r+n[e+1].width-this.overlap;if(!(a>g)){r=a;break}r=g}r=a-r}this.container.transitionPositions[t+"."+u]=r}}},arrange:function(t,e){var i,n,o=this.container.getPanels(),s=this.container.clamp(e);for(i=0;n=o[i];i++){var r=this.container.transitionPositions[i+"."+s];this.arrangeControl(n,{left:r})}},calcArrangementDifference:function(t,e,i){var n=this.container.getPanels(),o=i>t?n[i].width:n[t].width;return o},destroy:enyo.inherit(function(t){return function(){for(var e,i=this.container.getPanels(),n=0;e=i[n];n++)enyo.Arranger.positionControl(e,{left:null,top:null}),e.applyStyle("top",null),e.applyStyle("bottom",null),e.applyStyle("left",null),e.applyStyle("width",null);t.apply(this,arguments)}})});

// lib/layout/panels/source/arrangers/OtherArrangers.js
enyo.kind({name:"enyo.LeftRightArranger",kind:"Arranger",margin:40,axisSize:"width",offAxisSize:"height",axisPosition:"left",constructor:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.margin=null!=this.container.margin?this.container.margin:this.margin}}),size:function(){for(var t,e,i=this.container.getPanels(),n=this.containerBounds[this.axisSize],o=n-this.margin-this.margin,s=0;e=i[s];s++)t={},t[this.axisSize]=o,t[this.offAxisSize]="100%",e.setBounds(t)},start:enyo.inherit(function(t){return function(){t.apply(this,arguments);for(var e,i=this.container.fromIndex,n=this.container.toIndex,o=this.getOrderedControls(n),s=Math.floor(o.length/2),r=0;e=o[r];r++)i>n?r==o.length-s?e.applyStyle("z-index",0):e.applyStyle("z-index",1):r==o.length-1-s?e.applyStyle("z-index",0):e.applyStyle("z-index",1)}}),arrange:function(t,e){var i,n,o;if(1==this.container.getPanels().length)return o={},o[this.axisPosition]=this.margin,this.arrangeControl(this.container.getPanels()[0],o),void 0;var s=Math.floor(this.container.getPanels().length/2),r=this.getOrderedControls(Math.floor(e)-s),a=this.containerBounds[this.axisSize]-this.margin-this.margin,h=this.margin-a*s;for(i=0;n=r[i];i++)o={},o[this.axisPosition]=h,this.arrangeControl(n,o),h+=a},calcArrangementDifference:function(t,e,i,n){if(1==this.container.getPanels().length)return 0;var o=Math.abs(t%this.c$.length);return e[o][this.axisPosition]-n[o][this.axisPosition]},destroy:enyo.inherit(function(t){return function(){for(var e,i=this.container.getPanels(),n=0;e=i[n];n++)enyo.Arranger.positionControl(e,{left:null,top:null}),enyo.Arranger.opacifyControl(e,1),e.applyStyle("left",null),e.applyStyle("top",null),e.applyStyle("height",null),e.applyStyle("width",null);t.apply(this,arguments)}})}),enyo.kind({name:"enyo.TopBottomArranger",kind:"LeftRightArranger",dragProp:"ddy",dragDirectionProp:"yDirection",canDragProp:"vertical",axisSize:"height",offAxisSize:"width",axisPosition:"top"}),enyo.kind({name:"enyo.SpiralArranger",kind:"Arranger",incrementalPoints:!0,inc:20,size:function(){for(var t,e=this.container.getPanels(),i=this.containerBounds,n=this.controlWidth=i.width/3,o=this.controlHeight=i.height/3,s=0;t=e[s];s++)t.setBounds({width:n,height:o})},arrange:function(t){for(var e,i=this.inc,n=0,o=t.length;e=t[n];n++){var s=Math.cos(2*(n/o)*Math.PI)*n*i+this.controlWidth,r=Math.sin(2*(n/o)*Math.PI)*n*i+this.controlHeight;this.arrangeControl(e,{left:s,top:r})}},start:enyo.inherit(function(t){return function(){t.apply(this,arguments);for(var e,i=this.getOrderedControls(this.container.toIndex),n=0;e=i[n];n++)e.applyStyle("z-index",i.length-n)}}),calcArrangementDifference:function(){return this.controlWidth},destroy:enyo.inherit(function(t){return function(){for(var e,i=this.container.getPanels(),n=0;e=i[n];n++)e.applyStyle("z-index",null),enyo.Arranger.positionControl(e,{left:null,top:null}),e.applyStyle("left",null),e.applyStyle("top",null),e.applyStyle("height",null),e.applyStyle("width",null);t.apply(this,arguments)}})}),enyo.kind({name:"enyo.GridArranger",kind:"Arranger",incrementalPoints:!0,colWidth:100,colHeight:100,size:function(){for(var t,e=this.container.getPanels(),i=this.colWidth,n=this.colHeight,o=0;t=e[o];o++)t.setBounds({width:i,height:n})},arrange:function(t){for(var e,i=this.colWidth,n=this.colHeight,o=Math.max(1,Math.floor(this.containerBounds.width/i)),s=0,r=0;t.length>r;s++)for(var a=0;o>a&&(e=t[r]);a++,r++)this.arrangeControl(e,{left:i*a,top:n*s})},flowControl:enyo.inherit(function(t){return function(e,i){t.apply(this,arguments),enyo.Arranger.opacifyControl(e,0!==i.top%this.colHeight?.25:1)}}),calcArrangementDifference:function(){return this.colWidth},destroy:enyo.inherit(function(t){return function(){for(var e,i=this.container.getPanels(),n=0;e=i[n];n++)enyo.Arranger.positionControl(e,{left:null,top:null}),e.applyStyle("left",null),e.applyStyle("top",null),e.applyStyle("height",null),e.applyStyle("width",null);t.apply(this,arguments)}})});

// lib/layout/panels/source/Panels.js
enyo.kind({name:"enyo.Panels",classes:"enyo-panels",published:{index:0,draggable:!0,animate:!0,wrap:!1,arrangerKind:"CardArranger",narrowFit:!0},events:{onTransitionStart:"",onTransitionFinish:""},handlers:{ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish",onscroll:"domScroll"},tools:[{kind:"Animator",onStep:"step",onEnd:"completed"}],fraction:0,create:enyo.inherit(function(t){return function(){this.transitionPoints=[],t.apply(this,arguments),this.arrangerKindChanged(),this.narrowFitChanged(),this.indexChanged()}}),rendered:enyo.inherit(function(t){return function(){t.apply(this,arguments),enyo.makeBubble(this,"scroll")}}),domScroll:function(){this.hasNode()&&this.node.scrollLeft>0&&(this.node.scrollLeft=0)},initComponents:enyo.inherit(function(t){return function(){this.createChrome(this.tools),t.apply(this,arguments)}}),arrangerKindChanged:function(){this.setLayoutKind(this.arrangerKind)},narrowFitChanged:function(){this.addRemoveClass("enyo-panels-fit-narrow",this.narrowFit&&enyo.Panels.isScreenNarrow())},destroy:enyo.inherit(function(t){return function(){this.destroying=!0,t.apply(this,arguments)}}),removeControl:enyo.inherit(function(t){return function(e){if(this.destroying)return t.apply(this,arguments);var i=-1,n=enyo.indexOf(e,this.controls);n===this.index&&(i=Math.max(n-1,0)),t.apply(this,arguments),-1!==i&&this.controls.length>0&&(this.setIndex(i),this.flow(),this.reflow())}}),isPanel:function(){return!0},flow:enyo.inherit(function(t){return function(){this.arrangements=[],t.apply(this,arguments)}}),reflow:enyo.inherit(function(t){return function(){this.arrangements=[],t.apply(this,arguments),this.refresh()}}),getPanels:function(){var t=this.controlParent||this;return t.children},getActive:function(){var t=this.getPanels(),e=this.index%t.length;return 0>e&&(e+=t.length),t[e]},getAnimator:function(){return this.$.animator},setIndex:function(t){var e=this.get("index"),i=this.clamp(t);this.index=i,this.notifyObservers("index",e,i)},setIndexDirect:function(t){this.setIndex(t),this.completed()},selectPanelByName:function(t){if(t)for(var e=0,i=this.getPanels(),n=i.length;n>e;++e)if(t===i[e].name)return this.setIndex(e),e},previous:function(){var t=this.index-1;this.wrap&&0>t&&(t=this.getPanels().length-1),this.setIndex(t)},next:function(){var t=this.index+1;this.wrap&&t>=this.getPanels().length&&(t=0),this.setIndex(t)},clamp:function(t){var e=this.getPanels().length;return this.wrap?(t%=e,0>t?t+e:t):Math.max(0,Math.min(t,e-1))},indexChanged:function(t){this.lastIndex=t,!this.dragging&&this.$.animator&&(this.$.animator.isAnimating()&&(this.finishTransitionInfo&&(this.finishTransitionInfo.animating=!0),this.completed()),this.$.animator.stop(),this.hasNode()&&(this.animate?(this.startTransition(!0),this.$.animator.play({startValue:this.fraction})):this.refresh()))},step:function(t){return this.fraction=t.value,this.stepTransition(),!0},completed:function(){return this.$.animator.isAnimating()&&this.$.animator.stop(),this.fraction=1,this.stepTransition(),this.finishTransition(!0),!0},dragstart:function(t,e){return this.draggable&&this.layout&&this.layout.canDragEvent(e)?(e.preventDefault(),this.dragstartTransition(e),this.dragging=!0,this.$.animator.stop(),!0):void 0},drag:function(t,e){this.dragging&&(e.preventDefault(),this.dragTransition(e))},dragfinish:function(t,e){this.dragging&&(this.dragging=!1,e.preventTap(),this.dragfinishTransition(e))},dragstartTransition:function(t){if(this.$.animator.isAnimating())this.verifyDragTransition(t);else{var e=this.fromIndex=this.index;this.toIndex=e-(this.layout?this.layout.calcDragDirection(t):0)}this.fromIndex=this.clamp(this.fromIndex),this.toIndex=this.clamp(this.toIndex),this.fireTransitionStart(),this.layout&&this.layout.start()},dragTransition:function(t){var e=this.layout?this.layout.calcDrag(t):0,i=this.transitionPoints,n=i[0],o=i[i.length-1],s=this.fetchArrangement(n),r=this.fetchArrangement(o),a=this.layout?this.layout.drag(e,n,s,o,r):0,h=e&&!a;this.fraction+=a;var l=this.fraction;(l>1||0>l||h)&&((l>0||h)&&this.dragfinishTransition(t),this.dragstartTransition(t),this.fraction=0),this.stepTransition()},dragfinishTransition:function(t){this.verifyDragTransition(t),this.setIndex(this.toIndex),this.dragging&&this.fireTransitionFinish()},verifyDragTransition:function(t){var e=this.layout?this.layout.calcDragDirection(t):0,i=Math.min(this.fromIndex,this.toIndex),n=Math.max(this.fromIndex,this.toIndex);if(e>0){var o=i;i=n,n=o}i!=this.fromIndex&&(this.fraction=1-this.fraction),this.fromIndex=i,this.toIndex=n},refresh:function(){this.$.animator&&this.$.animator.isAnimating()&&this.$.animator.stop(),this.startTransition(!1),this.fraction=1,this.stepTransition(),this.finishTransition(!1)},startTransition:function(t){this.fromIndex=null!=this.fromIndex?this.fromIndex:this.lastIndex||0,this.toIndex=null!=this.toIndex?this.toIndex:this.index,this.layout&&this.layout.start(),t&&this.fireTransitionStart()},finishTransition:function(t){this.layout&&this.layout.finish(),this.transitionPoints=[],this.fraction=0,this.fromIndex=this.toIndex=null,t&&this.fireTransitionFinish()},fireTransitionStart:function(){var t=this.startTransitionInfo;!this.hasNode()||t&&t.fromIndex==this.fromIndex&&t.toIndex==this.toIndex||(this.startTransitionInfo={fromIndex:this.fromIndex,toIndex:this.toIndex},this.doTransitionStart(enyo.clone(this.startTransitionInfo)))},fireTransitionFinish:function(){var t=this.finishTransitionInfo;!this.hasNode()||t&&t.fromIndex==this.lastIndex&&t.toIndex==this.index||(this.finishTransitionInfo=t&&t.animating?{fromIndex:t.toIndex,toIndex:this.lastIndex}:{fromIndex:this.lastIndex,toIndex:this.index},this.doTransitionFinish(enyo.clone(this.finishTransitionInfo)))},stepTransition:function(){if(this.hasNode()){var t=this.transitionPoints,e=(this.fraction||0)*(t.length-1),i=Math.floor(e);e-=i;var n=t[i],o=t[i+1],s=this.fetchArrangement(n),r=this.fetchArrangement(o);this.arrangement=s&&r?enyo.Panels.lerp(s,r,e):s||r,this.arrangement&&this.layout&&this.layout.flowArrangement()}},fetchArrangement:function(t){return null!=t&&!this.arrangements[t]&&this.layout&&(this.layout._arrange(t),this.arrangements[t]=this.readArrangement(this.getPanels())),this.arrangements[t]},readArrangement:function(t){for(var e,i=[],n=0,o=t;e=o[n];n++)i.push(enyo.clone(e._arranger));return i},statics:{isScreenNarrow:function(){var t=navigator.userAgent,e=enyo.dom.getWindowWidth();switch(enyo.platform.platformName){case"ios":return/iP(?:hone|od;(?: U;)? CPU) OS (\d+)/.test(t);case"android":return/Mobile/.test(t)&&(enyo.platform.android>2?!0:800>=e);case"androidChrome":return/Mobile/.test(t)}return 800>=e},lerp:function(t,e,i){for(var n,o=[],s=0,r=enyo.keys(t);n=r[s];s++)o.push(this.lerpObject(t[n],e[n],i));return o},lerpObject:function(t,e,i){var n,o,s=enyo.clone(t);if(e)for(var r in t)n=t[r],o=e[r],n!=o&&(s[r]=n-(n-o)*i);return s}}});

// lib/layout/tree/source/Node.js
enyo.kind({name:"enyo.Node",published:{expandable:!1,expanded:!1,icon:"",onlyIconExpands:!1,selected:!1},style:"padding: 0 0 0 16px;",content:"Node",defaultKind:"Node",classes:"enyo-node",components:[{name:"icon",kind:"Image",showing:!1},{kind:"Control",name:"caption",Xtag:"span",style:"display: inline-block; padding: 4px;",allowHtml:!0},{kind:"Control",name:"extra",tag:"span",allowHtml:!0}],childClient:[{kind:"Control",name:"box",classes:"enyo-node-box",Xstyle:"border: 1px solid orange;",components:[{kind:"Control",name:"client",classes:"enyo-node-client",Xstyle:"border: 1px solid lightblue;"}]}],handlers:{ondblclick:"dblclick"},events:{onNodeTap:"nodeTap",onNodeDblClick:"nodeDblClick",onExpand:"nodeExpand",onDestroyed:"nodeDestroyed"},create:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.selectedChanged(),this.iconChanged()}}),destroy:enyo.inherit(function(t){return function(){this.doDestroyed(),t.apply(this,arguments)}}),initComponents:enyo.inherit(function(t){return function(){this.expandable&&(this.kindComponents=this.kindComponents.concat(this.childClient)),t.apply(this,arguments)}}),contentChanged:function(){this.$.caption.setContent(this.content)},iconChanged:function(){this.$.icon.setSrc(this.icon),this.$.icon.setShowing(Boolean(this.icon))},selectedChanged:function(){this.addRemoveClass("enyo-selected",this.selected)},rendered:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.expandable&&!this.expanded&&this.quickCollapse()}}),addNodes:function(t){this.destroyClientControls();for(var e,i=0;e=t[i];i++)this.createComponent(e);this.$.client.render()},addTextNodes:function(t){this.destroyClientControls();for(var e,i=0;e=t[i];i++)this.createComponent({content:e});this.$.client.render()},tap:function(t,e){return this.onlyIconExpands?e.target==this.$.icon.hasNode()?this.toggleExpanded():this.doNodeTap():(this.toggleExpanded(),this.doNodeTap()),!0},dblclick:function(){return this.doNodeDblClick(),!0},toggleExpanded:function(){this.setExpanded(!this.expanded)},quickCollapse:function(){this.removeClass("enyo-animate"),this.$.box.applyStyle("height","0");var t=this.$.client.getBounds().height;this.$.client.setBounds({top:-t})},_expand:function(){this.addClass("enyo-animate");var t=this.$.client.getBounds().height;this.$.box.setBounds({height:t}),this.$.client.setBounds({top:0}),setTimeout(this.bindSafely(function(){this.expanded&&(this.removeClass("enyo-animate"),this.$.box.applyStyle("height","auto"))}),225)},_collapse:function(){this.removeClass("enyo-animate");var t=this.$.client.getBounds().height;this.$.box.setBounds({height:t}),setTimeout(this.bindSafely(function(){this.addClass("enyo-animate"),this.$.box.applyStyle("height","0"),this.$.client.setBounds({top:-t})}),25)},expandedChanged:function(){if(this.expandable){var t={expanded:this.expanded};this.doExpand(t),t.wait||this.effectExpanded()}else this.expanded=!1},effectExpanded:function(){this.$.client&&(this.expanded?this._expand():this._collapse())}});

// lib/layout/imageview/source/PanZoomView.js
enyo.kind({name:"enyo.PanZoomView",kind:enyo.Scroller,touchOverscroll:!1,thumb:!1,animate:!0,verticalDragPropagation:!0,horizontalDragPropagation:!0,published:{scale:"auto",disableZoom:!1},events:{onZoom:""},touch:!0,preventDragPropagation:!1,handlers:{ondragstart:"dragPropagation",onSetDimensions:"setDimensions"},components:[{name:"animator",kind:"Animator",onStep:"zoomAnimationStep",onEnd:"zoomAnimationEnd"},{name:"viewport",style:"overflow:hidden;min-height:100%;min-width:100%;",classes:"enyo-fit",ongesturechange:"gestureTransform",ongestureend:"saveState",ontap:"singleTap",ondblclick:"doubleClick",onmousewheel:"mousewheel",components:[{name:"content"}]}],create:enyo.inherit(function(t){return function(){this.scaleKeyword=this.scale;var e=this.components;if(this.components=[],t.apply(this,arguments),this.$.content.applyStyle("width",this.contentWidth+"px"),this.$.content.applyStyle("height",this.contentHeight+"px"),this.unscaledComponents){var i=this.hasOwnProperty("unscaledComponents")?this.getInstanceOwner():this;this.createComponents(this.unscaledComponents,{owner:i})}this.controlParentName="content",this.discoverControlParent(),this.createComponents(e),this.canTransform=enyo.dom.canTransform(),this.canTransform||this.$.content.applyStyle("position","relative"),this.canAccelerate=enyo.dom.canAccelerate(),this.getStrategy().setDragDuringGesture(!1)}}),rendered:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.getOriginalScale()}}),dragPropagation:function(t,e){var i=this.getStrategy().getScrollBounds(),n=0===i.top&&e.dy>0||i.top>=i.maxTop-2&&0>e.dy,o=0===i.left&&e.dx>0||i.left>=i.maxLeft-2&&0>e.dx;return!(n&&this.verticalDragPropagation||o&&this.horizontalDragPropagation)},mousewheel:function(t,e){e.pageX|=e.clientX+e.target.scrollLeft,e.pageY|=e.clientY+e.target.scrollTop;var i=(this.maxScale-this.minScale)/10,n=this.scale;return e.wheelDelta>0||0>e.detail?this.scale=this.limitScale(this.scale+i):(0>e.wheelDelta||e.detail>0)&&(this.scale=this.limitScale(this.scale-i)),this.eventPt=this.calcEventLocation(e),this.transform(this.scale),n!=this.scale&&this.doZoom({scale:this.scale}),this.ratioX=this.ratioY=null,e.preventDefault(),!0},resizeHandler:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.scaleChanged()}}),setDimensions:function(t,e){return this.$.content.applyStyle("width",e.width+"px"),this.$.content.applyStyle("height",e.height+"px"),this.originalWidth=e.width,this.originalHeight=e.height,this.scale=this.scaleKeyword,this.scaleChanged(),!0},getOriginalScale:function(){this.$.content.hasNode()&&(this.originalWidth=this.$.content.node.clientWidth,this.originalHeight=this.$.content.node.clientHeight,this.scale=this.scaleKeyword,this.scaleChanged())},scaleChanged:function(){var t=this.hasNode();if(t){this.containerWidth=t.clientWidth,this.containerHeight=t.clientHeight;var e=this.containerWidth/this.originalWidth,i=this.containerHeight/this.originalHeight;this.minScale=Math.min(e,i),this.maxScale=1>3*this.minScale?1:3*this.minScale,"auto"==this.scale?this.scale=this.minScale:"width"==this.scale?this.scale=e:"height"==this.scale?this.scale=i:"fit"==this.scale?(this.fitAlignment="center",this.scale=Math.max(e,i)):(this.maxScale=Math.max(this.maxScale,this.scale),this.scale=this.limitScale(this.scale))}this.eventPt=this.calcEventLocation(),this.transform(this.scale),this.getStrategy().$.scrollMath&&this.getStrategy().$.scrollMath.start(),this.align()},align:function(){if(this.fitAlignment&&"center"===this.fitAlignment){var t=this.getScrollBounds();this.setScrollLeft(t.maxLeft/2),this.setScrollTop(t.maxTop/2)}},gestureTransform:function(t,e){this.eventPt=this.calcEventLocation(e),this.transform(this.limitScale(this.scale*e.scale))},calcEventLocation:function(t){var e={x:0,y:0};if(t&&this.hasNode()){var i=this.node.getBoundingClientRect();e.x=Math.round(t.pageX-i.left-this.bounds.x),e.x=Math.max(0,Math.min(this.bounds.width,e.x)),e.y=Math.round(t.pageY-i.top-this.bounds.y),e.y=Math.max(0,Math.min(this.bounds.height,e.y))}return e},transform:function(t){this.tapped=!1;var e=this.bounds||this.innerBounds(t);this.bounds=this.innerBounds(t),this.scale>this.minScale?this.$.viewport.applyStyle("cursor","move"):this.$.viewport.applyStyle("cursor",null),this.$.viewport.setBounds({width:this.bounds.width+"px",height:this.bounds.height+"px"}),this.ratioX=this.ratioX||(this.eventPt.x+this.getScrollLeft())/e.width,this.ratioY=this.ratioY||(this.eventPt.y+this.getScrollTop())/e.height;var i,n;if(this.$.animator.ratioLock?(i=this.$.animator.ratioLock.x*this.bounds.width-this.containerWidth/2,n=this.$.animator.ratioLock.y*this.bounds.height-this.containerHeight/2):(i=this.ratioX*this.bounds.width-this.eventPt.x,n=this.ratioY*this.bounds.height-this.eventPt.y),i=Math.max(0,Math.min(this.bounds.width-this.containerWidth,i)),n=Math.max(0,Math.min(this.bounds.height-this.containerHeight,n)),this.canTransform){var o={scale:t};o=this.canAccelerate?enyo.mixin({translate3d:Math.round(this.bounds.left)+"px, "+Math.round(this.bounds.top)+"px, 0px"},o):enyo.mixin({translate:this.bounds.left+"px, "+this.bounds.top+"px"},o),enyo.dom.transform(this.$.content,o)}else if(enyo.platform.ie){var s='"progid:DXImageTransform.Microsoft.Matrix(M11='+t+", M12=0, M21=0, M22="+t+", SizingMethod='auto expand')\"";this.$.content.applyStyle("-ms-filter",s),this.$.content.setBounds({width:this.bounds.width*t+"px",height:this.bounds.height*t+"px",left:this.bounds.left+"px",top:this.bounds.top+"px"}),this.$.content.applyStyle("width",t*this.bounds.width),this.$.content.applyStyle("height",t*this.bounds.height)}this.setScrollLeft(i),this.setScrollTop(n),this.positionClientControls(t)},limitScale:function(t){return this.disableZoom?t=this.scale:t>this.maxScale?t=this.maxScale:this.minScale>t&&(t=this.minScale),t},innerBounds:function(t){var e=this.originalWidth*t,i=this.originalHeight*t,n={x:0,y:0,transX:0,transY:0};return this.containerWidth>e&&(n.x+=(this.containerWidth-e)/2),this.containerHeight>i&&(n.y+=(this.containerHeight-i)/2),this.canTransform&&(n.transX-=(this.originalWidth-e)/2,n.transY-=(this.originalHeight-i)/2),{left:n.x+n.transX,top:n.y+n.transY,width:e,height:i,x:n.x,y:n.y}},saveState:function(t,e){var i=this.scale;this.scale*=e.scale,this.scale=this.limitScale(this.scale),i!=this.scale&&this.doZoom({scale:this.scale}),this.ratioX=this.ratioY=null},doubleClick:function(t,e){8==enyo.platform.ie&&(this.tapped=!0,e.pageX=e.clientX+e.target.scrollLeft,e.pageY=e.clientY+e.target.scrollTop,this.singleTap(t,e),e.preventDefault())},singleTap:function(t,e){setTimeout(this.bindSafely(function(){this.tapped=!1}),300),this.tapped?(this.tapped=!1,this.smartZoom(t,e)):this.tapped=!0},smartZoom:function(t,e){var i=this.hasNode(),n=this.$.content.hasNode();if(i&&n&&this.hasNode()&&!this.disableZoom){var o=this.scale;if(this.scale=this.scale!=this.minScale?this.minScale:this.maxScale,this.eventPt=this.calcEventLocation(e),this.animate){var s={x:(this.eventPt.x+this.getScrollLeft())/this.bounds.width,y:(this.eventPt.y+this.getScrollTop())/this.bounds.height};this.$.animator.play({duration:350,ratioLock:s,baseScale:o,deltaScale:this.scale-o})}else this.transform(this.scale),this.doZoom({scale:this.scale})}},zoomAnimationStep:function(){var t=this.$.animator.baseScale+this.$.animator.deltaScale*this.$.animator.value;return this.transform(t),!0},zoomAnimationEnd:function(){return this.stabilize(),this.doZoom({scale:this.scale}),this.$.animator.ratioLock=void 0,!0},positionClientControls:function(t){this.waterfallDown("onPositionPin",{scale:t,bounds:this.bounds})}});

// lib/layout/imageview/source/ImageViewPin.js
enyo.kind({name:"enyo.ImageViewPin",kind:"enyo.Control",published:{highlightAnchorPoint:!1,anchor:{top:0,left:0},position:{top:0,left:0}},style:"position:absolute;z-index:1000;width:0px;height:0px;",handlers:{onPositionPin:"reAnchor"},create:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.styleClientControls(),this.positionClientControls(),this.highlightAnchorPointChanged(),this.anchorChanged()}}),styleClientControls:function(){for(var t=this.getClientControls(),e=0;t.length>e;e++)t[e].applyStyle("position","absolute")},positionClientControls:function(){for(var t=this.getClientControls(),e=0;t.length>e;e++)for(var i in this.position)t[e].applyStyle(i,this.position[i]+"px")},highlightAnchorPointChanged:function(){this.addRemoveClass("pinDebug",this.highlightAnchorPoint)},anchorChanged:function(){var t=null,e=null;for(e in this.anchor)t=(""+this.anchor[e]).match(/^(\d+(?:\.\d+)?)(.*)$/),t&&(this.anchor[e+"Coords"]={value:t[1],units:t[2]||"px"})},reAnchor:function(t,e){var i=e.scale,n=e.bounds,o=this.anchor.right?"px"==this.anchor.rightCoords.units?n.width+n.x-this.anchor.rightCoords.value*i:n.width*(100-this.anchor.rightCoords.value)/100+n.x:"px"==this.anchor.leftCoords.units?this.anchor.leftCoords.value*i+n.x:n.width*this.anchor.leftCoords.value/100+n.x,s=this.anchor.bottom?"px"==this.anchor.bottomCoords.units?n.height+n.y-this.anchor.bottomCoords.value*i:n.height*(100-this.anchor.bottomCoords.value)/100+n.y:"px"==this.anchor.topCoords.units?this.anchor.topCoords.value*i+n.y:n.height*this.anchor.topCoords.value/100+n.y;this.applyStyle("left",o+"px"),this.applyStyle("top",s+"px")}});

// lib/layout/imageview/source/ImageView.js
enyo.kind({name:"enyo.ImageView",kind:"enyo.PanZoomView",subKindComponents:[{kind:"Image",ondown:"down",style:"vertical-align: text-top;"}],create:enyo.inherit(function(t){return function(){this.unscaledComponents=this.components,this.components=[],this.kindComponents[1].components[0].components=this.subKindComponents,t.apply(this,arguments),this.$.content.applyStyle("display","inline-block"),this.bufferImage=new Image,this.bufferImage.onload=enyo.bind(this,"imageLoaded"),this.bufferImage.onerror=enyo.bind(this,"imageError"),this.srcChanged(),this.getStrategy().$.scrollMath&&this.getStrategy().$.scrollMath.start()}}),destroy:enyo.inherit(function(t){return function(){this.bufferImage&&(this.bufferImage.onerror=void 0,this.bufferImage.onerror=void 0,delete this.bufferImage),t.apply(this,arguments)}}),down:function(t,e){e.preventDefault()},srcChanged:function(){this.src&&this.src.length>0&&this.bufferImage&&this.src!=this.bufferImage.src&&(this.bufferImage.src=this.src)},imageLoaded:function(){if(this.scale=this.scaleKeyword,this.originalWidth=this.contentWidth=this.bufferImage.width,this.originalHeight=this.contentHeight=this.bufferImage.height,this.scaleChanged(),this.$.image.setSrc(this.bufferImage.src),enyo.platform.safari){var t=this.$.image.hasNode(),e=this.bufferImage.src;t&&setTimeout(function(){t.src=e},100)}enyo.dom.transformValue(this.getStrategy().$.client,"translate3d","0px, 0px, 0"),this.positionClientControls(this.scale),this.align()},imageError:function(t){enyo.error("Error loading image: "+this.src),this.bubble("onerror",t)}});

// lib/layout/imageview/source/ImageCarousel.js
enyo.kind({name:"enyo.ImageCarousel",kind:enyo.Panels,arrangerKind:"enyo.CarouselArranger",defaultScale:"auto",disableZoom:!1,lowMemory:!1,published:{images:[]},handlers:{onTransitionStart:"transitionStart",onTransitionFinish:"transitionFinish"},create:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.imageCount=this.images.length,this.images.length>0&&(this.initContainers(),this.loadNearby())}}),initContainers:function(){for(var t=0;this.images.length>t;t++)this.$["container"+t]||(this.createComponent({name:"container"+t,style:"height:100%; width:100%;"}),this.$["container"+t].render());for(t=this.images.length;this.imageCount>t;t++)this.$["image"+t]&&this.$["image"+t].destroy(),this.$["container"+t].destroy();this.imageCount=this.images.length},loadNearby:function(){var t=this.getBufferRange();for(var e in t)this.loadImageView(t[e])},getBufferRange:function(){var t=[];if(this.layout.containerBounds){var e,i,n,o,s=1,r=this.layout.containerBounds;for(i=this.index-1,n=0,o=r.width*s;i>=0&&o>=n;)e=this.$["container"+i],n+=e.width+e.marginWidth,t.unshift(i),i--;for(i=this.index,n=0,o=r.width*(s+1);this.images.length>i&&o>=n;)e=this.$["container"+i],n+=e.width+e.marginWidth,t.push(i),i++}return t},reflow:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.loadNearby()}}),loadImageView:function(t){return this.wrap&&(t=(t%this.images.length+this.images.length)%this.images.length),t>=0&&this.images.length-1>=t&&(this.$["image"+t]?this.$["image"+t].src!=this.images[t]&&(this.$["image"+t].setSrc(this.images[t]),this.$["image"+t].setScale(this.defaultScale),this.$["image"+t].setDisableZoom(this.disableZoom)):(this.$["container"+t].createComponent({name:"image"+t,kind:"ImageView",scale:this.defaultScale,disableZoom:this.disableZoom,src:this.images[t],verticalDragPropagation:!1,style:"height:100%; width:100%;"},{owner:this}),this.$["image"+t].render())),this.$["image"+t]},setImages:function(t){this.set("images",t)},imagesChanged:function(){this.initContainers(),this.loadNearby()},indexChanged:enyo.inherit(function(t){return function(){this.loadNearby(),this.lowMemory&&this.cleanupMemory(),t.apply(this,arguments)}}),transitionStart:function(t,e){return e.fromIndex==e.toIndex?!0:void 0},transitionFinish:function(){this.loadNearby(),this.lowMemory&&this.cleanupMemory()},getActiveImage:function(){return this.getImageByIndex(this.index)},getImageByIndex:function(t){return this.$["image"+t]||this.loadImageView(t)},cleanupMemory:function(){for(var t=this.getBufferRange(),e=0;this.images.length>e;e++)-1===enyo.indexOf(e,t)&&this.$["image"+e]&&this.$["image"+e].destroy()}});

// lib/onyx/version.js
enyo&&enyo.version&&(enyo.version.onyx="2.4.0");

// lib/onyx/source/Icon.js
enyo.kind({name:"onyx.Icon",published:{src:"",disabled:!1},classes:"onyx-icon",create:function(){this.inherited(arguments),this.src&&this.srcChanged(),this.disabledChanged()},disabledChanged:function(){this.addRemoveClass("disabled",this.disabled)},srcChanged:function(){this.applyStyle("background-image","url("+enyo.path.rewrite(this.src)+")")}});

// lib/onyx/source/Button.js
enyo.kind({name:"onyx.Button",kind:"enyo.Button",classes:"onyx-button enyo-unselectable",handlers:{ondown:"down",onenter:"enter",ondragfinish:"dragfinish",onleave:"leave",onup:"up"},down:function(){return this.disabled?!0:(this.addClass("pressed"),this._isPressed=!0,void 0)},enter:function(){return this.disabled?!0:(this._isPressed&&this.addClass("pressed"),void 0)},dragfinish:function(){return this.disabled?!0:(this.removeClass("pressed"),this._isPressed=!1,void 0)},leave:function(){return this.disabled?!0:(this.removeClass("pressed"),void 0)},up:function(){return this.disabled?!0:(this.removeClass("pressed"),this._isPressed=!1,void 0)}});

// lib/onyx/source/IconButton.js
enyo.kind({name:"onyx.IconButton",kind:"onyx.Icon",published:{active:!1},classes:"onyx-icon-button",handlers:{ondown:"down",onenter:"enter",ondragfinish:"dragfinish",onleave:"leave",onup:"up"},rendered:function(){this.inherited(arguments),this.activeChanged()},tap:function(){return this.disabled?!0:(this.setActive(!0),void 0)},down:function(){return this.disabled?!0:(this.addClass("pressed"),this._isPressed=!0,void 0)},enter:function(){return this.disabled?!0:(this._isPressed&&this.addClass("pressed"),void 0)},dragfinish:function(){return this.disabled?!0:(this.removeClass("pressed"),this._isPressed=!1,void 0)},leave:function(){return this.disabled?!0:(this.removeClass("pressed"),void 0)},up:function(){return this.disabled?!0:(this.removeClass("pressed"),this._isPressed=!1,void 0)},activeChanged:function(){this.bubble("onActivate")}});

// lib/onyx/source/Checkbox.js
enyo.kind({name:"onyx.Checkbox",classes:"onyx-checkbox",kind:enyo.Checkbox,tag:"div",handlers:{onclick:""},tap:function(){return this.disabled||(this.setChecked(!this.getChecked()),this.bubble("onchange")),!this.disabled},dragstart:function(){}});

// lib/onyx/source/Drawer.js
enyo.kind({name:"onyx.Drawer",kind:"enyo.Drawer"});

// lib/onyx/source/Grabber.js
enyo.kind({name:"onyx.Grabber",classes:"onyx-grabber"});

// lib/onyx/source/Groupbox.js
enyo.kind({name:"onyx.Groupbox",classes:"onyx-groupbox"}),enyo.kind({name:"onyx.GroupboxHeader",classes:"onyx-groupbox-header"});

// lib/onyx/source/Input.js
enyo.kind({name:"onyx.Input",kind:"enyo.Input",classes:"onyx-input"});

// lib/onyx/source/Popup.js
enyo.kind({name:"onyx.Popup",kind:"enyo.Popup",classes:"onyx-popup",published:{scrimWhenModal:!0,scrim:!1,scrimClassName:"",defaultZ:120},protectedStatics:{count:0,highestZ:120},showingChanged:function(){this.showing?(onyx.Popup.count++,this.applyZIndex()):onyx.Popup.count>0&&onyx.Popup.count--,this.showHideScrim(this.showing),this.inherited(arguments)},showHideScrim:function(t){if(this.floating&&(this.scrim||this.modal&&this.scrimWhenModal)){var e=this.getScrim();if(t){var i=this.getScrimZIndex();this._scrimZ=i,e.showAtZIndex(i)}else e.hideAtZIndex(this._scrimZ);enyo.call(e,"addRemoveClass",[this.scrimClassName,e.showing])}},getScrimZIndex:function(){return onyx.Popup.highestZ>=this._zIndex?this._zIndex-1:onyx.Popup.highestZ},getScrim:function(){return this.modal&&this.scrimWhenModal&&!this.scrim?onyx.scrimTransparent.make():onyx.scrim.make()},applyZIndex:function(){this._zIndex=2*onyx.Popup.count+this.findZIndex()+1,this._zIndex<=onyx.Popup.highestZ&&(this._zIndex=onyx.Popup.highestZ+1),this._zIndex>onyx.Popup.highestZ&&(onyx.Popup.highestZ=this._zIndex),this.applyStyle("z-index",this._zIndex)},findZIndex:function(){var t=this.defaultZ;return this._zIndex?t=this._zIndex:this.hasNode()&&(t=Number(enyo.dom.getComputedStyleValue(this.node,"z-index"))||t),this.defaultZ>t&&(t=this.defaultZ),this._zIndex=t,this._zIndex}});

// lib/onyx/source/TextArea.js
enyo.kind({name:"onyx.TextArea",kind:"enyo.TextArea",classes:"onyx-textarea"});

// lib/onyx/source/RichText.js
enyo.kind({name:"onyx.RichText",kind:"enyo.RichText",classes:"onyx-richtext"});

// lib/onyx/source/InputDecorator.js
enyo.kind({name:"onyx.InputDecorator",kind:"enyo.ToolDecorator",tag:"label",classes:"onyx-input-decorator",published:{alwaysLooksFocused:!1},handlers:{onDisabledChange:"disabledChange",onfocus:"receiveFocus",onblur:"receiveBlur"},create:function(){this.inherited(arguments),this.updateFocus(!1)},alwaysLooksFocusedChanged:function(){this.updateFocus(this.focus)},updateFocus:function(t){this.focused=t,this.addRemoveClass("onyx-focused",this.alwaysLooksFocused||this.focused)},receiveFocus:function(){this.updateFocus(!0)},receiveBlur:function(){this.updateFocus(!1)},disabledChange:function(t,e){this.addRemoveClass("onyx-disabled",e.originator.disabled)}});

// lib/onyx/source/Tooltip.js
enyo.kind({name:"onyx.Tooltip",kind:"onyx.Popup",classes:"onyx-tooltip below left-arrow",autoDismiss:!1,showDelay:500,defaultLeft:-6,handlers:{onRequestShowTooltip:"requestShow",onRequestHideTooltip:"requestHide"},requestShow:function(){return this.showJob=setTimeout(this.bindSafely("show"),this.showDelay),!0},cancelShow:function(){clearTimeout(this.showJob)},requestHide:function(){return this.cancelShow(),this.inherited(arguments)},showingChanged:function(){this.cancelShow(),this.adjustPosition(!0),this.inherited(arguments)},applyPosition:function(t){var e="";for(var i in t)e+=i+":"+t[i]+(isNaN(t[i])?"; ":"px; ");this.addStyles(e)},adjustPosition:function(){if(this.showing&&this.hasNode()){var t=this.node.getBoundingClientRect();t.top+t.height>window.innerHeight?(this.addRemoveClass("below",!1),this.addRemoveClass("above",!0)):(this.addRemoveClass("above",!1),this.addRemoveClass("below",!0)),t.left+t.width>window.innerWidth&&(this.applyPosition({"margin-left":-t.width,bottom:"auto"}),this.addRemoveClass("left-arrow",!1),this.addRemoveClass("right-arrow",!0))}},resizeHandler:function(){this.applyPosition({"margin-left":this.defaultLeft,bottom:"auto"}),this.addRemoveClass("left-arrow",!0),this.addRemoveClass("right-arrow",!1),this.adjustPosition(!0),this.inherited(arguments)}});

// lib/onyx/source/TooltipDecorator.js
enyo.kind({name:"onyx.TooltipDecorator",defaultKind:"onyx.Button",classes:"onyx-popup-decorator",handlers:{onenter:"enter",onleave:"leave"},enter:function(){this.requestShowTooltip()},leave:function(){this.requestHideTooltip()},tap:function(){this.requestHideTooltip()},requestShowTooltip:function(){this.waterfallDown("onRequestShowTooltip")},requestHideTooltip:function(){this.waterfallDown("onRequestHideTooltip")}});

// lib/onyx/source/MenuDecorator.js
enyo.kind({name:"onyx.MenuDecorator",kind:"onyx.TooltipDecorator",defaultKind:"onyx.Button",classes:"onyx-popup-decorator enyo-unselectable",handlers:{onActivate:"activated",onHide:"menuHidden"},activated:function(t,e){this.requestHideTooltip(),e.originator.active&&(this.menuActive=!0,this.activator=e.originator,this.activator.addClass("active"),this.requestShowMenu())},requestShowMenu:function(){this.waterfallDown("onRequestShowMenu",{activator:this.activator})},requestHideMenu:function(){this.waterfallDown("onRequestHideMenu")},menuHidden:function(){this.menuActive=!1,this.activator&&(this.activator.setActive(!1),this.activator.removeClass("active"))},enter:function(){this.menuActive||this.inherited(arguments)},leave:function(){this.menuActive||this.inherited(arguments)}});

// lib/onyx/source/Menu.js
enyo.kind({name:"onyx.Menu",kind:"onyx.Popup",modal:!0,defaultKind:"onyx.MenuItem",classes:"onyx-menu",published:{maxHeight:200,scrolling:!0,scrollStrategyKind:"TouchScrollStrategy"},handlers:{onActivate:"itemActivated",onRequestShowMenu:"requestMenuShow",onRequestHideMenu:"requestHide"},childComponents:[{name:"client",kind:"enyo.Scroller"}],showOnTop:!1,scrollerName:"client",create:function(){this.inherited(arguments),this.maxHeightChanged()},initComponents:function(){this.scrolling&&this.createComponents(this.childComponents,{isChrome:!0,strategyKind:this.scrollStrategyKind}),this.inherited(arguments)},getScroller:function(){return this.$[this.scrollerName]},maxHeightChanged:function(){this.scrolling&&this.getScroller().setMaxHeight(this.maxHeight+"px")},itemActivated:function(t,e){return e.originator.setActive(!1),!0},showingChanged:function(){this.inherited(arguments),this.scrolling&&this.getScroller().setShowing(this.showing),this.adjustPosition(!0)},requestMenuShow:function(t,e){if(this.floating){var i=e.activator.hasNode();if(i){var n=this.activatorOffset=this.getPageOffset(i);this.applyPosition({top:n.top+(this.showOnTop?0:n.height),left:n.left,width:n.width})}}return this.show(),!0},applyPosition:function(t){var e="";for(var i in t)e+=i+":"+t[i]+(isNaN(t[i])?"; ":"px; ");this.addStyles(e)},getPageOffset:function(t){var e=t.getBoundingClientRect(),i=void 0===window.pageYOffset?document.documentElement.scrollTop:window.pageYOffset,n=void 0===window.pageXOffset?document.documentElement.scrollLeft:window.pageXOffset,o=void 0===e.height?e.bottom-e.top:e.height,s=void 0===e.width?e.right-e.left:e.width;return{top:e.top+i,left:e.left+n,height:o,width:s}},adjustPosition:function(){if(this.showing&&this.hasNode()){this.scrolling&&!this.showOnTop&&this.getScroller().setMaxHeight(this.maxHeight+"px"),this.removeClass("onyx-menu-up"),this.floating||this.applyPosition({left:"auto"});var t=this.node.getBoundingClientRect(),e=void 0===t.height?t.bottom-t.top:t.height,i=void 0===window.innerHeight?document.documentElement.clientHeight:window.innerHeight,n=void 0===window.innerWidth?document.documentElement.clientWidth:window.innerWidth;if(this.menuUp=t.top+e>i&&i-t.bottom<t.top-e,this.addRemoveClass("onyx-menu-up",this.menuUp),this.floating){var o=this.activatorOffset;this.menuUp?this.applyPosition({top:o.top-e+(this.showOnTop?o.height:0),bottom:"auto"}):t.top<o.top&&i>o.top+(this.showOnTop?0:o.height)+e&&this.applyPosition({top:o.top+(this.showOnTop?0:o.height),bottom:"auto"})}if(t.right>n&&(this.floating?this.applyPosition({left:n-t.width}):this.applyPosition({left:-(t.right-n)})),0>t.left&&(this.floating?this.applyPosition({left:0,right:"auto"}):"auto"==this.getComputedStyleValue("right")?this.applyPosition({left:-t.left}):this.applyPosition({right:t.left})),this.scrolling&&!this.showOnTop){t=this.node.getBoundingClientRect();var s;s=this.menuUp?this.maxHeight<t.bottom?this.maxHeight:t.bottom:i>t.top+this.maxHeight?this.maxHeight:i-t.top,this.getScroller().setMaxHeight(s+"px")}}},resizeHandler:function(){this.inherited(arguments),this.adjustPosition()},requestHide:function(){this.setShowing(!1)}});

// lib/onyx/source/MenuItem.js
enyo.kind({name:"onyx.MenuItem",kind:"enyo.Button",events:{onSelect:"",onItemContentChange:""},classes:"onyx-menu-item",tag:"div",create:function(){this.silence(),this.inherited(arguments),this.unsilence(),this.active&&this.bubble("onActivate")},tap:function(){this.inherited(arguments),this.bubble("onRequestHideMenu"),this.doSelect({selected:this,content:this.content})},contentChanged:function(){this.inherited(arguments),this.doItemContentChange({content:this.content})}});

// lib/onyx/source/Submenu.js
enyo.kind({name:"onyx.Submenu",defaultKind:"onyx.MenuItem",initComponents:function(){this.createChrome([{name:"label",kind:"enyo.Control",classes:"onyx-menu-item",content:this.content||this.name,isChrome:!0,ontap:"toggleOpen"},{kind:"onyx.Drawer",name:"client",classes:"client onyx-submenu",isChrome:!0,open:!1}]),this.inherited(arguments)},toggleOpen:function(){this.setOpen(!this.getOpen())},setOpen:function(t){this.$.client.setOpen(t)},getOpen:function(){return this.$.client.getOpen()}});

// lib/onyx/source/PickerDecorator.js
enyo.kind({name:"onyx.PickerDecorator",kind:"onyx.MenuDecorator",classes:"onyx-picker-decorator",defaultKind:"onyx.PickerButton",handlers:{onChange:"change"},change:function(t,e){this.waterfallDown("onChange",e)}});

// lib/onyx/source/PickerButton.js
enyo.kind({name:"onyx.PickerButton",kind:"onyx.Button",handlers:{onChange:"change"},change:function(t,e){void 0!==e.content&&this.setContent(e.content)}});

// lib/onyx/source/Picker.js
enyo.kind({name:"onyx.Picker",kind:"onyx.Menu",classes:"onyx-picker enyo-unselectable",published:{selected:null},events:{onChange:""},handlers:{onItemContentChange:"itemContentChange"},floating:!0,showOnTop:!0,initComponents:function(){this.setScrolling(!0),this.inherited(arguments)},showingChanged:function(){this.getScroller().setShowing(this.showing),this.inherited(arguments),this.showing&&this.selected&&this.scrollToSelected()},scrollToSelected:function(){this.getScroller().scrollToControl(this.selected,!this.menuUp)},itemActivated:function(t,e){return this.processActivatedItem(e.originator),this.inherited(arguments)},processActivatedItem:function(t){t.active&&this.setSelected(t)},selectedChanged:function(t){t&&t.removeClass("selected"),this.selected&&(this.selected.addClass("selected"),this.doChange({selected:this.selected,content:this.selected.content}))},itemContentChange:function(t,e){e.originator==this.selected&&this.doChange({selected:this.selected,content:this.selected.content})},resizeHandler:function(){this.inherited(arguments),this.adjustPosition()}});

// lib/onyx/source/FlyweightPicker.js
enyo.kind({name:"onyx.FlyweightPicker",kind:"onyx.Picker",classes:"onyx-flyweight-picker",published:{count:0},events:{onSetupItem:"",onSelect:""},handlers:{onSelect:"itemSelect"},components:[{name:"scroller",kind:"enyo.Scroller",strategyKind:"TouchScrollStrategy",components:[{name:"flyweight",kind:"FlyweightRepeater",noSelect:!0,ontap:"itemTap"}]}],scrollerName:"scroller",initComponents:function(){this.controlParentName="flyweight",this.inherited(arguments),this.$.flyweight.$.client.children[0].setActive(!0)},create:function(){this.inherited(arguments),this.countChanged()},rendered:function(){this.inherited(arguments),this.selectedChanged()},scrollToSelected:function(){var t=this.$.flyweight.fetchRowNode(this.selected);this.getScroller().scrollToNode(t,!this.menuUp)},countChanged:function(){this.$.flyweight.count=this.count},processActivatedItem:function(t){this.item=t},selectedChanged:function(t){if(this.item){null!=t&&(this.item.removeClass("selected"),this.$.flyweight.renderRow(t));var e;null!=this.selected&&(this.item.addClass("selected"),this.$.flyweight.renderRow(this.selected),this.item.removeClass("selected"),e=this.$.flyweight.fetchRowNode(this.selected)),this.doChange({selected:this.selected,content:e&&e.textContent||this.item.content})}},itemTap:function(t,e){this.setSelected(e.rowIndex),this.doSelect({selected:this.item,content:this.item.content})},itemSelect:function(t,e){return e.originator!=this?!0:void 0}});

// lib/onyx/source/DatePicker.js
enyo.kind({name:"onyx.DatePicker",classes:"onyx-toolbar-inline",published:{disabled:!1,locale:"en-US",dayHidden:!1,monthHidden:!1,yearHidden:!1,minYear:1900,maxYear:2099,value:null},events:{onSelect:""},create:function(){this.inherited(arguments),ilib&&(this.locale=ilib.getLocale()),this.initDefaults()},initDefaults:function(){var t;ilib?(t=[],this._tf=new ilib.DateFmt({locale:this.locale,timezone:"local"}),t=this._tf.getMonthsOfYear({length:"long"})):(t=[void 0,"JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],this.localeInfo.getMonthsOfYear=function(){return t}),this.setupPickers(this._tf?this._tf.getTemplate():"mdy"),this.dayHiddenChanged(),this.monthHiddenChanged(),this.yearHiddenChanged();for(var e,i=this.value=this.value||new Date,n=0;e=t[n+1];n++)this.$.monthPicker.createComponent({content:e,value:n,active:n==i.getMonth()});var o=i.getFullYear();for(this.$.yearPicker.setSelected(o-this.minYear),n=1;this.monthLength(i.getYear(),i.getMonth())>=n;n++)this.$.dayPicker.createComponent({content:n,value:n,active:n==i.getDate()})},monthLength:function(t,e){return 32-new Date(t,e,32).getDate()},setupYear:function(t,e){return this.$.year.setContent(this.minYear+e.index),!0},setupPickers:function(t){var e,i,n,o=t.split(""),s=!1,r=!1,a=!1;for(i=0,n=o.length;n>i;i++)switch(e=o[i],e.toLowerCase()){case"d":a||(this.createDay(),a=!0);break;case"m":r||(this.createMonth(),r=!0);break;case"y":s||(this.createYear(),s=!0);break;default:}},createYear:function(){var t=this.maxYear-this.minYear;this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateYear",components:[{classes:"onyx-datepicker-year",name:"yearPickerButton",disabled:this.disabled},{name:"yearPicker",kind:"onyx.FlyweightPicker",count:++t,onSetupItem:"setupYear",components:[{name:"year"}]}]})},createMonth:function(){this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateMonth",components:[{classes:"onyx-datepicker-month",name:"monthPickerButton",disabled:this.disabled},{name:"monthPicker",kind:"onyx.Picker"}]})},createDay:function(){this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateDay",components:[{classes:"onyx-datepicker-day",name:"dayPickerButton",disabled:this.disabled},{name:"dayPicker",kind:"onyx.Picker"}]})},localeChanged:function(){this.refresh()},dayHiddenChanged:function(){this.$.dayPicker.getParent().setShowing(this.dayHidden?!1:!0)},monthHiddenChanged:function(){this.$.monthPicker.getParent().setShowing(this.monthHidden?!1:!0)},yearHiddenChanged:function(){this.$.yearPicker.getParent().setShowing(this.yearHidden?!1:!0)},minYearChanged:function(){this.refresh()},maxYearChanged:function(){this.refresh()},valueChanged:function(){this.refresh()},disabledChanged:function(){this.$.yearPickerButton.setDisabled(this.disabled),this.$.monthPickerButton.setDisabled(this.disabled),this.$.dayPickerButton.setDisabled(this.disabled)},updateDay:function(t,e){var i=this.calcDate(this.value.getFullYear(),this.value.getMonth(),e.selected.value);return this.doSelect({name:this.name,value:i}),this.setValue(i),!0},updateMonth:function(t,e){var i=this.calcDate(this.value.getFullYear(),e.selected.value,this.value.getDate());return this.doSelect({name:this.name,value:i}),this.setValue(i),!0},updateYear:function(t,e){if(-1!=e.originator.selected){var i=this.calcDate(this.minYear+e.originator.selected,this.value.getMonth(),this.value.getDate());this.doSelect({name:this.name,value:i}),this.setValue(i)}return!0},calcDate:function(t,e,i){return new Date(t,e,i,this.value.getHours(),this.value.getMinutes(),this.value.getSeconds(),this.value.getMilliseconds())},refresh:function(){this.destroyClientControls(),this.initDefaults(),this.render()}});

// lib/onyx/source/TimePicker.js
enyo.kind({name:"onyx.TimePicker",classes:"onyx-toolbar-inline",published:{disabled:!1,locale:"en-US",is24HrMode:null,value:null},events:{onSelect:""},create:function(){this.inherited(arguments),ilib&&(this.locale=ilib.getLocale()),this.initDefaults()},initDefaults:function(){if(this._strAm="AM",this._strPm="PM",ilib){this._tf=new ilib.DateFmt({locale:this.locale});var t=new ilib.DateFmt({locale:this.locale,type:"time",template:"a"}),e=ilib.Date.newInstance({locale:this.locale,hour:1});this._strAm=t.format(e),e.hour=13,this._strPm=t.format(e),null==this.is24HrMode&&(this.is24HrMode="24"==this._tf.getClock())}else null==this.is24HrMode&&(this.is24HrMode=!1);this.setupPickers(this._tf?this._tf.getTimeComponents():"hma");var i,n=this.value=this.value||new Date;if(this.is24HrMode)for(i=0;24>i;i++)this.$.hourPicker.createComponent({content:i,value:i,active:i==n.getHours()});else{var o=n.getHours();for(o=0===o?12:o,i=1;12>=i;i++)this.$.hourPicker.createComponent({content:i,value:i,active:i==(o>12?o%12:o)})}for(i=0;59>=i;i++)this.$.minutePicker.createComponent({content:10>i?"0"+i:i,value:i,active:i==n.getMinutes()});n.getHours()>=12?this.$.ampmPicker.createComponents([{content:this._strAm},{content:this._strPm,active:!0}]):this.$.ampmPicker.createComponents([{content:this._strAm,active:!0},{content:this._strPm}]),this.$.ampmPicker.getParent().setShowing(!this.is24HrMode)},setupPickers:function(t){-1!==t.indexOf("h")&&this.createHour(),-1!==t.indexOf("m")&&this.createMinute(),-1!==t.indexOf("a")&&this.createAmPm()},createHour:function(){this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateHour",components:[{classes:"onyx-timepicker-hour",name:"hourPickerButton",disabled:this.disabled},{name:"hourPicker",kind:"onyx.Picker"}]})},createMinute:function(){this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateMinute",components:[{classes:"onyx-timepicker-minute",name:"minutePickerButton",disabled:this.disabled},{name:"minutePicker",kind:"onyx.Picker"}]})},createAmPm:function(){this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateAmPm",components:[{classes:"onyx-timepicker-ampm",name:"ampmPickerButton",disabled:this.disabled},{name:"ampmPicker",kind:"onyx.Picker"}]})},disabledChanged:function(){this.$.hourPickerButton.setDisabled(this.disabled),this.$.minutePickerButton.setDisabled(this.disabled),this.$.ampmPickerButton.setDisabled(this.disabled)},localeChanged:function(){this.is24HrMode=null,this.refresh()},is24HrModeChanged:function(){this.refresh()},valueChanged:function(){this.refresh()},updateHour:function(t,e){var i=e.selected.value;if(!this.is24HrMode){var n=this.$.ampmPicker.getParent().controlAtIndex(0).content;i=i+(12==i?-12:0)+(this.isAm(n)?0:12)}return this.setValue(this.calcTime(i,this.value.getMinutes())),this.doSelect({name:this.name,value:this.value}),!0},updateMinute:function(t,e){return this.setValue(this.calcTime(this.value.getHours(),e.selected.value)),this.doSelect({name:this.name,value:this.value}),!0},updateAmPm:function(t,e){var i=this.value.getHours();return this.is24HrMode||(i+=i>11?this.isAm(e.content)?-12:0:this.isAm(e.content)?0:12),this.setValue(this.calcTime(i,this.value.getMinutes())),this.doSelect({name:this.name,value:this.value}),!0},calcTime:function(t,e){return new Date(this.value.getFullYear(),this.value.getMonth(),this.value.getDate(),t,e,this.value.getSeconds(),this.value.getMilliseconds())},isAm:function(t){return t==this._strAm?!0:!1},refresh:function(){this.destroyClientControls(),this.initDefaults(),this.render()}});

// lib/onyx/source/RadioButton.js
enyo.kind({name:"onyx.RadioButton",kind:"enyo.Button",classes:"onyx-radiobutton"});

// lib/onyx/source/RadioGroup.js
enyo.kind({name:"onyx.RadioGroup",kind:"enyo.Group",defaultKind:"onyx.RadioButton",highlander:!0});

// lib/onyx/source/ToggleButton.js
enyo.kind({name:"onyx.ToggleButton",classes:"onyx-toggle-button",published:{active:!1,value:!1,onContent:"On",offContent:"Off",disabled:!1},events:{onChange:""},handlers:{ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish"},components:[{name:"contentOn",classes:"onyx-toggle-content on"},{name:"contentOff",classes:"onyx-toggle-content off"},{classes:"onyx-toggle-button-knob"}],create:function(){this.inherited(arguments),this.value=Boolean(this.value||this.active),this.onContentChanged(),this.offContentChanged(),this.disabledChanged()},rendered:function(){this.inherited(arguments),this.updateVisualState()},updateVisualState:function(){this.addRemoveClass("off",!this.value),this.$.contentOn.setShowing(this.value),this.$.contentOff.setShowing(!this.value),this.setActive(this.value)},valueChanged:function(){this.updateVisualState(),this.doChange({value:this.value})},activeChanged:function(){this.setValue(this.active),this.bubble("onActivate")},onContentChanged:function(){this.$.contentOn.setContent(this.onContent||""),this.$.contentOn.addRemoveClass("empty",!this.onContent)},offContentChanged:function(){this.$.contentOff.setContent(this.offContent||""),this.$.contentOff.addRemoveClass("empty",!this.onContent)},disabledChanged:function(){this.addRemoveClass("disabled",this.disabled)},updateValue:function(t){this.disabled||this.setValue(t)},tap:function(){this.updateValue(!this.value)},dragstart:function(t,e){return e.horizontal?(e.preventDefault(),this.dragging=!0,this.dragged=!1,!0):void 0},drag:function(t,e){if(this.dragging){var i=e.dx;return Math.abs(i)>10&&(this.updateValue(i>0),this.dragged=!0),!0}},dragfinish:function(t,e){this.dragging=!1,this.dragged&&e.preventTap()}});

// lib/onyx/source/ToggleIconButton.js
enyo.kind({name:"onyx.ToggleIconButton",kind:"onyx.Icon",published:{active:!1,value:!1},events:{onChange:""},classes:"onyx-icon-button onyx-icon-toggle",activeChanged:function(){this.addRemoveClass("active",this.value),this.bubble("onActivate")},updateValue:function(t){this.disabled||(this.setValue(t),this.doChange({value:this.value}))},tap:function(){this.updateValue(!this.value)},valueChanged:function(){this.setActive(this.value)},create:function(){this.inherited(arguments),this.value=Boolean(this.value||this.active)},rendered:function(){this.inherited(arguments),this.valueChanged(),this.removeClass("onyx-icon")}});

// lib/onyx/source/Toolbar.js
enyo.kind({name:"onyx.Toolbar",classes:"onyx onyx-toolbar onyx-toolbar-inline",create:function(){this.inherited(arguments),this.hasClass("onyx-menu-toolbar")&&enyo.platform.android>=4&&this.applyStyle("position","static")}});

// lib/onyx/source/ProgressBar.js
enyo.kind({name:"onyx.ProgressBar",classes:"onyx-progress-bar",published:{progress:0,min:0,max:100,barClasses:"",showStripes:!0,animateStripes:!0,increment:0},events:{onAnimateProgressFinish:""},components:[{name:"progressAnimator",kind:"enyo.Animator",onStep:"progressAnimatorStep",onEnd:"progressAnimatorComplete"},{name:"bar",classes:"onyx-progress-bar-bar"}],create:function(){this.inherited(arguments),this.progressChanged(),this.barClassesChanged(),this.showStripesChanged(),this.animateStripesChanged()},barClassesChanged:function(t){this.$.bar.removeClass(t),this.$.bar.addClass(this.barClasses)},showStripesChanged:function(){this.$.bar.addRemoveClass("striped",this.showStripes)},animateStripesChanged:function(){this.$.bar.addRemoveClass("animated",this.animateStripes)},progressChanged:function(){this.progress=this.clampValue(this.min,this.max,this.progress);var t=this.calcPercent(this.progress);this.updateBarPosition(t)},calcIncrement:function(t){return Math.round(t/this.increment)*this.increment},clampValue:function(t,e,i){return Math.max(t,Math.min(i,e))},calcRatio:function(t){return(t-this.min)/(this.max-this.min)},calcPercent:function(t){return 100*this.calcRatio(t)},updateBarPosition:function(t){this.$.bar.applyStyle("width",t+"%")},animateProgressTo:function(t){this.$.progressAnimator.play({startValue:this.progress,endValue:t,node:this.hasNode()})},progressAnimatorStep:function(t){return this.setProgress(t.value),!0},progressAnimatorComplete:function(t){return this.doAnimateProgressFinish(t),!0}});

// lib/onyx/source/ProgressButton.js
enyo.kind({name:"onyx.ProgressButton",kind:"onyx.ProgressBar",classes:"onyx-progress-button",events:{onCancel:""},components:[{name:"progressAnimator",kind:"enyo.Animator",onStep:"progressAnimatorStep",onEnd:"progressAnimatorComplete"},{name:"bar",classes:"onyx-progress-bar-bar onyx-progress-button-bar"},{name:"client",classes:"onyx-progress-button-client"},{kind:"onyx.Icon",src:"$lib/onyx/images/progress-button-cancel.png",classes:"onyx-progress-button-icon",ontap:"cancelTap"}],cancelTap:function(){this.doCancel()}});

// lib/onyx/source/Scrim.js
enyo.kind({name:"onyx.Scrim",showing:!1,classes:"onyx-scrim enyo-fit",floating:!1,create:function(){this.inherited(arguments),this.zStack=[],this.floating&&this.setParent(enyo.floatingLayer)},showingChanged:function(){this.floating&&this.showing&&!this.hasNode()&&this.render(),this.inherited(arguments)},addZIndex:function(t){0>enyo.indexOf(t,this.zStack)&&this.zStack.push(t)},removeZIndex:function(t){enyo.remove(t,this.zStack)},showAtZIndex:function(t){this.addZIndex(t),void 0!==t&&this.setZIndex(t),this.show()},hideAtZIndex:function(t){if(this.removeZIndex(t),this.zStack.length){var e=this.zStack[this.zStack.length-1];this.setZIndex(e)}else this.hide()},setZIndex:function(t){this.zIndex=t,this.applyStyle("z-index",t)},make:function(){return this}}),enyo.kind({name:"onyx.scrimSingleton",kind:null,constructor:function(t,e){this.instanceName=t,enyo.setPath(this.instanceName,this),this.props=e||{}},make:function(){var t=new onyx.Scrim(this.props);return enyo.setPath(this.instanceName,t),t},showAtZIndex:function(t){var e=this.make();e.showAtZIndex(t)},hideAtZIndex:enyo.nop,show:function(){var t=this.make();t.show()}}),new onyx.scrimSingleton("onyx.scrim",{floating:!0,classes:"onyx-scrim-translucent"}),new onyx.scrimSingleton("onyx.scrimTransparent",{floating:!0,classes:"onyx-scrim-transparent"});

// lib/onyx/source/Slider.js
enyo.kind({name:"onyx.Slider",kind:"onyx.ProgressBar",classes:"onyx-slider",published:{value:0,lockBar:!0,tappable:!0},events:{onChange:"",onChanging:"",onAnimateFinish:""},showStripes:!1,handlers:{ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish"},moreComponents:[{kind:"Animator",onStep:"animatorStep",onEnd:"animatorComplete"},{classes:"onyx-slider-taparea"},{name:"knob",classes:"onyx-slider-knob"}],create:function(){this.inherited(arguments),this.moreComponents[2].ondown="knobDown",this.moreComponents[2].onup="knobUp",this.createComponents(this.moreComponents),this.valueChanged()},valueChanged:function(){this.value=this.clampValue(this.min,this.max,this.value);var t=this.calcPercent(this.value);this.updateKnobPosition(t),this.lockBar&&this.setProgress(this.value)},updateKnobPosition:function(t){this.$.knob.applyStyle("left",t+"%")},calcKnobPosition:function(t){var e=t.clientX-this.hasNode().getBoundingClientRect().left;return e/this.getBounds().width*(this.max-this.min)+this.min},dragstart:function(t,e){return e.horizontal?(e.preventDefault(),this.dragging=!0,t.addClass("pressed"),!0):void 0},drag:function(t,e){if(this.dragging){var i=this.calcKnobPosition(e);return i=this.increment?this.calcIncrement(i):i,this.setValue(i),this.doChanging({value:this.value}),!0}},dragfinish:function(t,e){return this.dragging=!1,e.preventTap(),this.doChange({value:this.value}),t.removeClass("pressed"),!0},tap:function(t,e){if(this.tappable){var i=this.calcKnobPosition(e);return i=this.increment?this.calcIncrement(i):i,this.tapped=!0,this.animateTo(i),!0}},knobDown:function(){this.$.knob.addClass("pressed")},knobUp:function(){this.$.knob.removeClass("pressed")},animateTo:function(t){this.$.animator.play({startValue:this.value,endValue:t,node:this.hasNode()})},animatorStep:function(t){return this.setValue(t.value),!0},animatorComplete:function(t){return this.tapped&&(this.tapped=!1,this.doChange({value:this.value})),this.doAnimateFinish(t),!0}});

// lib/onyx/source/RangeSlider.js
enyo.kind({name:"onyx.RangeSlider",kind:"onyx.ProgressBar",classes:"onyx-slider",published:{rangeMin:0,rangeMax:100,rangeStart:0,rangeEnd:100,beginValue:0,endValue:0},events:{onChange:"",onChanging:""},showStripes:!1,showLabels:!1,handlers:{ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish",ondown:"down"},moreComponents:[{name:"startKnob",classes:"onyx-slider-knob"},{name:"endKnob",classes:"onyx-slider-knob onyx-range-slider-knob"}],create:function(){this.inherited(arguments),this.createComponents(this.moreComponents),this.initControls()},rendered:function(){this.inherited(arguments);var t=this.calcPercent(this.beginValue);this.updateBarPosition(t)},initControls:function(){this.$.bar.applyStyle("position","relative"),this.refreshRangeSlider(),this.showLabels&&(this.$.startKnob.createComponent({name:"startLabel",kind:"onyx.RangeSliderKnobLabel"}),this.$.endKnob.createComponent({name:"endLabel",kind:"onyx.RangeSliderKnobLabel"})),this.$.startKnob.ondown="knobDown",this.$.startKnob.onup="knobUp",this.$.endKnob.ondown="knobDown",this.$.endKnob.onup="knobUp"},refreshRangeSlider:function(){this.beginValue=this.calcKnobPercent(this.rangeStart),this.endValue=this.calcKnobPercent(this.rangeEnd),this.beginValueChanged(),this.endValueChanged()},calcKnobRatio:function(t){return(t-this.rangeMin)/(this.rangeMax-this.rangeMin)},calcKnobPercent:function(t){return 100*this.calcKnobRatio(t)},beginValueChanged:function(t){if(void 0===t){var e=this.calcPercent(this.beginValue);this.updateKnobPosition(e,this.$.startKnob)}},endValueChanged:function(t){if(void 0===t){var e=this.calcPercent(this.endValue);this.updateKnobPosition(e,this.$.endKnob)}},calcKnobPosition:function(t){var e=t.clientX-this.hasNode().getBoundingClientRect().left;return e/this.getBounds().width*(this.max-this.min)+this.min},updateKnobPosition:function(t,e){e.applyStyle("left",t+"%"),this.updateBarPosition()},updateBarPosition:function(){if(void 0!==this.$.startKnob&&void 0!==this.$.endKnob){var t=this.calcKnobPercent(this.rangeStart),e=this.calcKnobPercent(this.rangeEnd)-t;this.$.bar.applyStyle("left",t+"%"),this.$.bar.applyStyle("width",e+"%")}},calcRangeRatio:function(t){return t/100*(this.rangeMax-this.rangeMin)+this.rangeMin-this.increment/2},swapZIndex:function(t){"startKnob"===t?(this.$.startKnob.applyStyle("z-index",1),this.$.endKnob.applyStyle("z-index",0)):"endKnob"===t&&(this.$.startKnob.applyStyle("z-index",0),this.$.endKnob.applyStyle("z-index",1))},down:function(t){this.swapZIndex(t.name)},dragstart:function(t,e){return e.horizontal?(e.preventDefault(),this.dragging=!0,t.addClass("pressed"),!0):void 0},drag:function(t,e){if(this.dragging){var i,n,o,s=this.calcKnobPosition(e);if("startKnob"===t.name&&s>=0){if(!(this.endValue>=s&&-1===e.xDirection||this.endValue>=s))return this.drag(this.$.endKnob,e);this.setBeginValue(s),i=this.calcRangeRatio(this.beginValue),n=this.increment?this.calcIncrement(i+.5*this.increment):i,o=this.calcKnobPercent(n),this.updateKnobPosition(o,this.$.startKnob),this.setRangeStart(n),this.doChanging({value:n})}else if("endKnob"===t.name&&100>=s){if(!(s>=this.beginValue&&1===e.xDirection||s>=this.beginValue))return this.drag(this.$.startKnob,e);this.setEndValue(s),i=this.calcRangeRatio(this.endValue),n=this.increment?this.calcIncrement(i+.5*this.increment):i,o=this.calcKnobPercent(n),this.updateKnobPosition(o,this.$.endKnob),this.setRangeEnd(n),this.doChanging({value:n})}return!0}},dragfinish:function(t,e){this.dragging=!1,e.preventTap();var i;return"startKnob"===t.name?(i=this.calcRangeRatio(this.beginValue),this.doChange({value:i,startChanged:!0})):"endKnob"===t.name&&(i=this.calcRangeRatio(this.endValue),this.doChange({value:i,startChanged:!1})),t.removeClass("pressed"),!0},knobDown:function(t){t.addClass("pressed")},knobUp:function(t){t.removeClass("pressed")},rangeMinChanged:function(){this.refreshRangeSlider()},rangeMaxChanged:function(){this.refreshRangeSlider()},rangeStartChanged:function(){this.refreshRangeSlider()},rangeEndChanged:function(){this.refreshRangeSlider()},setStartLabel:function(t){this.$.startKnob.waterfallDown("onSetLabel",t)},setEndLabel:function(t){this.$.endKnob.waterfallDown("onSetLabel",t)}}),enyo.kind({name:"onyx.RangeSliderKnobLabel",classes:"onyx-range-slider-label",handlers:{onSetLabel:"setLabel"},setLabel:function(t,e){this.setContent(e)}});

// lib/onyx/source/Item.js
enyo.kind({name:"onyx.Item",classes:"onyx-item",tapHighlight:!0,handlers:{onhold:"hold",onrelease:"release"},hold:function(t,e){this.tapHighlight&&onyx.Item.addRemoveFlyweightClass(this.controlParent||this,"onyx-highlight",!0,e)},release:function(t,e){this.tapHighlight&&onyx.Item.addRemoveFlyweightClass(this.controlParent||this,"onyx-highlight",!1,e)},statics:{addRemoveFlyweightClass:function(t,e,i,n,o){var s=n.flyweight;if(s){var a=void 0!==o?o:n.index;s.performOnRow(a,function(){t.addRemoveClass(e,i)})}}}});

// lib/onyx/source/Spinner.js
enyo.kind({name:"onyx.Spinner",classes:"onyx-spinner",stop:function(){this.setShowing(!1)},start:function(){this.setShowing(!0)},toggle:function(){this.setShowing(!this.getShowing())}});

// lib/onyx/source/MoreToolbar.js
enyo.kind({name:"onyx.MoreToolbar",classes:"onyx-toolbar onyx-more-toolbar",menuClass:"",movedClass:"",layoutKind:"FittableColumnsLayout",noStretch:!0,handlers:{onHide:"reflow"},published:{clientLayoutKind:"FittableColumnsLayout"},tools:[{name:"client",noStretch:!0,fit:!0,classes:"onyx-toolbar-inline"},{name:"nard",kind:"onyx.MenuDecorator",showing:!1,onActivate:"activated",components:[{kind:"onyx.IconButton",classes:"onyx-more-button"},{name:"menu",kind:"onyx.Menu",scrolling:!1,classes:"onyx-more-menu"}]}],initComponents:function(){this.menuClass&&this.menuClass.length>0&&!this.$.menu.hasClass(this.menuClass)&&this.$.menu.addClass(this.menuClass),this.createChrome(this.tools),this.inherited(arguments),this.$.client.setLayoutKind(this.clientLayoutKind)},clientLayoutKindChanged:function(){this.$.client.setLayoutKind(this.clientLayoutKind)},reflow:function(){this.inherited(arguments),this.isContentOverflowing()?(this.$.nard.show(),this.popItem()&&this.reflow()):this.tryPushItem()?this.reflow():this.$.menu.children.length||(this.$.nard.hide(),this.$.menu.hide())},activated:function(t,e){this.addRemoveClass("active",e.originator.active)},popItem:function(){var t=this.findCollapsibleItem();if(t){this.movedClass&&this.movedClass.length>0&&!t.hasClass(this.movedClass)&&t.addClass(this.movedClass),this.$.menu.addChild(t,null);var e=this.$.menu.hasNode();return e&&t.hasNode()&&t.insertNodeInParent(e),!0}},pushItem:function(){var t=this.$.menu.children,e=t[0];if(e){this.movedClass&&this.movedClass.length>0&&e.hasClass(this.movedClass)&&e.removeClass(this.movedClass),this.$.client.addChild(e);var i=this.$.client.hasNode();if(i&&e.hasNode()){for(var n,o,s=0;this.$.client.children.length>s;s++){var a=this.$.client.children[s];if(void 0!==a.toolbarIndex&&a.toolbarIndex!=s){n=a,o=s;break}}if(n&&n.hasNode()){e.insertNodeInParent(i,n.node);var r=this.$.client.children.pop();this.$.client.children.splice(o,0,r)}else e.appendNodeToParent(i)}return!0}},tryPushItem:function(){if(this.pushItem()){if(!this.isContentOverflowing())return!0;this.popItem()}},isContentOverflowing:function(){if(this.$.client.hasNode()){var t=this.$.client.children,e=t.length&&t[t.length-1].hasNode();if(e)return this.$.client.reflow(),e.offsetLeft+e.offsetWidth>this.$.client.node.clientWidth}},findCollapsibleItem:function(){for(var t,e=this.$.client.children,i=e.length-1;t=e[i];i--){if(!t.unmoveable)return t;void 0===t.toolbarIndex&&(t.toolbarIndex=i)}}});

// lib/onyx/source/IntegerPicker.js
enyo.kind({name:"onyx.IntegerPicker",kind:"onyx.Picker",published:{value:0,min:0,max:9},create:function(){this.inherited(arguments),this.rangeChanged()},minChanged:function(){this.destroyClientControls(),this.rangeChanged(),this.render()},maxChanged:function(){this.destroyClientControls(),this.rangeChanged(),this.render()},rangeChanged:function(){for(var t=this.min;this.max>=t;t++)this.createComponent({content:t,active:t===this.value?!0:!1})},valueChanged:function(){var t=this.getClientControls(),e=t.length;this.value=Math.min(this.max,Math.max(this.value,this.min));for(var i=0;e>i;i++)if(this.value===parseInt(t[i].content,10)){this.setSelected(t[i]);break}},selectedChanged:function(t){t&&t.removeClass("selected"),this.selected&&(this.selected.addClass("selected"),this.doChange({selected:this.selected,content:this.selected.content})),this.setValue(parseInt(this.selected.content,10))}});

// lib/onyx/source/ContextualPopup.js
enyo.kind({name:"onyx.ContextualPopup",kind:"enyo.Popup",modal:!0,autoDismiss:!0,floating:!1,classes:"onyx-contextual-popup enyo-unselectable",published:{maxHeight:100,scrolling:!0,title:void 0,actionButtons:[]},statics:{subclass:function(t,e){var i=t.prototype;e.actionButtons&&(i.kindActionButtons=e.actionButtons,delete i.actionButtons)}},vertFlushMargin:60,horizFlushMargin:50,widePopup:200,longPopup:200,horizBuffer:16,events:{onTap:""},handlers:{onActivate:"childControlActivated",onRequestShowMenu:"requestShow",onRequestHideMenu:"requestHide"},components:[{name:"title",classes:"onyx-contextual-popup-title"},{classes:"onyx-contextual-popup-scroller",components:[{name:"client",kind:"enyo.Scroller",vertical:"auto",classes:"enyo-unselectable",thumb:!1,strategyKind:"TouchScrollStrategy"}]},{name:"actionButtons",classes:"onyx-contextual-popup-action-buttons"}],scrollerName:"client",create:function(){this.inherited(arguments),this.maxHeightChanged(),this.titleChanged(),this.actionButtonsChanged()},getScroller:function(){return this.$[this.scrollerName]},titleChanged:function(){this.$.title.setContent(this.title)},actionButtonsChanged:function(){this.actionButtons?enyo.forEach(this.actionButtons,function(t){t.kind="onyx.Button",t.classes=t.classes+" onyx-contextual-popup-action-button",t.popup=this,t.actionButton=!0,this.$.actionButtons.createComponent(t,{owner:this.getInstanceOwner()})},this):this.kindActionButtons&&enyo.forEach(this.kindActionButtons,function(t){t.kind="onyx.Button",t.classes=t.classes+" onyx-contextual-popup-action-button",t.popup=this,t.actionButton=!0,this.$.actionButtons.createComponent(t,{owner:this})},this),this.hasNode()&&this.$.actionButtons.render()},maxHeightChanged:function(){this.scrolling&&this.getScroller().setMaxHeight(this.maxHeight+"px")},showingChanged:function(){this.inherited(arguments),this.scrolling&&this.getScroller().setShowing(this.showing),this.adjustPosition()},childControlActivated:function(){return!0},requestShow:function(t,e){var i=e.activator.hasNode();return i&&(this.activatorOffset=this.getPageOffset(i)),this.show(),!0},applyPosition:function(t){var e="";for(var i in t)e+=i+":"+t[i]+(isNaN(t[i])?"; ":"px; ");this.addStyles(e)},getPageOffset:function(t){var e=this.getBoundingRect(t),i=void 0===window.pageYOffset?document.documentElement.scrollTop:window.pageYOffset,n=void 0===window.pageXOffset?document.documentElement.scrollLeft:window.pageXOffset,o=void 0===e.height?e.bottom-e.top:e.height,s=void 0===e.width?e.right-e.left:e.width;return{top:e.top+i,left:e.left+n,height:o,width:s}},adjustPosition:function(){if(this.showing&&this.hasNode()){this.resetPositioning();var t=this.getViewWidth(),e=this.getViewHeight(),i=this.vertFlushMargin,n=e-this.vertFlushMargin,o=this.horizFlushMargin,s=t-this.horizFlushMargin;if(i>this.activatorOffset.top+this.activatorOffset.height||this.activatorOffset.top>n){if(this.applyVerticalFlushPositioning(o,s))return;if(this.applyHorizontalFlushPositioning(o,s))return;if(this.applyVerticalPositioning())return}else if((o>this.activatorOffset.left+this.activatorOffset.width||this.activatorOffset.left>s)&&this.applyHorizontalPositioning())return;var a=this.getBoundingRect(this.node);if(a.width>this.widePopup){if(this.applyVerticalPositioning())return}else if(a.height>this.longPopup&&this.applyHorizontalPositioning())return;if(this.applyVerticalPositioning())return;if(this.applyHorizontalPositioning())return}},initVerticalPositioning:function(){this.resetPositioning(),this.addClass("vertical");var t=this.getBoundingRect(this.node),e=this.getViewHeight();return this.floating?e/2>this.activatorOffset.top?(this.applyPosition({top:this.activatorOffset.top+this.activatorOffset.height,bottom:"auto"}),this.addClass("below")):(this.applyPosition({top:this.activatorOffset.top-t.height,bottom:"auto"}),this.addClass("above")):t.top+t.height>e&&e-t.bottom<t.top-t.height?this.addClass("above"):this.addClass("below"),t=this.getBoundingRect(this.node),t.top+t.height>e||0>t.top?!1:!0},applyVerticalPositioning:function(){if(!this.initVerticalPositioning())return!1;var t=this.getBoundingRect(this.node),e=this.getViewWidth();if(this.floating){var i=this.activatorOffset.left+this.activatorOffset.width/2-t.width/2;i+t.width>e?(this.applyPosition({left:this.activatorOffset.left+this.activatorOffset.width-t.width}),this.addClass("left")):0>i?(this.applyPosition({left:this.activatorOffset.left}),this.addClass("right")):this.applyPosition({left:i})}else{var n=this.activatorOffset.left+this.activatorOffset.width/2-t.left-t.width/2;t.right+n>e?(this.applyPosition({left:this.activatorOffset.left+this.activatorOffset.width-t.right}),this.addRemoveClass("left",!0)):0>t.left+n?this.addRemoveClass("right",!0):this.applyPosition({left:n})}return!0},applyVerticalFlushPositioning:function(t,e){if(!this.initVerticalPositioning())return!1;var i=this.getBoundingRect(this.node),n=this.getViewWidth();return t>this.activatorOffset.left+this.activatorOffset.width/2?(this.activatorOffset.left+this.activatorOffset.width/2<this.horizBuffer?this.applyPosition({left:this.horizBuffer+(this.floating?0:-i.left)}):this.applyPosition({left:this.activatorOffset.width/2+(this.floating?this.activatorOffset.left:0)}),this.addClass("right"),this.addClass("corner"),!0):this.activatorOffset.left+this.activatorOffset.width/2>e?(this.activatorOffset.left+this.activatorOffset.width/2>n-this.horizBuffer?this.applyPosition({left:n-this.horizBuffer-i.right}):this.applyPosition({left:this.activatorOffset.left+this.activatorOffset.width/2-i.right}),this.addClass("left"),this.addClass("corner"),!0):!1},initHorizontalPositioning:function(){this.resetPositioning();var t=this.getBoundingRect(this.node),e=this.getViewWidth();return this.floating?e/2>this.activatorOffset.left+this.activatorOffset.width?(this.applyPosition({left:this.activatorOffset.left+this.activatorOffset.width}),this.addRemoveClass("left",!0)):(this.applyPosition({left:this.activatorOffset.left-t.width}),this.addRemoveClass("right",!0)):this.activatorOffset.left-t.width>0?(this.applyPosition({left:this.activatorOffset.left-t.left-t.width}),this.addRemoveClass("right",!0)):(this.applyPosition({left:this.activatorOffset.width}),this.addRemoveClass("left",!0)),this.addRemoveClass("horizontal",!0),t=this.getBoundingRect(this.node),0>t.left||t.left+t.width>e?!1:!0},applyHorizontalPositioning:function(){if(!this.initHorizontalPositioning())return!1;var t=this.getBoundingRect(this.node),e=this.getViewHeight(),i=this.activatorOffset.top+this.activatorOffset.height/2;return this.floating?i>=e/2-.05*e&&e/2+.05*e>=i?this.applyPosition({top:this.activatorOffset.top+this.activatorOffset.height/2-t.height/2,bottom:"auto"}):e/2>this.activatorOffset.top+this.activatorOffset.height?(this.applyPosition({top:this.activatorOffset.top-this.activatorOffset.height,bottom:"auto"}),this.addRemoveClass("high",!0)):(this.applyPosition({top:this.activatorOffset.top-t.height+2*this.activatorOffset.height,bottom:"auto"}),this.addRemoveClass("low",!0)):i>=e/2-.05*e&&e/2+.05*e>=i?this.applyPosition({top:(this.activatorOffset.height-t.height)/2}):e/2>this.activatorOffset.top+this.activatorOffset.height?(this.applyPosition({top:-this.activatorOffset.height}),this.addRemoveClass("high",!0)):(this.applyPosition({top:t.top-t.height-this.activatorOffset.top+this.activatorOffset.height}),this.addRemoveClass("low",!0)),!0},applyHorizontalFlushPositioning:function(t,e){if(!this.initHorizontalPositioning())return!1;var i=this.getBoundingRect(this.node),n=this.getViewHeight();return this.floating?n/2>this.activatorOffset.top?(this.applyPosition({top:this.activatorOffset.top+this.activatorOffset.height/2}),this.addRemoveClass("high",!0)):(this.applyPosition({top:this.activatorOffset.top+this.activatorOffset.height/2-i.height}),this.addRemoveClass("low",!0)):i.top+i.height>n&&n-i.bottom<i.top-i.height?(this.applyPosition({top:i.top-i.height-this.activatorOffset.top-this.activatorOffset.height/2}),this.addRemoveClass("low",!0)):(this.applyPosition({top:this.activatorOffset.height/2}),this.addRemoveClass("high",!0)),t>this.activatorOffset.left+this.activatorOffset.width?(this.addClass("left"),this.addClass("corner"),!0):this.activatorOffset.left>e?(this.addClass("right"),this.addClass("corner"),!0):!1},getBoundingRect:function(t){var e=t.getBoundingClientRect();return e.width&&e.height?e:{left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.right-e.left,height:e.bottom-e.top}},getViewHeight:function(){return void 0===window.innerHeight?document.documentElement.clientHeight:window.innerHeight},getViewWidth:function(){return void 0===window.innerWidth?document.documentElement.clientWidth:window.innerWidth},resetPositioning:function(){this.removeClass("right"),this.removeClass("left"),this.removeClass("high"),this.removeClass("low"),this.removeClass("corner"),this.removeClass("below"),this.removeClass("above"),this.removeClass("vertical"),this.removeClass("horizontal"),this.applyPosition({left:"auto"}),this.applyPosition({top:"auto"})},resizeHandler:function(){this.inherited(arguments),this.adjustPosition()},requestHide:function(){this.setShowing(!1)}});

// lib/sword/sword.min.js
(function(e,t){"function"==typeof define&&define.amd?define(t):e.sword=t()})(this,function(){var requirejs,require,define;return function(e){function t(e,t){return b.call(e,t)}function n(e,t){var n,s,i,a,o,r,l,h,u,c,d=t&&t.split("/"),p=g.map,f=p&&p["*"]||{};if(e&&"."===e.charAt(0))if(t){for(d=d.slice(0,d.length-1),e=d.concat(e.split("/")),h=0;e.length>h;h+=1)if(c=e[h],"."===c)e.splice(h,1),h-=1;else if(".."===c){if(1===h&&(".."===e[2]||".."===e[0]))break;h>0&&(e.splice(h-1,2),h-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((d||f)&&p){for(n=e.split("/"),h=n.length;h>0;h-=1){if(s=n.slice(0,h).join("/"),d)for(u=d.length;u>0;u-=1)if(i=p[d.slice(0,u).join("/")],i&&(i=i[s])){a=i,o=h;break}if(a)break;!r&&f&&f[s]&&(r=f[s],l=h)}!a&&r&&(a=r,o=l),a&&(n.splice(0,o,a),e=n.join("/"))}return e}function s(t,n){return function(){return u.apply(e,v.call(arguments,0).concat([t,n]))}}function i(e){return function(t){return n(t,e)}}function a(e){return function(t){p[e]=t}}function o(n){if(t(f,n)){var s=f[n];delete f[n],m[n]=!0,h.apply(e,s)}if(!t(p,n)&&!t(m,n))throw Error("No "+n);return p[n]}function r(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function l(e){return function(){return g&&g.config&&g.config[e]||{}}}var h,u,c,d,p={},f={},g={},m={},b=Object.prototype.hasOwnProperty,v=[].slice;c=function(e,t){var s,a=r(e),l=a[0];return e=a[1],l&&(l=n(l,t),s=o(l)),l?e=s&&s.normalize?s.normalize(e,i(t)):n(e,t):(e=n(e,t),a=r(e),l=a[0],e=a[1],l&&(s=o(l))),{f:l?l+"!"+e:e,n:e,pr:l,p:s}},d={require:function(e){return s(e)},exports:function(e){var t=p[e];return t!==void 0?t:p[e]={}},module:function(e){return{id:e,uri:"",exports:p[e],config:l(e)}}},h=function(n,i,r,l){var h,u,g,b,v,x,y=[];if(l=l||n,"function"==typeof r){for(i=!i.length&&r.length?["require","exports","module"]:i,v=0;i.length>v;v+=1)if(b=c(i[v],l),u=b.f,"require"===u)y[v]=d.require(n);else if("exports"===u)y[v]=d.exports(n),x=!0;else if("module"===u)h=y[v]=d.module(n);else if(t(p,u)||t(f,u)||t(m,u))y[v]=o(u);else{if(!b.p)throw Error(n+" missing "+u);b.p.load(b.n,s(l,!0),a(u),{}),y[v]=p[u]}g=r.apply(p[n],y),n&&(h&&h.exports!==e&&h.exports!==p[n]?p[n]=h.exports:g===e&&x||(p[n]=g))}else n&&(p[n]=r)},requirejs=require=u=function(t,n,s,i,a){return"string"==typeof t?d[t]?d[t](n):o(c(t,n).f):(t.splice||(g=t,n.splice?(t=n,n=s,s=null):t=e),n=n||function(){},"function"==typeof s&&(s=i,i=a),i?h(e,t,n,s):setTimeout(function(){h(e,t,n,s)},4),u)},u.config=function(e){return g=e,g.deps&&u(g.deps,g.callback),u},define=function(e,n,s){n.splice||(s=n,n=[]),!t(p,e)&&!t(f,e)&&(f[e]=[e,n,s])},define.amd={jQuery:!0}}(),define("almond",function(){}),function(){function e(e){throw e}function t(e,t){var n=e.split("."),s=g;!(n[0]in s)&&s.execScript&&s.execScript("var "+n[0]);for(var i;n.length&&(i=n.shift());)n.length||t===f?s=s[i]?s[i]:s[i]={}:s[i]=t}function n(e){var t,n,s,i,a,o,r,l,h,u=e.length,c=0,d=Number.POSITIVE_INFINITY;for(l=0;u>l;++l)e[l]>c&&(c=e[l]),d>e[l]&&(d=e[l]);for(t=1<<c,n=new(m?Uint32Array:Array)(t),s=1,i=0,a=2;c>=s;){for(l=0;u>l;++l)if(e[l]===s){for(o=0,r=i,h=0;s>h;++h)o=o<<1|1&r,r>>=1;for(h=o;t>h;h+=a)n[h]=s<<16|l;++i}++s,i<<=1,a<<=1}return[n,c,d]}function s(t,n){switch(this.l=[],this.m=32768,this.d=this.f=this.c=this.t=0,this.input=m?new Uint8Array(t):t,this.u=!1,this.n=k,this.K=!1,(n||!(n={}))&&(n.index&&(this.c=n.index),n.bufferSize&&(this.m=n.bufferSize),n.bufferType&&(this.n=n.bufferType),n.resize&&(this.K=n.resize)),this.n){case P:this.a=32768,this.b=new(m?Uint8Array:Array)(32768+this.m+258);break;case k:this.a=0,this.b=new(m?Uint8Array:Array)(this.m),this.e=this.W,this.B=this.R,this.q=this.V;break;default:e(Error("invalid inflate mode"))}}function i(t,n){for(var s,i=t.f,a=t.d,o=t.input,r=t.c;n>a;)s=o[r++],s===f&&e(Error("input buffer is broken")),i|=s<<a,a+=8;return s=i&(1<<n)-1,t.f=i>>>n,t.d=a-n,t.c=r,s}function a(e,t){for(var n,s,i,a=e.f,o=e.d,r=e.input,l=e.c,h=t[0],u=t[1];u>o&&(n=r[l++],n!==f);)a|=n<<o,o+=8;return s=h[a&(1<<u)-1],i=s>>>16,e.f=a>>i,e.d=o-i,e.c=l,65535&s}function o(e){function t(e,t,n){var s,o,r,l;for(l=0;e>l;)switch(s=a(this,t)){case 16:for(r=3+i(this,2);r--;)n[l++]=o;break;case 17:for(r=3+i(this,3);r--;)n[l++]=0;o=0;break;case 18:for(r=11+i(this,7);r--;)n[l++]=0;o=0;break;default:o=n[l++]=s}return n}var s,o,r,l,h=i(e,5)+257,u=i(e,5)+1,c=i(e,4)+4,d=new(m?Uint8Array:Array)(A.length);for(l=0;c>l;++l)d[A[l]]=i(e,3);s=n(d),o=new(m?Uint8Array:Array)(h),r=new(m?Uint8Array:Array)(u),e.q(n(t.call(e,h,s,o)),n(t.call(e,u,s,r)))}function r(e){e=e||{},this.files=[],this.v=e.comment}function l(e,t){t=t||{},this.input=m&&e instanceof Array?new Uint8Array(e):e,this.c=0,this.ba=t.verify||!1,this.j=t.password}function h(e,t){this.input=e,this.offset=t}function u(e,t){this.input=e,this.offset=t}function c(t){var n,s,i,a,o=[],r={};if(!t.i){if(t.o===f){var l,u=t.input;if(!t.D)e:{var c,d=t.input;for(c=d.length-12;c>0;--c)if(d[c]===W[0]&&d[c+1]===W[1]&&d[c+2]===W[2]&&d[c+3]===W[3]){t.D=c;break e}e(Error("End of Central Directory Record not found"))}l=t.D,(u[l++]!==W[0]||u[l++]!==W[1]||u[l++]!==W[2]||u[l++]!==W[3])&&e(Error("invalid signature")),t.ha=u[l++]|u[l++]<<8,t.ja=u[l++]|u[l++]<<8,t.ka=u[l++]|u[l++]<<8,t.aa=u[l++]|u[l++]<<8,t.Q=(u[l++]|u[l++]<<8|u[l++]<<16|u[l++]<<24)>>>0,t.o=(u[l++]|u[l++]<<8|u[l++]<<16|u[l++]<<24)>>>0,t.w=u[l++]|u[l++]<<8,t.v=m?u.subarray(l,l+t.w):u.slice(l,l+t.w)}for(n=t.o,i=0,a=t.aa;a>i;++i)s=new h(t.input,n),s.parse(),n+=s.length,o[i]=s,r[s.filename]=i;t.Q<n-t.o&&e(Error("invalid file header size")),t.i=o,t.G=r}}function d(e,t,n){return n^=e.s(t),e.k(t,n),n}var p,f=void 0,g=this,m="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array;new(m?Uint8Array:Array)(256);var b;for(b=0;256>b;++b)for(var v=b,x=7,v=v>>>1;v;v>>>=1)--x;var y,w=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],C=m?new Uint32Array(w):w,_=[];for(y=0;288>y;y++)switch(!0){case 143>=y:_.push([y+48,8]);break;case 255>=y:_.push([y-144+400,9]);break;case 279>=y:_.push([y-256+0,7]);break;case 287>=y:_.push([y-280+192,8]);break;default:e("invalid literal: "+y)}var S=function(){function t(t){switch(!0){case 3===t:return[257,t-3,0];case 4===t:return[258,t-4,0];case 5===t:return[259,t-5,0];case 6===t:return[260,t-6,0];case 7===t:return[261,t-7,0];case 8===t:return[262,t-8,0];case 9===t:return[263,t-9,0];case 10===t:return[264,t-10,0];case 12>=t:return[265,t-11,1];case 14>=t:return[266,t-13,1];case 16>=t:return[267,t-15,1];case 18>=t:return[268,t-17,1];case 22>=t:return[269,t-19,2];case 26>=t:return[270,t-23,2];case 30>=t:return[271,t-27,2];case 34>=t:return[272,t-31,2];case 42>=t:return[273,t-35,3];case 50>=t:return[274,t-43,3];case 58>=t:return[275,t-51,3];case 66>=t:return[276,t-59,3];case 82>=t:return[277,t-67,4];case 98>=t:return[278,t-83,4];case 114>=t:return[279,t-99,4];case 130>=t:return[280,t-115,4];case 162>=t:return[281,t-131,5];case 194>=t:return[282,t-163,5];case 226>=t:return[283,t-195,5];case 257>=t:return[284,t-227,5];case 258===t:return[285,t-258,0];default:e("invalid length: "+t)}}var n,s,i=[];for(n=3;258>=n;n++)s=t(n),i[n]=s[2]<<24|s[1]<<16|s[0];return i}();m&&new Uint32Array(S);var P=0,k=1;s.prototype.r=function(){for(;!this.u;){var t=i(this,3);switch(1&t&&(this.u=!0),t>>>=1){case 0:var n=this.input,s=this.c,a=this.b,r=this.a,l=f,h=f,u=f,c=a.length,d=f;switch(this.d=this.f=0,l=n[s++],l===f&&e(Error("invalid uncompressed block header: LEN (first byte)")),h=l,l=n[s++],l===f&&e(Error("invalid uncompressed block header: LEN (second byte)")),h|=l<<8,l=n[s++],l===f&&e(Error("invalid uncompressed block header: NLEN (first byte)")),u=l,l=n[s++],l===f&&e(Error("invalid uncompressed block header: NLEN (second byte)")),u|=l<<8,h===~u&&e(Error("invalid uncompressed block header: length verify")),s+h>n.length&&e(Error("input buffer is broken")),this.n){case P:for(;r+h>a.length;){if(d=c-r,h-=d,m)a.set(n.subarray(s,s+d),r),r+=d,s+=d;else for(;d--;)a[r++]=n[s++];this.a=r,a=this.e(),r=this.a}break;case k:for(;r+h>a.length;)a=this.e({H:2});break;default:e(Error("invalid inflate mode"))}if(m)a.set(n.subarray(s,s+h),r),r+=h,s+=h;else for(;h--;)a[r++]=n[s++];this.c=s,this.a=r,this.b=a;break;case 1:this.q(F,K);break;case 2:o(this);break;default:e(Error("unknown BTYPE: "+t))}}return this.B()};var T,I,R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],A=m?new Uint16Array(R):R,E=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],N=m?new Uint16Array(E):E,M=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],D=m?new Uint8Array(M):M,$=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],B=m?new Uint16Array($):$,O=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=m?new Uint8Array(O):O,L=new(m?Uint8Array:Array)(288);for(T=0,I=L.length;I>T;++T)L[T]=143>=T?8:255>=T?9:279>=T?7:8;var H,V,F=n(L),J=new(m?Uint8Array:Array)(30);for(H=0,V=J.length;V>H;++H)J[H]=5;var K=n(J);p=s.prototype,p.q=function(e,t){var n=this.b,s=this.a;this.C=e;for(var o,r,l,h,u=n.length-258;256!==(o=a(this,e));)if(256>o)s>=u&&(this.a=s,n=this.e(),s=this.a),n[s++]=o;else for(r=o-257,h=N[r],D[r]>0&&(h+=i(this,D[r])),o=a(this,t),l=B[o],z[o]>0&&(l+=i(this,z[o])),s>=u&&(this.a=s,n=this.e(),s=this.a);h--;)n[s]=n[s++-l];for(;this.d>=8;)this.d-=8,this.c--;this.a=s},p.V=function(e,t){var n=this.b,s=this.a;this.C=e;for(var o,r,l,h,u=n.length;256!==(o=a(this,e));)if(256>o)s>=u&&(n=this.e(),u=n.length),n[s++]=o;else for(r=o-257,h=N[r],D[r]>0&&(h+=i(this,D[r])),o=a(this,t),l=B[o],z[o]>0&&(l+=i(this,z[o])),s+h>u&&(n=this.e(),u=n.length);h--;)n[s]=n[s++-l];for(;this.d>=8;)this.d-=8,this.c--;this.a=s},p.e=function(){var e,t,n=new(m?Uint8Array:Array)(this.a-32768),s=this.a-32768,i=this.b;if(m)n.set(i.subarray(32768,n.length));else for(e=0,t=n.length;t>e;++e)n[e]=i[e+32768];if(this.l.push(n),this.t+=n.length,m)i.set(i.subarray(s,s+32768));else for(e=0;32768>e;++e)i[e]=i[s+e];return this.a=32768,i},p.W=function(e){var t,n,s,i,a=0|this.input.length/this.c+1,o=this.input,r=this.b;return e&&("number"==typeof e.H&&(a=e.H),"number"==typeof e.P&&(a+=e.P)),2>a?(n=(o.length-this.c)/this.C[2],i=0|258*(n/2),s=r.length>i?r.length+i:r.length<<1):s=r.length*a,m?(t=new Uint8Array(s),t.set(r)):t=r,this.b=t},p.B=function(){var e,t,n,s,i,a=0,o=this.b,r=this.l,l=new(m?Uint8Array:Array)(this.t+(this.a-32768));if(0===r.length)return m?this.b.subarray(32768,this.a):this.b.slice(32768,this.a);for(t=0,n=r.length;n>t;++t)for(e=r[t],s=0,i=e.length;i>s;++s)l[a++]=e[s];for(t=32768,n=this.a;n>t;++t)l[a++]=o[t];return this.l=[],this.buffer=l},p.R=function(){var e,t=this.a;return m?this.K?(e=new Uint8Array(t),e.set(this.b.subarray(0,t))):e=this.b.subarray(0,t):(this.b.length>t&&(this.b.length=t),e=this.b),this.buffer=e},r.prototype.L=function(e){this.j=e},r.prototype.s=function(e){var t=2|65535&e[2];return 255&t*(1^t)>>8},r.prototype.k=function(e,t){e[0]=(C[255&(e[0]^t)]^e[0]>>>8)>>>0,e[1]=(6681*(20173*(e[1]+(255&e[0]))>>>0)>>>0)+1>>>0,e[2]=(C[255&(e[2]^e[1]>>>24)]^e[2]>>>8)>>>0},r.prototype.T=function(e){var t,n,s=[305419896,591751049,878082192];for(m&&(s=new Uint32Array(s)),t=0,n=e.length;n>t;++t)this.k(s,255&e[t]);return s};var U={O:0,M:8},j=[80,75,1,2],q=[80,75,3,4],W=[80,75,5,6];h.prototype.parse=function(){var t=this.input,n=this.offset;(t[n++]!==j[0]||t[n++]!==j[1]||t[n++]!==j[2]||t[n++]!==j[3])&&e(Error("invalid file header signature")),this.version=t[n++],this.ia=t[n++],this.Z=t[n++]|t[n++]<<8,this.I=t[n++]|t[n++]<<8,this.A=t[n++]|t[n++]<<8,this.time=t[n++]|t[n++]<<8,this.U=t[n++]|t[n++]<<8,this.p=(t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24)>>>0,this.z=(t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24)>>>0,this.J=(t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24)>>>0,this.h=t[n++]|t[n++]<<8,this.g=t[n++]|t[n++]<<8,this.F=t[n++]|t[n++]<<8,this.ea=t[n++]|t[n++]<<8,this.ga=t[n++]|t[n++]<<8,this.fa=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24,this.$=(t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24)>>>0,this.filename=String.fromCharCode.apply(null,m?t.subarray(n,n+=this.h):t.slice(n,n+=this.h)),this.X=m?t.subarray(n,n+=this.g):t.slice(n,n+=this.g),this.v=m?t.subarray(n,n+this.F):t.slice(n,n+this.F),this.length=n-this.offset};var Y={N:1,ca:8,da:2048};u.prototype.parse=function(){var t=this.input,n=this.offset;(t[n++]!==q[0]||t[n++]!==q[1]||t[n++]!==q[2]||t[n++]!==q[3])&&e(Error("invalid local file header signature")),this.Z=t[n++]|t[n++]<<8,this.I=t[n++]|t[n++]<<8,this.A=t[n++]|t[n++]<<8,this.time=t[n++]|t[n++]<<8,this.U=t[n++]|t[n++]<<8,this.p=(t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24)>>>0,this.z=(t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24)>>>0,this.J=(t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24)>>>0,this.h=t[n++]|t[n++]<<8,this.g=t[n++]|t[n++]<<8,this.filename=String.fromCharCode.apply(null,m?t.subarray(n,n+=this.h):t.slice(n,n+=this.h)),this.X=m?t.subarray(n,n+=this.g):t.slice(n,n+=this.g),this.length=n-this.offset},p=l.prototype,p.Y=function(){var e,t,n,s=[];for(this.i||c(this),n=this.i,e=0,t=n.length;t>e;++e)s[e]=n[e].filename;return s},p.r=function(t,n){var i;this.G||c(this),i=this.G[t],i===f&&e(Error(t+" not found"));var a;a=n||{};var o,r,l,h,p,g,b,v,x=this.input,y=this.i;if(y||c(this),y[i]===f&&e(Error("wrong index")),r=y[i].$,o=new u(this.input,r),o.parse(),r+=o.length,l=o.z,0!==(o.I&Y.N)){for(!a.password&&!this.j&&e(Error("please set password")),g=this.S(a.password||this.j),b=r,v=r+12;v>b;++b)d(this,g,x[b]);for(r+=12,l-=12,b=r,v=r+l;v>b;++b)x[b]=d(this,g,x[b])}switch(o.A){case U.O:h=m?this.input.subarray(r,r+l):this.input.slice(r,r+l);break;case U.M:h=new s(this.input,{index:r,bufferSize:o.J}).r();break;default:e(Error("unknown compression type"))}if(this.ba){var w,_=f,S="number"==typeof _?_:_=0,P=h.length;for(w=-1,S=7&P;S--;++_)w=w>>>8^C[255&(w^h[_])];for(S=P>>3;S--;_+=8)w=w>>>8^C[255&(w^h[_])],w=w>>>8^C[255&(w^h[_+1])],w=w>>>8^C[255&(w^h[_+2])],w=w>>>8^C[255&(w^h[_+3])],w=w>>>8^C[255&(w^h[_+4])],w=w>>>8^C[255&(w^h[_+5])],w=w>>>8^C[255&(w^h[_+6])],w=w>>>8^C[255&(w^h[_+7])];p=(4294967295^w)>>>0,o.p!==p&&e(Error("wrong crc: file=0x"+o.p.toString(16)+", data=0x"+p.toString(16)))}return h},p.L=function(e){this.j=e},p.k=r.prototype.k,p.S=r.prototype.T,p.s=r.prototype.s,t("Zlib.Unzip",l),t("Zlib.Unzip.prototype.decompress",l.prototype.r),t("Zlib.Unzip.prototype.getFilenames",l.prototype.Y),t("Zlib.Unzip.prototype.setPassword",l.prototype.L)}.call(this),define("unzip",function(e){return function(){var t;return t||e.Zlib}}(this)),function(){function e(e){var n=!1;return function(){if(n)throw Error("Callback was already called.");n=!0,e.apply(t,arguments)}}var t,n,s={};t=this,null!=t&&(n=t.async),s.noConflict=function(){return t.async=n,s};var i=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;e.length>n;n+=1)t(e[n],n,e)},a=function(e,t){if(e.map)return e.map(t);var n=[];return i(e,function(e,s,i){n.push(t(e,s,i))}),n},o=function(e,t,n){return e.reduce?e.reduce(t,n):(i(e,function(e,s,i){n=t(n,e,s,i)}),n)},r=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};"undefined"!=typeof process&&process.nextTick?(s.nextTick=process.nextTick,s.setImmediate="undefined"!=typeof setImmediate?setImmediate:s.nextTick):"function"==typeof setImmediate?(s.nextTick=function(e){setImmediate(e)},s.setImmediate=s.nextTick):(s.nextTick=function(e){setTimeout(e,0)},s.setImmediate=s.nextTick),s.each=function(t,n,s){if(s=s||function(){},!t.length)return s();var a=0;i(t,function(i){n(i,e(function(e){e?(s(e),s=function(){}):(a+=1,a>=t.length&&s(null))}))})},s.forEach=s.each,s.eachSeries=function(e,t,n){if(n=n||function(){},!e.length)return n();var s=0,i=function(){t(e[s],function(t){t?(n(t),n=function(){}):(s+=1,s>=e.length?n(null):i())})};i()},s.forEachSeries=s.eachSeries,s.eachLimit=function(e,t,n,s){var i=l(t);i.apply(null,[e,n,s])},s.forEachLimit=s.eachLimit;var l=function(e){return function(t,n,s){if(s=s||function(){},!t.length||0>=e)return s();var i=0,a=0,o=0;(function r(){if(i>=t.length)return s();for(;e>o&&t.length>a;)a+=1,o+=1,n(t[a-1],function(e){e?(s(e),s=function(){}):(i+=1,o-=1,i>=t.length?s():r())})})()}},h=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[s.each].concat(t))}},u=function(e,t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[l(e)].concat(n))}},c=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[s.eachSeries].concat(t))}},d=function(e,t,n,s){var i=[];t=a(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n,s){i[e.index]=s,t(n)})},function(e){s(e,i)})};s.map=h(d),s.mapSeries=c(d),s.mapLimit=function(e,t,n,s){return p(t)(e,n,s)};var p=function(e){return u(e,d)};s.reduce=function(e,t,n,i){s.eachSeries(e,function(e,s){n(t,e,function(e,n){t=n,s(e)})},function(e){i(e,t)})},s.inject=s.reduce,s.foldl=s.reduce,s.reduceRight=function(e,t,n,i){var o=a(e,function(e){return e}).reverse();s.reduce(o,t,n,i)},s.foldr=s.reduceRight;var f=function(e,t,n,s){var i=[];t=a(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n&&i.push(e),t()})},function(){s(a(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};s.filter=h(f),s.filterSeries=c(f),s.select=s.filter,s.selectSeries=s.filterSeries;var g=function(e,t,n,s){var i=[];t=a(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n||i.push(e),t()})},function(){s(a(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};s.reject=h(g),s.rejectSeries=c(g);var m=function(e,t,n,s){e(t,function(e,t){n(e,function(n){n?(s(e),s=function(){}):t()})},function(){s()})};s.detect=h(m),s.detectSeries=c(m),s.some=function(e,t,n){s.each(e,function(e,s){t(e,function(e){e&&(n(!0),n=function(){}),s()})},function(){n(!1)})},s.any=s.some,s.every=function(e,t,n){s.each(e,function(e,s){t(e,function(e){e||(n(!1),n=function(){}),s()})},function(){n(!0)})},s.all=s.every,s.sortBy=function(e,t,n){s.map(e,function(e,n){t(e,function(t,s){t?n(t):n(null,{value:e,criteria:s})})},function(e,t){if(e)return n(e);var s=function(e,t){var n=e.criteria,s=t.criteria;return s>n?-1:n>s?1:0};n(null,a(t.sort(s),function(e){return e.value}))})},s.auto=function(e,t){t=t||function(){};var n=r(e);if(!n.length)return t(null);var a={},l=[],h=function(e){l.unshift(e)},u=function(e){for(var t=0;l.length>t;t+=1)if(l[t]===e)return l.splice(t,1),void 0},c=function(){i(l.slice(0),function(e){e()})};h(function(){r(a).length===n.length&&(t(null,a),t=function(){})}),i(n,function(n){var l=e[n]instanceof Function?[e[n]]:e[n],d=function(e){var o=Array.prototype.slice.call(arguments,1);if(1>=o.length&&(o=o[0]),e){var l={};i(r(a),function(e){l[e]=a[e]}),l[n]=o,t(e,l),t=function(){}}else a[n]=o,s.setImmediate(c)},p=l.slice(0,Math.abs(l.length-1))||[],f=function(){return o(p,function(e,t){return e&&a.hasOwnProperty(t)},!0)&&!a.hasOwnProperty(n)};if(f())l[l.length-1](d,a);else{var g=function(){f()&&(u(g),l[l.length-1](d,a))};h(g)}})},s.waterfall=function(e,t){if(t=t||function(){},e.constructor!==Array){var n=Error("First argument to waterfall must be an array of functions");return t(n)}if(!e.length)return t();var i=function(e){return function(n){if(n)t.apply(null,arguments),t=function(){};else{var a=Array.prototype.slice.call(arguments,1),o=e.next();o?a.push(i(o)):a.push(t),s.setImmediate(function(){e.apply(null,a)})}}};i(s.iterator(e))()};var b=function(e,t,n){if(n=n||function(){},t.constructor===Array)e.map(t,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);1>=n.length&&(n=n[0]),t.call(null,e,n)})},n);else{var s={};e.each(r(t),function(e,n){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);1>=i.length&&(i=i[0]),s[e]=i,n(t)})},function(e){n(e,s)})}};s.parallel=function(e,t){b({map:s.map,each:s.each},e,t)},s.parallelLimit=function(e,t,n){b({map:p(t),each:l(t)},e,n)},s.series=function(e,t){if(t=t||function(){},e.constructor===Array)s.mapSeries(e,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);1>=n.length&&(n=n[0]),t.call(null,e,n)})},t);else{var n={};s.eachSeries(r(e),function(t,s){e[t](function(e){var i=Array.prototype.slice.call(arguments,1);1>=i.length&&(i=i[0]),n[t]=i,s(e)})},function(e){t(e,n)})}},s.iterator=function(e){var t=function(n){var s=function(){return e.length&&e[n].apply(null,arguments),s.next()};return s.next=function(){return e.length-1>n?t(n+1):null},s};return t(0)},s.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var v=function(e,t,n,s){var i=[];e(t,function(e,t){n(e,function(e,n){i=i.concat(n||[]),t(e)})},function(e){s(e,i)})};s.concat=h(v),s.concatSeries=c(v),s.whilst=function(e,t,n){e()?t(function(i){return i?n(i):(s.whilst(e,t,n),void 0)}):n()},s.doWhilst=function(e,t,n){e(function(i){return i?n(i):(t()?s.doWhilst(e,t,n):n(),void 0)})},s.until=function(e,t,n){e()?n():t(function(i){return i?n(i):(s.until(e,t,n),void 0)})},s.doUntil=function(e,t,n){e(function(i){return i?n(i):(t()?n():s.doUntil(e,t,n),void 0)})},s.queue=function(t,n){function a(e,t,a,o){t.constructor!==Array&&(t=[t]),i(t,function(t){var i={data:t,callback:"function"==typeof o?o:null};a?e.tasks.unshift(i):e.tasks.push(i),e.saturated&&e.tasks.length===n&&e.saturated(),s.setImmediate(e.process)})}void 0===n&&(n=1);var o=0,r={tasks:[],concurrency:n,saturated:null,empty:null,drain:null,push:function(e,t){a(r,e,!1,t)},unshift:function(e,t){a(r,e,!0,t)},process:function(){if(r.concurrency>o&&r.tasks.length){var n=r.tasks.shift();r.empty&&0===r.tasks.length&&r.empty(),o+=1;var s=function(){o-=1,n.callback&&n.callback.apply(n,arguments),r.drain&&0===r.tasks.length+o&&r.drain(),r.process()},i=e(s);t(n.data,i)}},length:function(){return r.tasks.length},running:function(){return o}};return r},s.cargo=function(e,t){var n=!1,o=[],r={tasks:o,payload:t,saturated:null,empty:null,drain:null,push:function(e,n){e.constructor!==Array&&(e=[e]),i(e,function(e){o.push({data:e,callback:"function"==typeof n?n:null}),r.saturated&&o.length===t&&r.saturated()}),s.setImmediate(r.process)},process:function l(){if(!n){if(0===o.length)return r.drain&&r.drain(),void 0;var s="number"==typeof t?o.splice(0,t):o.splice(0),h=a(s,function(e){return e.data});r.empty&&r.empty(),n=!0,e(h,function(){n=!1;var e=arguments;i(s,function(t){t.callback&&t.callback.apply(null,e)}),l()})}},length:function(){return o.length},running:function(){return n}};return r};var x=function(e){return function(t){var n=Array.prototype.slice.call(arguments,1);t.apply(null,n.concat([function(t){var n=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[e]&&i(n,function(t){console[e](t)}))}]))}};s.log=x("log"),s.dir=x("dir"),s.memoize=function(e,t){var n={},s={};t=t||function(e){return e};var i=function(){var i=Array.prototype.slice.call(arguments),a=i.pop(),o=t.apply(null,i);o in n?a.apply(null,n[o]):o in s?s[o].push(a):(s[o]=[a],e.apply(null,i.concat([function(){n[o]=arguments;var e=s[o];delete s[o];for(var t=0,i=e.length;i>t;t++)e[t].apply(null,arguments)}])))};return i.memo=n,i.unmemoized=e,i},s.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},s.times=function(e,t,n){for(var i=[],a=0;e>a;a++)i.push(a);return s.map(i,t,n)},s.timesSeries=function(e,t,n){for(var i=[],a=0;e>a;a++)i.push(a);return s.mapSeries(i,t,n)},s.compose=function(){var e=Array.prototype.reverse.call(arguments);return function(){var t=this,n=Array.prototype.slice.call(arguments),i=n.pop();s.reduce(e,n,function(e,n,s){n.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);s(e,t)}]))},function(e,n){i.apply(t,[e].concat(n))})}};var y=function(e,t){var n=function(){var n=this,s=Array.prototype.slice.call(arguments),i=s.pop();return e(t,function(e,t){e.apply(n,s.concat([t]))},i)};if(arguments.length>2){var s=Array.prototype.slice.call(arguments,2);return n.apply(this,s)}return n};s.applyEach=h(y),s.applyEachSeries=c(y),s.forever=function(e,t){function n(s){if(s){if(t)return t(s);throw s}e(n)}n()},define!==void 0&&define.amd?define("async",[],function(){return s}):"undefined"!=typeof module&&module.exports?module.exports=s:t.async=s}(),define("tools",[],function(){function e(e){var t=e.split(/[\r\n]+/g),n={},s=null;return n.GlobalOptionFilter=[],n.Feature=[],t.forEach(function(e){s=e.split(/=(.+)/),""!==s[0]&&(-1!==s[0].search(/\[.*\]/)?n.moduleKey=s[0].replace("[","").replace("]",""):"GlobalOptionFilter"===s[0]?n[s[0]].push(s[1]):"Feature"===s[0]?n[s[0]].push(s[1]):n[s[0]]="Versification"===s[0]?s[1].toLowerCase():s[1])}),n}function t(e){return function(t,n){return t[e]>n[e]?1:t[e]<n[e]?-1:0}}function n(){var e=arguments;return function(n,s){for(var i=0,a=0,o=e.length;0===a&&o>i;)a=t(e[i])(n,s),i++;return a}}function s(e){for(var t=[],n=0;e.length>n;n++)e[n]&&t.push(e[n]);return t}function i(e){var t={};return e.forEach(function(e){e&&(t[e.book]=e.id)}),t}function a(e){var t=[];for(var n in e)t.push(e[n]);return t}return{readConf:e,dynamicSort:t,dynamicSortMultiple:n,cleanArray:s,convertArray:i,convertObject:a}}),function(e,t,n){"function"==typeof define?define("idb",t):"undefined"!=typeof module&&module.exports?module.exports=t():n[e]=t()}("IDBStore",function(){var e=function(e){throw e},t={storeName:"Store",storePrefix:"IDBWrapper-",dbVersion:1,keyPath:"id",autoIncrement:!0,onStoreReady:function(){},onError:e,indexes:[]},n=function(e,n){n===void 0&&"function"==typeof e&&(n=e),"[object Object]"!=Object.prototype.toString.call(e)&&(e={});for(var s in t)this[s]=e[s]!==void 0?e[s]:t[s];this.dbName=this.storePrefix+this.storeName,this.dbVersion=parseInt(this.dbVersion,10)||1,n&&(this.onStoreReady=n),s="object"==typeof window?window:self,this.idb=s.indexedDB||s.webkitIndexedDB||s.mozIndexedDB,this.keyRange=s.IDBKeyRange||s.webkitIDBKeyRange||s.mozIDBKeyRange,this.features={hasAutoIncrement:!s.mozIndexedDB},this.consts={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange",NEXT:"next",NEXT_NO_DUPLICATE:"nextunique",PREV:"prev",PREV_NO_DUPLICATE:"prevunique"},this.openDB()};n.prototype={constructor:n,version:"1.4.1",db:null,dbName:null,dbVersion:null,store:null,storeName:null,keyPath:null,autoIncrement:null,indexes:null,features:null,onStoreReady:null,onError:null,_insertIdCount:0,openDB:function(){var e=this.idb.open(this.dbName,this.dbVersion),t=!1;e.onerror=function(e){var t=!1;"error"in e.target?t="VersionError"==e.target.error.name:"errorCode"in e.target&&(t=12==e.target.errorCode),t?this.onError(Error("The version number provided is lower than the existing one.")):this.onError(e)}.bind(this),e.onsuccess=function(e){if(!t)if(this.db)this.onStoreReady();else if(this.db=e.target.result,"string"==typeof this.db.version)this.onError(Error("The IndexedDB implementation in this browser is outdated. Please upgrade your browser."));else if(this.db.objectStoreNames.contains(this.storeName)){this.store=this.db.transaction([this.storeName],this.consts.READ_ONLY).objectStore(this.storeName);var n=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach(function(e){var s=e.name;s?(this.normalizeIndexData(e),this.hasIndex(s)?(this.indexComplies(this.store.index(s),e)||(t=!0,this.onError(Error('Cannot modify index "'+s+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),n.splice(n.indexOf(s),1)):(t=!0,this.onError(Error('Cannot create new index "'+s+'" for current version. Please bump version number to '+(this.dbVersion+1)+".")))):(t=!0,this.onError(Error("Cannot create index: No index name given.")))},this),n.length&&(t=!0,this.onError(Error('Cannot delete index(es) "'+(""+n)+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),t||this.onStoreReady()}else this.onError(Error("Something is wrong with the IndexedDB implementation in this browser. Please upgrade your browser."))}.bind(this),e.onupgradeneeded=function(e){this.db=e.target.result,this.db.objectStoreNames.contains(this.storeName)?this.store=e.target.transaction.objectStore(this.storeName):(e={autoIncrement:this.autoIncrement},null!==this.keyPath&&(e.keyPath=this.keyPath),this.store=this.db.createObjectStore(this.storeName,e));var n=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach(function(e){var s=e.name;s||(t=!0,this.onError(Error("Cannot create index: No index name given."))),this.normalizeIndexData(e),this.hasIndex(s)?(this.indexComplies(this.store.index(s),e)||(this.store.deleteIndex(s),this.store.createIndex(s,e.keyPath,{unique:e.unique,multiEntry:e.multiEntry})),n.splice(n.indexOf(s),1)):this.store.createIndex(s,e.keyPath,{unique:e.unique,multiEntry:e.multiEntry})},this),n.length&&n.forEach(function(e){this.store.deleteIndex(e)},this)}.bind(this)},deleteDatabase:function(){this.idb.deleteDatabase&&this.idb.deleteDatabase(this.dbName)},put:function(t,n,i,a){null!==this.keyPath&&(a=i,i=n,n=t),a||(a=e),i||(i=s);var o=!1,r=null,l=this.db.transaction([this.storeName],this.consts.READ_WRITE);return l.oncomplete=function(){(o?i:a)(r)},l.onabort=a,l.onerror=a,null!==this.keyPath?(this._addIdPropertyIfNeeded(n),t=l.objectStore(this.storeName).put(n)):t=l.objectStore(this.storeName).put(n,t),t.onsuccess=function(e){o=!0,r=e.target.result
},t.onerror=a,l},get:function(t,n,i){i||(i=e),n||(n=s);var a=!1,o=null,r=this.db.transaction([this.storeName],this.consts.READ_ONLY);return r.oncomplete=function(){(a?n:i)(o)},r.onabort=i,r.onerror=i,t=r.objectStore(this.storeName).get(t),t.onsuccess=function(e){a=!0,o=e.target.result},t.onerror=i,r},remove:function(t,n,i){i||(i=e),n||(n=s);var a=!1,o=null,r=this.db.transaction([this.storeName],this.consts.READ_WRITE);return r.oncomplete=function(){(a?n:i)(o)},r.onabort=i,r.onerror=i,t=r.objectStore(this.storeName)["delete"](t),t.onsuccess=function(e){a=!0,o=e.target.result},t.onerror=i,r},batch:function(t,n,i){i||(i=e),n||(n=s),"[object Array]"!=Object.prototype.toString.call(t)&&i(Error("dataArray argument must be of type Array."));var a=this.db.transaction([this.storeName],this.consts.READ_WRITE);a.oncomplete=function(){(l?n:i)(l)},a.onabort=i,a.onerror=i;var o=t.length,r=!1,l=!1,h=function(){o--,0===o&&!r&&(l=r=!0)};return t.forEach(function(e){var t=e.type,n=e.key,s=e.value,e=function(e){a.abort(),r||(r=!0,i(e,t,n))};"remove"==t?(s=a.objectStore(this.storeName)["delete"](n),s.onsuccess=h,s.onerror=e):"put"==t&&(null!==this.keyPath?(this._addIdPropertyIfNeeded(s),s=a.objectStore(this.storeName).put(s)):s=a.objectStore(this.storeName).put(s,n),s.onsuccess=h,s.onerror=e)},this),a},putBatch:function(e,t,n){return this.batch(e.map(function(e){return{type:"put",value:e}}),t,n)},removeBatch:function(e,t,n){return this.batch(e.map(function(e){return{type:"remove",key:e}}),t,n)},getBatch:function(t,n,i,a){i||(i=e),n||(n=s),a||(a="sparse"),"[object Array]"!=Object.prototype.toString.call(t)&&i(Error("keyArray argument must be of type Array."));var o=this.db.transaction([this.storeName],this.consts.READ_ONLY);o.oncomplete=function(){(h?n:i)(u)},o.onabort=i,o.onerror=i;var r=[],l=t.length,h=!1,u=null,c=function(e){e.target.result||"dense"==a?r.push(e.target.result):"sparse"==a&&r.length++,l--,0===l&&(h=!0,u=r)};return t.forEach(function(e){e=o.objectStore(this.storeName).get(e),e.onsuccess=c,e.onerror=function(e){u=e,i(e),o.abort()}},this),o},getAll:function(t,n){n||(n=e),t||(t=s);var i=this.db.transaction([this.storeName],this.consts.READ_ONLY),a=i.objectStore(this.storeName);return a.getAll?this._getAllNative(i,a,t,n):this._getAllCursor(i,a,t,n),i},_getAllNative:function(e,t,n,s){var i=!1,a=null;e.oncomplete=function(){(i?n:s)(a)},e.onabort=s,e.onerror=s,e=t.getAll(),e.onsuccess=function(e){i=!0,a=e.target.result},e.onerror=s},_getAllCursor:function(e,t,n,s){var i=[],a=!1,o=null;e.oncomplete=function(){(a?n:s)(o)},e.onabort=s,e.onerror=s,e=t.openCursor(),e.onsuccess=function(e){(e=e.target.result)?(i.push(e.value),e["continue"]()):(a=!0,o=i)},e.onError=s},clear:function(t,n){n||(n=e),t||(t=s);var i=!1,a=null,o=this.db.transaction([this.storeName],this.consts.READ_WRITE);o.oncomplete=function(){(i?t:n)(a)},o.onabort=n,o.onerror=n;var r=o.objectStore(this.storeName).clear();return r.onsuccess=function(e){i=!0,a=e.target.result},r.onerror=n,o},_addIdPropertyIfNeeded:function(e){!this.features.hasAutoIncrement&&e[this.keyPath]===void 0&&(e[this.keyPath]=this._insertIdCount++ +Date.now())},getIndexList:function(){return this.store.indexNames},hasIndex:function(e){return this.store.indexNames.contains(e)},normalizeIndexData:function(e){e.keyPath=e.keyPath||e.name,e.unique=!!e.unique,e.multiEntry=!!e.multiEntry},indexComplies:function(e,t){return["keyPath","unique","multiEntry"].every(function(n){if("multiEntry"==n&&void 0===e[n]&&!1===t[n])return!0;if("keyPath"==n&&"[object Array]"==Object.prototype.toString.call(t[n])){var n=t.keyPath,s=e.keyPath;if("string"==typeof s)return""+n==s;if("function"!=typeof s.contains&&"function"!=typeof s.indexOf||s.length!==n.length)return!1;for(var i=0,a=n.length;a>i;i++)if(!(s.contains&&s.contains(n[i])||s.indexOf(-1!==n[i])))return!1;return!0}return t[n]==e[n]})},iterate:function(t,n){var n=a({index:null,order:"ASC",autoContinue:!0,filterDuplicates:!1,keyRange:null,writeAccess:!1,onEnd:null,onError:e},n||{}),s="desc"==n.order.toLowerCase()?"PREV":"NEXT";n.filterDuplicates&&(s+="_NO_DUPLICATE");var i=!1,o=this.db.transaction([this.storeName],this.consts[n.writeAccess?"READ_WRITE":"READ_ONLY"]),r=o.objectStore(this.storeName);return n.index&&(r=r.index(n.index)),o.oncomplete=function(){i?n.onEnd?n.onEnd():t(null):n.onError(null)},o.onabort=n.onError,o.onerror=n.onError,s=r.openCursor(n.keyRange,this.consts[s]),s.onerror=n.onError,s.onsuccess=function(e){(e=e.target.result)?(t(e.value,e,o),n.autoContinue&&e["continue"]()):i=!0},o},query:function(e,t){var n=[],t=t||{};return t.onEnd=function(){e(n)},this.iterate(function(e){n.push(e)},t)},count:function(t,n){var n=a({index:null,keyRange:null},n||{}),s=n.onError||e,i=!1,o=null,r=this.db.transaction([this.storeName],this.consts.READ_ONLY);r.oncomplete=function(){(i?t:s)(o)},r.onabort=s,r.onerror=s;var l=r.objectStore(this.storeName);return n.index&&(l=l.index(n.index)),l=l.count(n.keyRange),l.onsuccess=function(e){i=!0,o=e.target.result},l.onError=s,r},makeKeyRange:function(e){var t=e.lower!==void 0,n=e.upper!==void 0,s=e.only!==void 0;switch(!0){case s:e=this.keyRange.only(e.only);break;case t&&n:e=this.keyRange.bound(e.lower,e.upper,e.excludeLower,e.excludeUpper);break;case t:e=this.keyRange.lowerBound(e.lower,e.excludeLower);break;case n:e=this.keyRange.upperBound(e.upper,e.excludeUpper);break;default:throw Error('Cannot create KeyRange. Provide one or both of "lower" or "upper" value, or an "only" value.')}return e}};var s=function(){},i={},a=function(e,t){var n,s;for(n in t)s=t[n],s!==i[n]&&s!==e[n]&&(e[n]=s);return e};return n.version=n.prototype.version,n},this),define("idbPluginWrapper",["idb"],function(e){function t(t){s?t(null,i):i=new e({storeName:"swordjs",dbVersion:4,indexes:[{name:"modules",keyPath:"moduleKey",unique:!0}],onStoreReady:function(){s=!0,t(null,i)},onError:function(e){s=!1,t(e)}})}function n(){return e}var s=!1,i=null;return{getDB:t,getIDBWrapper:n}}),define("dataMgr",["async","tools","idbPluginWrapper"],function(e,t,n){function s(e,t){n.getDB(function(n,s){n?t(n):s.get(e,function(e){t(null,e)},function(e){t(e)})})}function i(e,s){var i=new FileReader;i.readAsText(e),i.onload=function(e){var i=t.readConf(e.target.result);n.getDB(function(e,t){e?s(e):t.put(i,function(e){s(null,{id:e,modKey:i.moduleKey,v11n:i.Versification})},function(e){s(e)})})}}function a(t,s,i){var a=(t.length,{});a.docId=s.id,e.eachSeries(t,function(e,t){var o=e.name.split("/"),r=o[o.length-3];n.getDB(function(n,l){n?i(n):l.put({fileName:o[o.length-1],modKey:s.modKey,driver:r,blob:e.blob},function(e){a[o[o.length-1].split(".")[0]]=e,t(null)},function(e){t(e)})})},function(e){e?i(e):o(a,i)})}function o(e,t){n.getDB(function(n,s){n?t(n):s.get(e.docId,function(n){n.nt=e.nt,n.ot=e.ot,s.put(n,function(){t(null)},function(e){t(e)})},function(e){t(e)})})}function r(e,t){n.getDB(function(n,s){n?t(n):s.get(e,function(e){t(null,e.blob)},function(e){t(e)})})}function l(e,t,s,i){n.getDB(function(n,a){n?i(n):a.put({modKey:s.modKey,ot:e,nt:t},function(e){a.get(s.id,function(t){t.bcvPosID=e,a.put(t,function(){i(null)},function(e){i(e)})},function(e){i(e)})},function(e){i(e)})})}function h(e){n.getDB(function(t,n){t?e(t):n.query(function(t){e(null,t)},{onError:function(t){e(t)},index:"modules"})})}function u(e,t){n.getDB(function(n,s){n?t(n):s.remove(e,t(null),function(e){t(e)})})}function c(e,s){n.getDB(function(n,i){n?s&&s(n):h(function(n,a){if(n)s&&s(n);else{var o=!1;a.forEach(function(n){if(n.moduleKey===e){o=!0;var a=n.blobIds?t.convertObject(n.blobIds):[n.bcvPosID,n.nt,n.ot,n.id];a=a.filter(function(e){return e}),i.removeBatch(a,function(){s&&s(null)},function(e){s&&s(e)})}}),o||s({message:"Couldn't find the module."})}})})}function d(){n.getDB(function(e,t){e?inCallback(e):t.clear(function(){},function(e){console.log(e)})})}function p(){return n.getIDBWrapper()}return{clearDatabase:d,saveConfig:i,saveModule:a,saveBCVPos:l,getBlob:r,get:s,remove:u,removeModule:c,getModules:h,getIDBWrapper:p}}),function(){function e(e,t){var n=e.split("."),s=p;!(n[0]in s)&&s.execScript&&s.execScript("var "+n[0]);for(var i;n.length&&(i=n.shift());)n.length||t===c?s=s[i]?s[i]:s[i]={}:s[i]=t}function t(e){var t,n,s,i,a,o,r,l,h,u=e.length,c=0,d=Number.POSITIVE_INFINITY;for(l=0;u>l;++l)e[l]>c&&(c=e[l]),d>e[l]&&(d=e[l]);for(t=1<<c,n=new(f?Uint32Array:Array)(t),s=1,i=0,a=2;c>=s;){for(l=0;u>l;++l)if(e[l]===s){for(o=0,r=i,h=0;s>h;++h)o=o<<1|1&r,r>>=1;for(h=o;t>h;h+=a)n[h]=s<<16|l;++i}++s,i<<=1,a<<=1}return[n,c,d]}function n(e,t,n){this.t=[],this.q=n?n:32768,this.u=0,this.a=t===c?0:t,this.d=this.e=0,this.input=f?new Uint8Array(e):e,this.c=new(f?Uint8Array:Array)(this.q),this.b=0,this.s=this.l=!1,this.f=0,this.status=g}function s(e,t){for(var n,s=e.e,i=e.d,a=e.input,o=e.a;t>i;){if(o>=a.length)return-1;n=a[o++],s|=n<<i,i+=8}return n=s&(1<<t)-1,e.e=s>>>t,e.d=i-t,e.a=o,n}function i(e,t){for(var n,s,i,a=e.e,o=e.d,r=e.input,l=e.a,h=t[0],u=t[1];u>o;){if(l>=r.length)return-1;n=r[l++],a|=n<<o,o+=8}return s=h[a&(1<<u)-1],i=s>>>16,e.e=a>>i,e.d=o-i,e.a=l,65535&s}function a(e){e.r=e.a,e.p=e.d,e.o=e.e}function o(e){e.a=e.r,e.d=e.p,e.e=e.o}function r(e){function n(){function e(e,t,n){for(var a,o,r,l,h=0,h=0;e>h;){if(a=i(this,t),0>a)throw Error("not enough input");switch(a){case 16:if(0>(l=s(this,2)))throw Error("not enough input");for(r=3+l;r--;)n[h++]=o;break;case 17:if(0>(l=s(this,3)))throw Error("not enough input");for(r=3+l;r--;)n[h++]=0;o=0;break;case 18:if(0>(l=s(this,7)))throw Error("not enough input");for(r=11+l;r--;)n[h++]=0;o=0;break;default:o=n[h++]=a}}return n}var n;for(g=0;h>g;++g){if(0>(n=s(this,3)))throw Error("not enough input");p[x[g]]=n}u=t(p),c=new(f?Uint8Array:Array)(r),d=new(f?Uint8Array:Array)(l),this.k=t(e.call(this,r,u,c)),this.n=t(e.call(this,l,u,d))}var r,l,h,u,c,d,p=new(f?Uint8Array:Array)(x.length),g=0;if(e.status=3,a(e),r=s(e,5)+257,l=s(e,5)+1,h=s(e,4)+4,0>r||0>l||0>h)return o(e),-1;try{n.call(e)}catch(m){return o(e),-1}return e.status=4,0}function l(e){var t,n,r,l,u,c=e.c,d=e.b,p=e.k,f=e.n,g=c.length;for(e.status=5;;){if(a(e),t=i(e,p),0>t)return e.b=d,o(e),-1;if(256===t)break;if(256>t)d===g&&(c=h(e),g=c.length),c[d++]=t;else{if(n=t-257,l=w[n],_[n]>0){if(u=s(e,_[n]),0>u)return e.b=d,o(e),-1;l+=u}if(t=i(e,f),0>t)return e.b=d,o(e),-1;if(r=P[t],T[t]>0){if(u=s(e,T[t]),0>u)return e.b=d,o(e),-1;r+=u}for(d+l>=g&&(c=h(e),g=c.length);l--;)c[d]=c[d++-r];if(e.a===e.input.length)return e.b=d,-1}}for(;e.d>=8;)e.d-=8,e.a--;e.b=d,e.status=6}function h(e){var t,n,s,i,a=0|e.input.length/e.a+1,o=e.input,r=e.c;return 2>a?(n=(o.length-e.a)/e.k[2],i=0|258*(n/2),s=r.length>i?r.length+i:r.length<<1):s=r.length*a,f?(t=new Uint8Array(s),t.set(r)):t=r,e.c=t,e.c}function u(e){this.input=e===c?new(f?Uint8Array:Array):e,this.a=0,this.h=new n(this.input,this.a),this.c=this.h.c}var c=void 0,d=!0,p=this,f="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,g=0;n.prototype.i=function(e,t){var n=!1;for(e!==c&&(this.input=e),t!==c&&(this.a=t);!n;)switch(this.status){case g:case 1:var i,u=c;if(this.status=1,a(this),0>(u=s(this,3)))o(this),i=-1;else{switch(1&u&&(this.l=d),u>>>=1){case 0:this.g=0;break;case 1:this.g=1;break;case 2:this.g=2;break;default:throw Error("unknown BTYPE: "+u)}this.status=2,i=c}0>i&&(n=d);break;case 2:case 3:switch(this.g){case 0:var p,m=c,b=c,v=this.input,x=this.a;if(this.status=3,x+4>=v.length)p=-1;else{if(m=v[x++]|v[x++]<<8,b=v[x++]|v[x++]<<8,m===~b)throw Error("invalid uncompressed block header: length verify");this.d=this.e=0,this.a=x,this.m=m,this.status=4,p=c}0>p&&(n=d);break;case 1:this.status=3,this.k=E,this.n=M,this.status=4;break;case 2:0>r(this)&&(n=d)}break;case 4:case 5:switch(this.g){case 0:var y;e:{var w=this.input,C=this.a,_=this.c,S=this.b,P=this.m;for(this.status=5;P--;){if(S===_.length&&(_=h(this)),C>=w.length){this.a=C,this.b=S,this.m=P+1,y=-1;break e}_[S++]=w[C++]}0>P&&(this.status=6),this.a=C,this.b=S,y=0}0>y&&(n=d);break;case 1:case 2:0>l(this)&&(n=d)}break;case 6:this.l?n=d:this.status=g}var k,T=this.b;return this.s?f?(k=new Uint8Array(T),k.set(this.c.subarray(this.f,T))):k=this.c.slice(this.f,T):k=f?this.c.subarray(this.f,T):this.c.slice(this.f,T),this.buffer=k,this.f=T,this.buffer};var m,b,v=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],x=f?new Uint16Array(v):v,y=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],w=f?new Uint16Array(y):y,C=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],_=f?new Uint8Array(C):C,S=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],P=f?new Uint16Array(S):S,k=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],T=f?new Uint8Array(k):k,I=new(f?Uint8Array:Array)(288);for(m=0,b=I.length;b>m;++m)I[m]=143>=m?8:255>=m?9:279>=m?7:8;var R,A,E=t(I),N=new(f?Uint8Array:Array)(30);for(R=0,A=N.length;A>R;++R)N[R]=5;var M=t(N);n.prototype.j=function(){return f?this.c.subarray(0,this.b):this.c.slice(0,this.b)},u.prototype.i=function(e){var t;if(e!==c)if(f){var n=new Uint8Array(this.input.length+e.length);n.set(this.input,0),n.set(e,this.input.length),this.input=n}else this.input=this.input.concat(e);var s;if(s=this.method===c){var i,a=this.a,o=this.input,r=o[a++],l=o[a++];if(r===c||l===c)i=-1;else{switch(15&r){case 8:this.method=8;break;default:throw Error("unsupported compression method")}if(0!==((r<<8)+l)%31)throw Error("invalid fcheck flag:"+((r<<8)+l)%31);if(32&l)throw Error("fdict flag is not supported");this.a=a,i=c}s=0>i}return s?new(f?Uint8Array:Array):(t=this.h.i(this.input,this.a),this.a=this.h.a,t)},u.prototype.j=function(){return this.h.j()},e("Zlib.InflateStream",u),e("Zlib.InflateStream.prototype.decompress",u.prototype.i),e("Zlib.InflateStream.prototype.getBytes",u.prototype.j)}.call(this),define("inflateStream",function(e){return function(){var t;return t||e.Zlib}}(this)),define("zText",["async","inflateStream"],function(e,t){var n={},s=new FileReader,i=new FileReader;return n.getRawEntry=function(n,a,o,r,l,h){if(a[o[0].chapter-1]){var u=a[o[0].chapter-1].bookStartPos,c=a[o[0].chapter-1].startPos,d=a[o[0].chapter-1].length,p=u+c,f=p+d,g=n.slice(u,f);s.readAsArrayBuffer(g),s.onload=function(n){var s=new Uint8Array(n.target.result),u=new t.InflateStream,d=new Blob([u.decompress(s)]),p=[],f=0,g=0,m=0,b=!1;e.whilst(function(){return o.length>m},function(e){l&&!b?(f=1===o[m].chapter?0:a[o[m].chapter-2].startPos+a[o[m].chapter-2].length,g=c):(f=c+a[o[m].chapter-1].verses[o[m].verse-1].startPos,g=f+a[o[m].chapter-1].verses[o[m].verse-1].length),r?i.readAsText(d.slice(f,g),r):i.readAsText(d.slice(f,g),"CP1252"),i.onload=function(t){l&&!b?(""!==t.target.result&&p.push({text:t.target.result,osis:o[m].book+"."+o[m].chapter+".0",verse:0}),b=!0):(p.push({text:t.target.result,osis:o[m].osis,verse:o[m].verse}),m++),e()}},function(e){h(e,p)})}}else h({message:"Wrong passage. The requested chapter is not available in this module."})},n}),define("text",["module"],function(e){var t,n,s,i,a,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],r=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,h="undefined"!=typeof location&&location.href,u=h&&location.protocol&&location.protocol.replace(/\:/,""),c=h&&location.hostname,d=h&&(location.port||void 0),p={},f=e.config&&e.config()||{};return t={version:"2.0.10",strip:function(e){if(e){e=e.replace(r,"");var t=e.match(l);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:f.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(s){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,s,i=!1,a=e.indexOf("."),o=0===e.indexOf("./")||0===e.indexOf("../");return-1!==a&&(!o||a>1)?(t=e.substring(0,a),n=e.substring(a+1,e.length)):t=e,s=n||t,a=s.indexOf("!"),-1!==a&&(i="strip"===s.substring(a+1),s=s.substring(0,a),n?n=s:t=s),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,s,i){var a,o,r,l=t.xdRegExp.exec(e);return l?(a=l[2],o=l[3],o=o.split(":"),r=o[1],o=o[0],!(a&&a!==n||o&&o.toLowerCase()!==s.toLowerCase()||(r||o)&&r!==i)):!0},finishLoad:function(e,n,s,i){s=n?t.strip(s):s,f.isBuild&&(p[e]=s),i(s)},load:function(e,n,s,i){if(i.isBuild&&!i.inlineText)return s(),void 0;f.isBuild=i.isBuild;var a=t.parseName(e),o=a.moduleName+(a.ext?"."+a.ext:""),r=n.toUrl(o),l=f.useXhr||t.useXhr;return 0===r.indexOf("empty:")?(s(),void 0):(!h||l(r,u,c,d)?t.get(r,function(n){t.finishLoad(e,a.strip,n,s)},function(e){s.error&&s.error(e)}):n([o],function(e){t.finishLoad(a.moduleName+"."+a.ext,a.strip,e,s)}),void 0)},write:function(e,n,s){if(p.hasOwnProperty(n)){var i=t.jsEscape(p[n]);s.asModule(e+"!"+n,"define(function () { return '"+i+"';});\n")}},writeFile:function(e,n,s,i,a){var o=t.parseName(n),r=o.ext?"."+o.ext:"",l=o.moduleName+r,h=s.toUrl(o.moduleName+r)+".js";t.load(l,s,function(){var n=function(e){return i(h,e)};n.asModule=function(e,t){return i.asModule(e,h,t)},t.write(e,l,n,a)},a)}},"node"===f.env||!f.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=require.nodeRequire("fs"),t.get=function(e,t,s){try{var i=n.readFileSync(e,"utf8");0===i.indexOf("")&&(i=i.substring(1)),t(i)}catch(a){s(a)}}):"xhr"===f.env||!f.env&&t.createXhr()?t.get=function(e,n,s,i){var a,o=t.createXhr();if(o.open("GET",e,!0),i)for(a in i)i.hasOwnProperty(a)&&o.setRequestHeader(a.toLowerCase(),i[a]);f.onXhr&&f.onXhr(o,e),o.onreadystatechange=function(){var t,i;4===o.readyState&&(t=o.status,t>399&&600>t?(i=Error(e+" HTTP status: "+t),i.xhr=o,s(i)):n(o.responseText),f.onXhrComplete&&f.onXhrComplete(o,e))},o.send(null)}:"rhino"===f.env||!f.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,s,i="utf-8",a=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),r=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(a),i)),l="";try{for(n=new java.lang.StringBuffer,s=r.readLine(),s&&s.length()&&65279===s.charAt(0)&&(s=s.substring(1)),null!==s&&n.append(s);null!==(s=r.readLine());)n.append(o),n.append(s);l=""+n+""}finally{r.close()}t(l)}:("xpconnect"===f.env||!f.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(s=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),a="@mozilla.org/windows-registry-key;1"in s,t.get=function(e,t){var n,o,r,l={};a&&(e=e.replace(/\//g,"\\")),r=new FileUtils.File(e);try{n=s["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(r,1,0,!1),o=s["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),l),o.close(),n.close(),t(l.value)}catch(h){throw Error((r&&r.path||"")+": "+h)}}),t}),define("json",["text"],function(text){function cacheBust(e){return e=e.replace(CACHE_BUST_FLAG,""),e+=0>e.indexOf("?")?"?":"&",e+CACHE_BUST_QUERY_PARAM+"="+Math.round(2147483647*Math.random())}var CACHE_BUST_QUERY_PARAM="bust",CACHE_BUST_FLAG="!bust",jsonParse="undefined"!=typeof JSON&&"function"==typeof JSON.parse?JSON.parse:function(val){return eval("("+val+")")},buildMap={};return{load:function(e,t,n,s){!s.isBuild||s.inlineJSON!==!1&&-1===e.indexOf(CACHE_BUST_QUERY_PARAM+"=")?text.get(t.toUrl(e),function(t){s.isBuild?(buildMap[e]=t,n(t)):n(jsonParse(t))},n.error,{accept:"application/json"}):n(null)},normalize:function(e,t){return-1!==e.indexOf(CACHE_BUST_FLAG)&&(e=cacheBust(e)),t(e)},write:function(e,t,n){if(t in buildMap){var s=buildMap[t];n('define("'+e+"!"+t+'", function(){ return '+s+";});\n")}}}}),define("json!../data/kjv.json",function(){return{ot:[{name:"Genesis",abbrev:"Gen",maxChapter:50},{name:"Exodus",abbrev:"Exod",maxChapter:40},{name:"Leviticus",abbrev:"Lev",maxChapter:27},{name:"Numbers",abbrev:"Num",maxChapter:36},{name:"Deuteronomy",abbrev:"Deut",maxChapter:34},{name:"Joshua",abbrev:"Josh",maxChapter:24},{name:"Judges",abbrev:"Judg",maxChapter:21},{name:"Ruth",abbrev:"Ruth",maxChapter:4},{name:"I Samuel",abbrev:"1Sam",maxChapter:31},{name:"II Samuel",abbrev:"2Sam",maxChapter:24},{name:"I Kings",abbrev:"1Kgs",maxChapter:22},{name:"II Kings",abbrev:"2Kgs",maxChapter:25},{name:"I Chronicles",abbrev:"1Chr",maxChapter:29},{name:"II Chronicles",abbrev:"2Chr",maxChapter:36},{name:"Ezra",abbrev:"Ezra",maxChapter:10},{name:"Nehemiah",abbrev:"Neh",maxChapter:13},{name:"Esther",abbrev:"Esth",maxChapter:10},{name:"Job",abbrev:"Job",maxChapter:42},{name:"Psalms",abbrev:"Ps",maxChapter:150},{name:"Proverbs",abbrev:"Prov",maxChapter:31},{name:"Ecclesiastes",abbrev:"Eccl",maxChapter:12},{name:"Song of Solomon",abbrev:"Song",maxChapter:8},{name:"Isaiah",abbrev:"Isa",maxChapter:66},{name:"Jeremiah",abbrev:"Jer",maxChapter:52},{name:"Lamentations",abbrev:"Lam",maxChapter:5},{name:"Ezekiel",abbrev:"Ezek",maxChapter:48},{name:"Daniel",abbrev:"Dan",maxChapter:12},{name:"Hosea",abbrev:"Hos",maxChapter:14},{name:"Joel",abbrev:"Joel",maxChapter:3},{name:"Amos",abbrev:"Amos",maxChapter:9},{name:"Obadiah",abbrev:"Obad",maxChapter:1},{name:"Jonah",abbrev:"Jonah",maxChapter:4},{name:"Micah",abbrev:"Mic",maxChapter:7},{name:"Nahum",abbrev:"Nah",maxChapter:3},{name:"Habakkuk",abbrev:"Hab",maxChapter:3},{name:"Zephaniah",abbrev:"Zeph",maxChapter:3},{name:"Haggai",abbrev:"Hag",maxChapter:2},{name:"Zechariah",abbrev:"Zech",maxChapter:14},{name:"Malachi",abbrev:"Mal",maxChapter:4}],nt:[{name:"Matthew",abbrev:"Matt",maxChapter:28},{name:"Mark",abbrev:"Mark",maxChapter:16},{name:"Luke",abbrev:"Luke",maxChapter:24},{name:"John",abbrev:"John",maxChapter:21},{name:"Acts",abbrev:"Acts",maxChapter:28},{name:"Romans",abbrev:"Rom",maxChapter:16},{name:"I Corinthians",abbrev:"1Cor",maxChapter:16},{name:"II Corinthians",abbrev:"2Cor",maxChapter:13},{name:"Galatians",abbrev:"Gal",maxChapter:6},{name:"Ephesians",abbrev:"Eph",maxChapter:6},{name:"Philippians",abbrev:"Phil",maxChapter:4},{name:"Colossians",abbrev:"Col",maxChapter:4},{name:"I Thessalonians",abbrev:"1Thess",maxChapter:5},{name:"II Thessalonians",abbrev:"2Thess",maxChapter:3},{name:"I Timothy",abbrev:"1Tim",maxChapter:6},{name:"II Timothy",abbrev:"2Tim",maxChapter:4},{name:"Titus",abbrev:"Titus",maxChapter:3},{name:"Philemon",abbrev:"Phlm",maxChapter:1},{name:"Hebrews",abbrev:"Heb",maxChapter:13},{name:"James",abbrev:"Jas",maxChapter:5},{name:"I Peter",abbrev:"1Pet",maxChapter:5},{name:"II Peter",abbrev:"2Pet",maxChapter:3},{name:"I John",abbrev:"1John",maxChapter:5},{name:"II John",abbrev:"2John",maxChapter:1},{name:"III John",abbrev:"3John",maxChapter:1},{name:"Jude",abbrev:"Jude",maxChapter:1},{name:"Revelation of John",abbrev:"Rev",maxChapter:22}],osisToBookNum:{Gen:0,Exod:1,Lev:2,Num:3,Deut:4,Josh:5,Judg:6,Ruth:7,"1Sam":8,"2Sam":9,"1Kgs":10,"2Kgs":11,"1Chr":12,"2Chr":13,Ezra:14,Neh:15,Esth:16,Job:17,Ps:18,Prov:19,Eccl:20,Song:21,Isa:22,Jer:23,Lam:24,Ezek:25,Dan:26,Hos:27,Joel:28,Amos:29,Obad:30,Jonah:31,Mic:32,Nah:33,Hab:34,Zeph:35,Hag:36,Zech:37,Mal:38,Matt:39,Mark:40,Luke:41,John:42,Acts:43,Rom:44,"1Cor":45,"2Cor":46,Gal:47,Eph:48,Phil:49,Col:50,"1Thess":51,"2Thess":52,"1Tim":53,"2Tim":54,Titus:55,Phlm:56,Heb:57,Jas:58,"1Pet":59,"2Pet":60,"1John":61,"2John":62,"3John":63,Jude:64,Rev:65},versesInChapter:[[31,25,24,26,32,22,24,22,29,32,32,20,18,24,21,16,27,33,38,18,34,24,20,67,34,35,46,22,35,43,55,32,20,31,29,43,36,30,23,23,57,38,34,34,28,34,31,22,33,26],[22,25,22,31,23,30,25,32,35,29,10,51,22,31,27,36,16,27,25,26,36,31,33,18,40,37,21,43,46,38,18,35,23,35,35,38,29,31,43,38],[17,16,17,35,19,30,38,36,24,20,47,8,59,57,33,34,16,30,37,27,24,33,44,23,55,46,34],[54,34,51,49,31,27,89,26,23,36,35,16,33,45,41,50,13,32,22,29,35,41,30,25,18,65,23,31,40,16,54,42,56,29,34,13],[46,37,29,49,33,25,26,20,29,22,32,32,18,29,23,22,20,22,21,20,23,30,25,22,19,19,26,68,29,20,30,52,29,12],[18,24,17,24,15,27,26,35,27,43,23,24,33,15,63,10,18,28,51,9,45,34,16,33],[36,23,31,24,31,40,25,35,57,18,40,15,25,20,20,31,13,31,30,48,25],[22,23,18,22],[28,36,21,22,12,21,17,22,27,27,15,25,23,52,35,23,58,30,24,42,15,23,29,22,44,25,12,25,11,31,13],[27,32,39,12,25,23,29,18,13,19,27,31,39,33,37,23,29,33,43,26,22,51,39,25],[53,46,28,34,18,38,51,66,28,29,43,33,34,31,34,34,24,46,21,43,29,53],[18,25,27,44,27,33,20,29,37,36,21,21,25,29,38,20,41,37,37,21,26,20,37,20,30],[54,55,24,43,26,81,40,40,44,14,47,40,14,17,29,43,27,17,19,8,30,19,32,31,31,32,34,21,30],[17,18,17,22,14,42,22,18,31,19,23,16,22,15,19,14,19,34,11,37,20,12,21,27,28,23,9,27,36,27,21,33,25,33,27,23],[11,70,13,24,17,22,28,36,15,44],[11,20,32,23,19,19,73,18,38,39,36,47,31],[22,23,15,17,14,14,10,17,32,3],[22,13,26,21,27,30,21,22,35,22,20,25,28,22,35,22,16,21,29,29,34,30,17,25,6,14,23,28,25,31,40,22,33,37,16,33,24,41,30,24,34,17],[6,12,8,8,12,10,17,9,20,18,7,8,6,7,5,11,15,50,14,9,13,31,6,10,22,12,14,9,11,12,24,11,22,22,28,12,40,22,13,17,13,11,5,26,17,11,9,14,20,23,19,9,6,7,23,13,11,11,17,12,8,12,11,10,13,20,7,35,36,5,24,20,28,23,10,12,20,72,13,19,16,8,18,12,13,17,7,18,52,17,16,15,5,23,11,13,12,9,9,5,8,28,22,35,45,48,43,13,31,7,10,10,9,8,18,19,2,29,176,7,8,9,4,8,5,6,5,6,8,8,3,18,3,3,21,26,9,8,24,13,10,7,12,15,21,10,20,14,9,6],[33,22,35,27,23,35,27,36,18,32,31,28,25,35,33,33,28,24,29,30,31,29,35,34,28,28,27,28,27,33,31],[18,26,22,16,20,12,29,17,18,20,10,14],[17,17,11,16,16,13,13,14],[31,22,26,6,30,13,25,22,21,34,16,6,22,32,9,14,14,7,25,6,17,25,18,23,12,21,13,29,24,33,9,20,24,17,10,22,38,22,8,31,29,25,28,28,25,13,15,22,26,11,23,15,12,17,13,12,21,14,21,22,11,12,19,12,25,24],[19,37,25,31,31,30,34,22,26,25,23,17,27,22,21,21,27,23,15,18,14,30,40,10,38,24,22,17,32,24,40,44,26,22,19,32,21,28,18,16,18,22,13,30,5,28,7,47,39,46,64,34],[22,22,66,22,22],[28,10,27,17,17,14,27,18,11,22,25,28,23,23,8,63,24,32,14,49,32,31,49,27,17,21,36,26,21,26,18,32,33,31,15,38,28,23,29,49,26,20,27,31,25,24,23,35],[21,49,30,37,31,28,28,27,27,21,45,13],[11,23,5,19,15,11,16,14,17,15,12,14,16,9],[20,32,21],[15,16,15,13,27,14,17,14,15],[21],[17,10,10,11],[16,13,12,13,15,16,20],[15,13,19],[17,20,19],[18,15,20],[15,23],[21,13,10,14,11,15,14,23,17,12,17,14,9,21],[14,17,18,6],[25,23,17,25,48,34,29,34,38,42,30,50,58,36,39,28,27,35,30,34,46,46,39,51,46,75,66,20],[45,28,35,41,43,56,37,38,50,52,33,44,37,72,47,20],[80,52,38,44,39,49,50,56,62,42,54,59,35,35,32,31,37,43,48,47,38,71,56,53],[51,25,36,54,47,71,53,59,41,42,57,50,38,31,27,33,26,40,42,31,25],[26,47,26,37,42,15,60,40,43,48,30,25,52,28,41,40,34,28,41,38,40,30,35,27,27,32,44,31],[32,29,31,25,21,23,25,39,33,21,36,21,14,23,33,27],[31,16,23,21,13,20,40,13,27,33,34,31,13,40,58,24],[24,17,18,18,21,18,16,24,15,18,33,21,14],[24,21,29,31,26,18],[23,22,21,32,33,24],[30,30,21,23],[29,23,25,18],[10,20,13,18,28],[12,17,18],[20,15,16,16,25,21],[18,26,17,22],[16,15,15],[25],[14,18,19,16,14,20,28,13,28,39,40,29,25],[27,26,18,17,20],[25,25,22,19,14],[21,22,18],[10,29,24,21,21],[13],[14],[25],[20,29,22,11,14,17,17,13,21,11,19,17,18,20,8,21,18,24,21,15,27,21]]}}),define("json!../data/german.json",function(){return{ot:[{name:"Genesis",abbrev:"Gen",maxChapter:50},{name:"Exodus",abbrev:"Exod",maxChapter:40},{name:"Leviticus",abbrev:"Lev",maxChapter:27},{name:"Numbers",abbrev:"Num",maxChapter:36},{name:"Deuteronomy",abbrev:"Deut",maxChapter:34},{name:"Joshua",abbrev:"Josh",maxChapter:24},{name:"Judges",abbrev:"Judg",maxChapter:21},{name:"Ruth",abbrev:"Ruth",maxChapter:4},{name:"I Samuel",abbrev:"1Sam",maxChapter:31},{name:"II Samuel",abbrev:"2Sam",maxChapter:24},{name:"I Kings",abbrev:"1Kgs",maxChapter:22},{name:"II Kings",abbrev:"2Kgs",maxChapter:25},{name:"I Chronicles",abbrev:"1Chr",maxChapter:29},{name:"II Chronicles",abbrev:"2Chr",maxChapter:36},{name:"Ezra",abbrev:"Ezra",maxChapter:10},{name:"Nehemiah",abbrev:"Neh",maxChapter:13},{name:"Esther",abbrev:"Esth",maxChapter:10},{name:"Job",abbrev:"Job",maxChapter:42},{name:"Psalms",abbrev:"Ps",maxChapter:150},{name:"Proverbs",abbrev:"Prov",maxChapter:31},{name:"Ecclesiastes",abbrev:"Eccl",maxChapter:12},{name:"Song of Solomon",abbrev:"Song",maxChapter:8},{name:"Isaiah",abbrev:"Isa",maxChapter:66},{name:"Jeremiah",abbrev:"Jer",maxChapter:52},{name:"Lamentations",abbrev:"Lam",maxChapter:5},{name:"Ezekiel",abbrev:"Ezek",maxChapter:48},{name:"Daniel",abbrev:"Dan",maxChapter:12},{name:"Hosea",abbrev:"Hos",maxChapter:14},{name:"Joel",abbrev:"Joel",maxChapter:4},{name:"Amos",abbrev:"Amos",maxChapter:9},{name:"Obadiah",abbrev:"Obad",maxChapter:1},{name:"Jonah",abbrev:"Jonah",maxChapter:4},{name:"Micah",abbrev:"Mic",maxChapter:7},{name:"Nahum",abbrev:"Nah",maxChapter:3},{name:"Habakkuk",abbrev:"Hab",maxChapter:3},{name:"Zephaniah",abbrev:"Zeph",maxChapter:3},{name:"Haggai",abbrev:"Hag",maxChapter:2},{name:"Zechariah",abbrev:"Zech",maxChapter:14},{name:"Malachi",abbrev:"Mal",maxChapter:3}],versesInChapter:[[31,25,24,26,32,22,24,22,29,32,32,20,18,24,21,16,27,33,38,18,34,24,20,67,34,35,46,22,35,43,54,33,20,31,29,43,36,30,23,23,57,38,34,34,28,34,31,22,33,26],[22,25,22,31,23,30,29,28,35,29,10,51,22,31,27,36,16,27,25,26,37,30,33,18,40,37,21,43,46,38,18,35,23,35,35,38,29,31,43,38],[17,16,17,35,26,23,38,36,24,20,47,8,59,57,33,34,16,30,37,27,24,33,44,23,55,46,34],[54,34,51,49,31,27,89,26,23,36,35,16,33,45,41,35,28,32,22,29,35,41,30,25,19,65,23,31,39,17,54,42,56,29,34,13],[46,37,29,49,33,25,26,20,29,22,32,31,19,29,23,22,20,22,21,20,23,29,26,22,19,19,26,69,28,20,30,52,29,12],[18,24,17,24,15,27,26,35,27,43,23,24,33,15,63,10,18,28,51,9,45,34,16,33],[36,23,31,24,31,40,25,35,57,18,40,15,25,20,20,31,13,31,30,48,25],[22,23,18,22],[28,36,21,22,12,21,17,22,27,27,15,25,23,52,35,23,58,30,24,42,16,23,28,23,44,25,12,25,11,31,13],[27,32,39,12,25,23,29,18,13,19,27,31,39,33,37,23,29,32,44,26,22,51,39,25],[53,46,28,20,32,38,51,66,28,29,43,33,34,31,34,34,24,46,21,43,29,54],[18,25,27,44,27,33,20,29,37,36,20,22,25,29,39,20,41,37,37,21,26,20,37,20,30],[54,55,24,43,41,66,40,40,44,14,47,41,14,17,29,43,27,17,19,8,30,19,32,31,31,32,34,21,30],[18,17,17,22,14,42,22,18,31,19,23,16,23,14,19,14,19,34,11,37,20,12,21,27,28,23,9,27,36,27,21,33,25,33,27,23],[11,70,13,24,17,22,28,36,15,44],[11,20,38,17,19,19,73,18,37,40,36,47,31],[22,23,15,17,14,14,10,17,32,3],[22,13,26,21,27,30,21,22,35,22,20,25,28,22,35,22,16,21,29,29,34,30,17,25,6,14,23,28,25,31,40,22,33,37,16,33,24,41,30,32,26,17],[6,12,9,9,13,11,18,10,21,18,7,9,6,7,5,11,15,51,15,10,14,32,6,10,22,12,14,9,11,13,25,11,22,23,28,13,40,23,14,18,14,12,5,27,18,12,10,15,21,23,21,11,7,9,24,14,12,12,18,14,9,13,12,11,14,20,8,36,37,6,24,20,28,23,11,13,21,72,13,20,17,8,19,13,14,17,7,19,53,17,16,16,5,23,11,13,12,9,9,5,8,29,22,35,45,48,43,14,31,7,10,10,9,8,18,19,2,29,176,7,8,9,4,8,5,6,5,6,8,8,3,18,3,3,21,26,9,8,24,14,10,8,12,15,21,10,20,14,9,6],[33,22,35,27,23,35,27,36,18,32,31,28,25,35,33,33,28,24,29,30,31,29,35,34,28,28,27,28,27,33,31],[18,26,22,17,19,12,29,17,18,20,10,14],[17,17,11,16,16,12,14,14],[31,22,26,6,30,13,25,23,20,34,16,6,22,32,9,14,14,7,25,6,17,25,18,23,12,21,13,29,24,33,9,20,24,17,10,22,38,22,8,31,29,25,28,28,25,13,15,22,26,11,23,15,12,17,13,12,21,14,21,22,11,12,19,11,25,24],[19,37,25,31,31,30,34,23,25,25,23,17,27,22,21,21,27,23,15,18,14,30,40,10,38,24,22,17,32,24,40,44,26,22,19,32,21,28,18,16,18,22,13,30,5,28,7,47,39,46,64,34],[22,22,66,22,22],[28,10,27,17,17,14,27,18,11,22,25,28,23,23,8,63,24,32,14,44,37,31,49,27,17,21,36,26,21,26,18,32,33,31,15,38,28,23,29,49,26,20,27,31,25,24,23,35],[21,49,33,34,30,29,28,27,27,21,45,13],[9,25,5,19,15,11,16,14,17,15,11,15,15,10],[20,27,5,21],[15,16,15,13,27,14,17,14,15],[21],[16,11,10,11],[16,13,12,14,14,16,20],[14,14,19],[17,20,19],[18,15,20],[15,23],[17,17,10,14,11,15,14,23,17,12,17,14,9,21],[14,17,24],[25,23,17,25,48,34,29,34,38,42,30,50,58,36,39,28,27,35,30,34,46,46,39,51,46,75,66,20],[45,28,35,41,43,56,37,38,50,52,33,44,37,72,47,20],[80,52,38,44,39,49,50,56,62,42,54,59,35,35,32,31,37,43,48,47,38,71,56,53],[51,25,36,54,47,71,53,59,41,42,57,50,38,31,27,33,26,40,42,31,25],[26,47,26,37,42,15,60,40,43,48,30,25,52,28,41,40,34,28,40,38,40,30,35,27,27,32,44,31],[32,29,31,25,21,23,25,39,33,21,36,21,14,23,33,27],[31,16,23,21,13,20,40,13,27,33,34,31,13,40,58,24],[24,17,18,18,21,18,16,24,15,18,33,21,13],[24,21,29,31,26,18],[23,22,21,32,33,24],[30,30,21,23],[29,23,25,18],[10,20,13,18,28],[12,17,18],[20,15,16,16,25,21],[18,26,17,22],[16,15,15],[25],[14,18,19,16,14,20,28,13,28,39,40,29,25],[27,26,18,17,20],[25,25,22,19,14],[21,22,18],[10,29,24,21,21],[13],[15],[25],[20,29,22,11,14,17,17,13,21,11,19,18,18,20,8,21,18,24,21,15,27,21]]}
}),define("versificationMgr",["json!../data/kjv.json","json!../data/german.json","dataMgr"],function(e,t,n){function s(e){return void 0!==e&&u[e]?u[e].ot.length:u.kjv.ot.length}function i(e){return void 0!==e&&u[e]?u[e].nt.length:u.kjv.nt.length}function a(e,t){e=0>e?0:e;var n=s(t),i=n>e?"ot":"nt";return e=n>e?e:e-n,void 0!==t&&u[t]?u[t][i][e].maxChapter:u.kjv[i][e].maxChapter}function o(e,t,n){return void 0!==n&&u[n]?u[n].versesInChapter[e][parseInt(t,10)-1]:u.kjv.versesInChapter[e][parseInt(t,10)-1]}function r(e,t){e=0>e?0:e;var n=s(t),i=n>e?"ot":"nt";return e=n>e?e:e-n,void 0!==t&&u[t]?u[t][i][e]:u.kjv[i][e]}function l(e,t){return void 0!==t&&u[t]?u[t].osisToBookNum[e]:u.kjv.osisToBookNum[e]}function h(e,t,i){var a=[],o=t&&u[t]?u[t]:u.kjv;n.get(e,function(e,n){if(e)i&&i(e);else{if(n.hasOwnProperty("ot")){var r=0;for(var l in n.ot)r=n.ot[l][0].booknum,o.ot[r].bookNum=r,a.push(o.ot[r])}if(n.hasOwnProperty("nt")){var h=s(t),u=0;for(var c in n.nt)u=n.nt[c][0].booknum-h,o.nt[u].bookNum=u+h,a.push(o.nt[u])}i&&i(null,a)}})}var u={};return u.kjv=e,t.nt=e.nt,t.osisToBookNum=e.osisToBookNum,u.german=t,{getBooksInOT:s,getBooksInNT:i,getChapterMax:a,getVersesInChapter:o,getBook:r,getBookNum:l,getAllBooks:h}}),define("installMgr",["unzip","dataMgr","zText","versificationMgr","async","tools"],function(e,t,n,s,i,a){function o(e){l("http://crosswire.org/ftpmirror/pub/sword/masterRepoList.conf","text",function(t,n){if(""!==n||t)if(t)e(t);else{var s=[],i=null,a="",o="";n.split(/[\r\n]+/g).forEach(function(e){if(i=e.split("|"),i.length>1&&-1!==i[0].search("CrossWire")){switch(o=i[0].split("=")[2]){case"CrossWire":a="main";break;case"CrossWire Beta":a="beta";break;case"CrossWire av11n":a="av";break;case"CrossWire Attic":a="attic";break;case"CrossWire Wycliffe":a="wycliffe";break;case"CrossWire av11n Attic":a="avattic"}s.push({name:o,type:a,url:"http://crosswire.org/ftpmirror"+i[2].replace("raw","packages")+"/rawzip/",confUrl:"http://crosswire.org/ftpmirror"+i[2]+"/mods.d"})}}),e(t,s)}else e("Couldn't download master repo list!")})}function r(e,t){l(e.confUrl,"document",function(n,s){if(n)t(n);else{for(var o=[],r="",h=s.getElementsByTagName("a"),u=0;h.length>u;u++)-1!==h[u].href.search(".conf")&&(r=h[u].baseURI+"/"+h[u].textContent,o.push(function(t){return function(n){l(t,"text",function(t,s){var i=a.readConf(s);"zText"===i.ModDrv?(i.url="http://www.crosswire.org/sword/servlet/SwordMod.Verify?modName="+i.moduleKey+"&"+e.type+"=true&pkgType=raw",n(t,i)):n(t)})}}(r)));i.parallel(o,function(e,n){t(e,a.cleanArray(n).sort(a.dynamicSortMultiple("Lang","moduleKey")))})}})}function l(e,t,n,s){var i=new XMLHttpRequest({mozSystem:!0,mozAnon:!0});i.open("GET",e,!0),i.responseType=t,i.onreadystatechange=function(){4==i.readyState&&(200===i.status?n(null,i.response):n({message:"Couldn't download module.",error:i.status}))},i.onprogress=s,i.onerror=function(e){n(e)},i.send(null)}function h(e,t,n){"string"==typeof e?l(e,"document",function(e,s){if(e)t(e);else{var i=s.getElementsByTagName("a")[0].href;l(i,"blob",function(e,n){e?t(e):u(n,t)},n)}}):u(e,t)}function u(n,s){var i=new FileReader;i.onload=function(n){var i=new e.Unzip(new Uint8Array(n.target.result)),a=i.getFilenames();a.forEach(function(e){-1!==e.search(".conf")&&t.saveConfig(new Blob([i.decompress(e)]),function(e,t){e?s(e):d(i,t.v11n,t,s)})})},i.onerror=function(e){s(e)},i.readAsArrayBuffer(n)}function c(e,n){"string"==typeof e?t.removeModule(e,n):n({message:"inModuleKey must be a string!"})}function d(e,n,s,a){var o={};o.bin=[];var r=e.getFilenames();r.forEach(function(t){-1!==t.search("nt.bzs")?o.ntB=t:-1!==t.search("nt.bzv")?o.ntCV=t:-1!==t.search("ot.bzs")?o.otB=t:-1!==t.search("ot.bzv")?o.otCV=t:-1===t.search(".conf")&&o.bin.push({blob:new Blob([e.decompress(t)]),name:t})}),i.series([function(e){t.saveModule(o.bin,s,function(t){t?e(t):e(null)})},function(i){var a=null,r=null,l=null,h=null;o.otB&&(a=p(e.decompress(o.otB)),r=g(e.decompress(o.otCV),a,"ot",n)),o.ntB&&(l=p(e.decompress(o.ntB)),h=g(e.decompress(o.ntCV),l,"nt",n)),t.saveBCVPos(r,h,s,function(e){e?i(e):i(null)})}],function(e){e?(t.remove(s.id,function(){}),a(e)):a(null,s.id)})}function p(e){var t=0,n=0,s=0,i=null,a=!1,o=[];for(x=0;!a;)if(i=m(e),t=i[0],a=i[1],!a&&(i=m(e),n=i[0],a=i[1],!a)){if(i=m(e),s=i[0],a=i[1],a)break;o.push({startPos:t,length:n,unused:s})}return o}function f(e){x=0;for(var t=0;4>t;t++)b(e),v(e),b(e)}function g(e,t,n,i){f(e);for(var a="ot"===n?0:s.getBooksInOT(i),o="ot"===n?s.getBooksInOT(i):s.getBooksInOT(i)+s.getBooksInNT(i),r=0,l=0,h=0,u=0,c=0,d=0,p=0,g=null,m=0,x={},y={},w=a;o>w;w++){g=s.getBook(w,i),y[g.abbrev]=[];for(var C=0;g.maxChapter>C;C++){r=0,l=0,x={},x.verses=[],h=0,p=s.getVersesInChapter(w,C+1,i);for(var _=0;p>_;_++)d=b(e)[0],m=v(e)[0],0!==m&&(l=m),h=b(e)[0],0===_&&(r=m,c=0,t.length>d&&(c=t[d].startPos),x.startPos=r,x.booknum=w,x.bookStartPos=c),0===d&&0===m&&0===h?x!=={}&&x.verses.push({startPos:0,length:0}):x!=={}&&x.verses.push({startPos:m-r,length:h});x!={}&&(u=l-r+h,isNaN(u)||0===u?delete y[g.abbrev]:(x.length=u,y[g.abbrev].push(x))),b(e),v(e),b(e)}b(e),v(e),b(e)}return y}function m(e,t){return y=e.subarray(x,x+4),w=!1,x+=4,4!==y.length&&(w=!0),t&&t(1048576*y[3]+65536*y[2]+256*y[1]+y[0],w),[1048576*y[3]+65536*y[2]+256*y[1]+y[0],w]}function b(e,t){return y=e.subarray(x,x+2),w=!1,x+=2,2!==y.length&&(w=!0),t&&t(256*y[1]+y[0],w),[256*y[1]+y[0],w]}function v(e,t){return y=e.subarray(x,x+6),w=!1,x+=6,6!==y.length&&(w=!0),t&&t(17592186044416*y[1]+4294967296*y[0]+16777216*y[5]+65536*y[4]+256*y[3]+y[2],w),[17592186044416*y[1]+4294967296*y[0]+16777216*y[5]+65536*y[4]+256*y[3]+y[2],w]}var x=0,y=null,w=!1;return{getRepositories:o,getModules:r,installModule:h,removeModule:c}}),function(e){function t(t){return"function"==typeof d[t]&&(d[t]=d[t](e,l,h)),d[t]}function n(t,n,s){d[t]=s?n(e,l,h):n}function s(e,t){var n=!1,s=e.charAt(0).toUpperCase()+e.slice(1),i=r.length,a=t.style;if("string"==typeof a[e])n=!0;else for(;i--;)if("string"==typeof a[r[i]+s]){n=!0;break}return n}function i(e){if(e)for(;e.lastChild;)e.removeChild(e.lastChild);return e}function a(e,t){var n=typeof e[t];return"object"==n?!!e[t]:!o[n]}var o={"boolean":1,number:1,string:1,undefined:1},r=["Webkit","Moz","O","ms","Khtml"],l=a(e,"document")&&e.document,h=l&&a(l,"createElement")&&l.createElement("DiV"),u="object"==typeof exports&&exports,c="object"==typeof module&&module,d={};t.add=n,t.clearElement=i,t.cssprop=s,t.isHostType=a,t._tests=d,t.add("dom",function(e,t,n){return t&&n&&a(e,"location")&&a(t,"documentElement")&&a(t,"getElementById")&&a(t,"getElementsByName")&&a(t,"getElementsByTagName")&&a(t,"createComment")&&a(t,"createElement")&&a(t,"createTextNode")&&a(n,"appendChild")&&a(n,"insertBefore")&&a(n,"removeChild")&&a(n,"getAttribute")&&a(n,"setAttribute")&&a(n,"removeAttribute")&&a(n,"style")&&"string"==typeof n.style.cssText});try{document.execCommand("BackgroundImageCache",!1,!0)}catch(p){}"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("has",[],function(){return t}):u?c&&c.exports==u?(c.exports=t).has=t:u.has=t:e.has=t}(this),function(){var e,t,n,s={}.hasOwnProperty;this.bcv_parser=e=function(){function e(){var t,n,i;this.options={},i=e.prototype.options;for(t in i)s.call(i,t)&&(n=i[t],this.options[t]=n);this.versification_system(this.options.versification_system)}return e.prototype.s="",e.prototype.entities=[],e.prototype.passage=null,e.prototype.regexps={},e.prototype.options={consecutive_combination_strategy:"combine",osis_compaction_strategy:"b",book_sequence_strategy:"ignore",invalid_sequence_strategy:"ignore",sequence_combination_strategy:"combine",invalid_passage_strategy:"ignore",zero_chapter_strategy:"error",zero_verse_strategy:"error",non_latin_digits_strategy:"ignore",book_alone_strategy:"ignore",captive_end_digits_strategy:"delete",end_range_digits_strategy:"verse",include_apocrypha:!1,ps151_strategy:"c",versification_system:"default",case_sensitive:"none"},e.prototype.parse=function(e){var t;return this.reset(),this.s=e,e=this.replace_control_characters(e),t=this.match_books(e),e=t[0],this.passage.books=t[1],this.entities=this.match_passages(e),this},e.prototype.reset=function(){return this.s="",this.entities=[],this.passage?(this.passage.books=[],this.passage.indices={}):(this.passage=new t,this.passage.options=this.options,this.passage.translations=this.translations)},e.prototype.set_options=function(e){var t,n;for(t in e)s.call(e,t)&&(n=e[t],"include_apocrypha"===t||"versification_system"===t||"case_sensitive"===t?this[t](n):this.options[t]=n);return this},e.prototype.include_apocrypha=function(e){return null==e||!0!==e&&!1!==e?this:(this.options.include_apocrypha=e,this.regexps.books=this.regexps.get_books(e,this.options.case_sensitive),!0===e?this.translations["default"].chapters.Ps[150]=this.translations["default"].chapters.Ps151[0]:!1===e&&151===this.translations["default"].chapters.Ps.length&&this.translations["default"].chapters.Ps.pop(),this)},e.prototype.versification_system=function(e){var t,i;if(null==e||null==this.translations.alternates[e])return this;if(this.options.versification_system=e,null==(i=this.translations.alternates)["default"]&&(i["default"]={order:null,chapters:{}}),null!=this.translations.alternates[e].order&&(null==this.translations.alternates["default"].order&&(this.translations.alternates["default"].order=n.shallow_clone(this.translations["default"].order)),this.translations["default"].order=n.shallow_clone(this.translations.alternates[e].order)),null!=this.translations.alternates[e].chapters)for(t in i=this.translations.alternates[e].chapters)s.call(i,t)&&(e=i[t],null==this.translations.alternates["default"].chapters[t]&&(this.translations.alternates["default"].chapters[t]=n.shallow_clone_array(this.translations["default"].chapters[t])),this.translations["default"].chapters[t]=n.shallow_clone_array(e));return this.include_apocrypha(this.options.include_apocrypha),this},e.prototype.case_sensitive=function(e){return null==e||"none"!==e&&"books"!==e||e===this.options.case_sensitive?this:(this.options.case_sensitive=e,this.regexps.books=this.regexps.get_books(this.options.include_apocrypha,e),this)},e.prototype.replace_control_characters=function(e){return e=e.replace(this.regexps.control," "),"replace"===this.options.non_latin_digits_strategy&&(e=e.replace(/[\u0660\u06f0\u07c0\u0966\u09e6\u0a66\u0ae6\u0b660\u0c66\u0ce6\u0d66\u0e50\u0ed0\u0f20\u1040\u1090\u17e0\u1810\u1946\u19d0\u1a80\u1a90\u1b50\u1bb0\u1c40\u1c50\ua620\ua8d0\ua900\ua9d0\uaa50\uabf0\uff10]/g,"0"),e=e.replace(/[\u0661\u06f1\u07c1\u0967\u09e7\u0a67\u0ae7\u0b67\u0be7\u0c67\u0ce7\u0d67\u0e51\u0ed1\u0f21\u1041\u1091\u17e1\u1811\u1947\u19d1\u1a81\u1a91\u1b51\u1bb1\u1c41\u1c51\ua621\ua8d1\ua901\ua9d1\uaa51\uabf1\uff11]/g,"1"),e=e.replace(/[\u0662\u06f2\u07c2\u0968\u09e8\u0a68\u0ae8\u0b68\u0be8\u0c68\u0ce8\u0d68\u0e52\u0ed2\u0f22\u1042\u1092\u17e2\u1812\u1948\u19d2\u1a82\u1a92\u1b52\u1bb2\u1c42\u1c52\ua622\ua8d2\ua902\ua9d2\uaa52\uabf2\uff12]/g,"2"),e=e.replace(/[\u0663\u06f3\u07c3\u0969\u09e9\u0a69\u0ae9\u0b69\u0be9\u0c69\u0ce9\u0d69\u0e53\u0ed3\u0f23\u1043\u1093\u17e3\u1813\u1949\u19d3\u1a83\u1a93\u1b53\u1bb3\u1c43\u1c53\ua623\ua8d3\ua903\ua9d3\uaa53\uabf3\uff13]/g,"3"),e=e.replace(/[\u0664\u06f4\u07c4\u096a\u09ea\u0a6a\u0aea\u0b6a\u0bea\u0c6a\u0cea\u0d6a\u0e54\u0ed4\u0f24\u1044\u1094\u17e4\u1814\u194a\u19d4\u1a84\u1a94\u1b54\u1bb4\u1c44\u1c54\ua624\ua8d4\ua904\ua9d4\uaa54\uabf4\uff14]/g,"4"),e=e.replace(/[\u0665\u06f5\u07c5\u096b\u09eb\u0a6b\u0aeb\u0b6b\u0beb\u0c6b\u0ceb\u0d6b\u0e55\u0ed5\u0f25\u1045\u1095\u17e5\u1815\u194b\u19d5\u1a85\u1a95\u1b55\u1bb5\u1c45\u1c55\ua625\ua8d5\ua905\ua9d5\uaa55\uabf5\uff15]/g,"5"),e=e.replace(/[\u0666\u06f6\u07c6\u096c\u09ec\u0a6c\u0aec\u0b6c\u0bec\u0c6c\u0cec\u0d6c\u0e56\u0ed6\u0f26\u1046\u1096\u17e6\u1816\u194c\u19d6\u1a86\u1a96\u1b56\u1bb6\u1c46\u1c56\ua626\ua8d6\ua906\ua9d6\uaa56\uabf6\uff16]/g,"6"),e=e.replace(/[\u0667\u06f7\u07c7\u096d\u09ed\u0a6d\u0aed\u0b6d\u0bed\u0c6d\u0ced\u0d6d\u0e57\u0ed7\u0f27\u1047\u1097\u17e7\u1817\u194d\u19d7\u1a87\u1a97\u1b57\u1bb7\u1c47\u1c57\ua627\ua8d7\ua907\ua9d7\uaa57\uabf7\uff17]/g,"7"),e=e.replace(/[\u0668\u06f8\u07c8\u096e\u09ee\u0a6e\u0aee\u0b6e\u0bee\u0c6e\u0cee\u0d6e\u0e58\u0ed8\u0f28\u1048\u1098\u17e8\u1818\u194e\u19d8\u1a88\u1a98\u1b58\u1bb8\u1c48\u1c58\ua628\ua8d8\ua908\ua9d8\uaa58\uabf8\uff18]/g,"8"),e=e.replace(/[\u0669\u06f9\u07c9\u096f\u09ef\u0a6f\u0aef\u0b6f\u0bef\u0c6f\u0cef\u0d6f\u0e59\u0ed9\u0f29\u1049\u1099\u17e9\u1819\u194f\u19d9\u1a89\u1a99\u1b59\u1bb9\u1c49\u1c59\ua629\ua8d9\ua909\ua9d9\uaa59\uabf9\uff19]/g,"9")),e},e.prototype.match_books=function(e){var t,n,s,i,a;for(n=[],a=this.regexps.books,s=0,i=a.length;i>s;s++)t=a[s],e=e.replace(t.regexp,function(e,s,i){return n.push({value:i,parsed:t.osis}),""+s+""+(n.length-1)+(null!=t.extra?"/"+t.extra:"")+""});return e=e.replace(this.regexps.translations,function(e){return n.push({value:e,parsed:e.toLowerCase()}),""+(n.length-1)+""}),[e,this.get_book_indices(n,e)]},e.prototype.get_book_indices=function(e,t){var n,s,i;for(n=0,i=/([\x1f\x1e])(\d+)(?:\/\d+)?\1/g;s=i.exec(t);)e[s[2]].start_index=s.index+n,n+=e[s[2]].value.length-s[0].length;return e},e.prototype.match_passages=function(e){var t,n,s,a,o,r;for(n=[];a=this.regexps.escaped_passage.exec(e);)s=a[0],r=a[1],t=a[2],o=r.length,a.index+=s.length-o,/\s[2-9]\d\d\s*$|\s\d{4,}\s*$/.test(r)&&(s=/\s+\d+\s*$/,r=r.replace(s,"")),/[\d\x1f\x1e)]$/.test(r)||(r=this.replace_match_end(r)),"delete"===this.options.captive_end_digits_strategy&&(a=a.index+r.length,e.length>a&&/^\w/.test(e.substr(a,1))&&(r=r.replace(/[\s*]+\d+$/,"")),r=r.replace(/(\x1e[)\]]?)[\s*]*\d+$/,"$1")),r=r.replace(/[A-Z]+/g,function(e){return e.toLowerCase()}),s=r.substr(0,!1)?0:r.split("")[0].length,a={value:i.parse(r),type:"base",start_index:this.passage.books[t].start_index-s,match:r},"full"===this.options.book_alone_strategy&&1===a.value.length&&"b"===a.value[0].type&&0===s&&1===this.passage.books[t].parsed.length&&/^[234]/.test(this.passage.books[t].parsed[0])&&this.create_book_range(e,a,t),t=this.passage.handle_obj(a)[0],n=n.concat(t),o=this.adjust_regexp_end(t,o,r.length),o>0&&(this.regexps.escaped_passage.lastIndex-=o);return n},e.prototype.adjust_regexp_end=function(e,t,n){var s;return s=0,e.length>0?s=t-e[e.length-1].indices[1]-1:t!==n&&(s=t-n),s},e.prototype.replace_match_end=function(e){var t,n;for(n=e.length;t=this.regexps.match_end_split.exec(e);)n=t.index+t[0].length;return e.length>n&&(e=e.substr(0,n)),e},e.prototype.create_book_range=function(t,n,s){var i,a,o,r,l;for(i=[e.prototype.regexps.first,e.prototype.regexps.second,e.prototype.regexps.third],o=parseInt(this.passage.books[s].parsed[0].substr(0,1),10),a=l=1;o>=1?o>l:l>o;a=o>=1?++l:--l)if(r=a===o-1?e.prototype.regexps.range_and:e.prototype.regexps.range_only,r=t.match(RegExp("(?:^|\\W)("+i[a-1]+"\\s*"+r+"\\s*)\\x1f"+s+"\\x1f","i")),null!=r)return this.add_book_range_object(n,r,a);return!1},e.prototype.add_book_range_object=function(e,t,n){var s;return s=t[1].length,e.value[0]={type:"b_range_pre",value:[{type:"b_pre",value:""+n,indices:[t.index,t.index+s]},e.value[0]],indices:[0,e.value[0].indices[1]+s]},e.value[0].value[1].indices[0]+=s,e.value[0].value[1].indices[1]+=s,e.start_index-=s,e.match=t[1]+e.match},e.prototype.osis=function(){var e,t,n,s,i;for(t=[],i=this.parsed_entities(),n=0,s=i.length;s>n;n++)e=i[n],e.osis.length>0&&t.push(e.osis);return t.join(",")},e.prototype.osis_and_translations=function(){var e,t,n,s,i;for(t=[],i=this.parsed_entities(),n=0,s=i.length;s>n;n++)e=i[n],e.osis.length>0&&t.push([e.osis,e.translations.join(",")]);return t},e.prototype.osis_and_indices=function(){var e,t,n,s,i;for(t=[],i=this.parsed_entities(),n=0,s=i.length;s>n;n++)e=i[n],e.osis.length>0&&t.push({osis:e.osis,translations:e.translations,indices:e.indices});return t},e.prototype.parsed_entities=function(){var e,t,n,s,i,a,o,r,l,h,u,c,d;for(a=[],t=h=0,c=this.entities.length;c>=0?c>h:h>c;t=c>=0?++h:--h)if(e=this.entities[t],e.type&&"translation_sequence"===e.type&&a.length>0&&t===a[a.length-1].entity_id+1&&(a[a.length-1].indices[1]=e.absolute_indices[1]),null!=e.passages&&("b"!==e.type&&"b_range"!==e.type||"ignore"!==this.options.book_alone_strategy)){if(l=[],r=null,null!=e.passages[0].translations)for(u=e.passages[0].translations,s=0,o=u.length;o>s;s++)i=u[s],n=(null!=(d=i.osis)?d.length:void 0)>0?i.osis:"",null==r&&(r=i.alias),l.push(n);else l=[""],r="default";for(i=[],s=e.passages.length,n=u=0;s>=0?s>u:u>s;n=s>=0?++u:--u)o=e.passages[n],null==o.type&&(o.type=e.type),(!1!==o.valid.valid||("ignore"===this.options.invalid_sequence_strategy&&"sequence"===e.type&&this.snap_sequence("ignore",e,i,n,s),"ignore"!==this.options.invalid_passage_strategy))&&("b"!==o.type&&"b_range"!==o.type||"ignore"!==this.options.book_sequence_strategy||"sequence"!==e.type?(null==o.absolute_indices&&(o.absolute_indices=e.absolute_indices),i.push({osis:o.valid.valid?this.to_osis(o.start,o.end,r):"",type:o.type,indices:o.absolute_indices,translations:l,start:o.start,end:o.end,enclosed_indices:o.enclosed_absolute_indices,entity_id:t,entities:[o]})):this.snap_sequence("book",e,i,n,s));if(0!==i.length)if(i.length>1&&"combine"===this.options.consecutive_combination_strategy&&(i=this.combine_consecutive_passages(i,r)),"separate"===this.options.sequence_combination_strategy)a=a.concat(i);else{for(r=[],n=i.length-1,null!=i[n].enclosed_indices&&i[n].enclosed_indices[1]>=0&&(e.absolute_indices[1]=i[n].enclosed_indices[1]),s=0,o=i.length;o>s;s++)n=i[s],n.osis.length>0&&r.push(n.osis);a.push({osis:r.join(","),indices:e.absolute_indices,translations:l,entity_id:t,entities:i})}}return a},e.prototype.to_osis=function(e,t,n){var s;return null==t.c&&null==t.v&&e.b===t.b&&null==e.c&&null==e.v&&"first_chapter"===this.options.book_alone_strategy&&(t.c=1),null==e.c&&(e.c=1),null==e.v&&(e.v=1),null==t.c&&(t.c=this.passage.translations[n].chapters[t.b].length),null==t.v&&(t.v=this.passage.translations[n].chapters[t.b][t.c-1]),this.options.include_apocrypha&&"b"===this.options.ps151_strategy&&(151===e.c&&"Ps"===e.b||151===t.c&&"Ps"===t.b)&&this.fix_ps151(e,t,n),"b"===this.options.osis_compaction_strategy&&1===e.c&&1===e.v&&t.c===this.passage.translations[n].chapters[t.b].length&&t.v===this.passage.translations[n].chapters[t.b][t.c-1]?(n=e.b,s=t.b):2>=this.options.osis_compaction_strategy.length&&1===e.v&&t.v===this.passage.translations[n].chapters[t.b][t.c-1]?(n=e.b+"."+(""+e.c),s=t.b+"."+(""+t.c)):(n=e.b+"."+(""+e.c)+"."+(""+e.v),s=t.b+"."+(""+t.c)+"."+(""+t.v)),n=n===s?n:n+"-"+s,null!=e.extra&&(n=e.extra+","+n),null!=t.extra&&(n+=","+t.extra),n},e.prototype.fix_ps151=function(e,t,n){return 151===e.c&&"Ps"===e.b?151===t.c&&"Ps"===t.b?(e.b="Ps151",e.c=1,t.b="Ps151",t.c=1):(e.extra=this.to_osis({b:"Ps151",c:1,v:e.v},{b:"Ps151",c:1,v:this.passage.translations[n].chapters.Ps151[0]},n),e.b="Prov",e.c=1,e.v=1):(t.extra=this.to_osis({b:"Ps151",c:1,v:1},{b:"Ps151",c:1,v:t.v},n),t.c=150,t.v=this.passage.translations[n].chapters.Ps[149])},e.prototype.combine_consecutive_passages=function(e,t){var n,s,i,a,o,r,l,h,u,c;for(l=[],h={},o=e.length-1,n=-1,s=!1,i=c=0;o>=0?o>=c:c>=o;i=o>=0?++c:--c)r=e[i],r.osis.length>0?(u=l.length-1,a=!1,r.enclosed_indices[0]!==n&&(n=r.enclosed_indices[0]),n>=0&&(i===o||e[i+1].enclosed_indices[0]!==r.enclosed_indices[0])&&(s=a=!0),this.is_verse_consecutive(h,r.start,t)?(l[u].end=r.end,l[u].is_enclosed_last=a,l[u].indices[1]=r.indices[1],l[u].enclosed_indices[1]=r.enclosed_indices[1],l[u].osis=this.to_osis(l[u].start,r.end,t)):l.push(r),h={b:r.end.b,c:r.end.c,v:r.end.v}):(l.push(r),h={});return s&&this.snap_enclosed_indices(l),l},e.prototype.snap_enclosed_indices=function(e){var t,n,s;for(n=0,s=e.length;s>n;n++)t=e[n],null!=t.is_enclosed_last&&(0>t.enclosed_indices[0]&&t.is_enclosed_last&&(t.indices[1]=t.enclosed_indices[1]),delete t.is_enclosed_last);return e},e.prototype.is_verse_consecutive=function(e,t,n){var s;if(null==e.b)return!1;if(s=null!=this.passage.translations[n].order?this.passage.translations[n].order:this.passage.translations["default"].order,e.b===t.b){if(e.c===t.c){if(e.v===t.v-1)return!0}else if(1===t.v&&e.c===t.c-1&&e.v===this.passage.translations[n].chapters[e.b][e.c-1])return!0}else if(1===t.c&&1===t.v&&s[e.b]===s[t.b]-1&&e.c===this.passage.translations[n].chapters[e.b].length&&e.v===this.passage.translations[n].chapters[e.b][e.c-1])return!0;return!1},e.prototype.snap_sequence=function(e,t,n,s,i){var a;return a=t.passages[s],a.absolute_indices[0]===t.absolute_indices[0]&&i-1>s&&this.get_snap_sequence_i(t.passages,s,i)!==s?(t.absolute_indices[0]=t.passages[s+1].absolute_indices[0],this.remove_absolute_indices(t.passages,s+1)):a.absolute_indices[1]===t.absolute_indices[1]&&s>0?t.absolute_indices[1]=n.length>0?n[n.length-1].indices[1]:t.passages[s-1].absolute_indices[1]:"book"===e&&i-1>s&&!this.starts_with_book(t.passages[s+1])&&(t.passages[s+1].absolute_indices[0]=a.absolute_indices[0]),t},e.prototype.get_snap_sequence_i=function(e,t,n){var s,i,a;for(s=i=a=t+1;n>=a?n>i:i>n;s=n>=a?++i:--i){if(this.starts_with_book(e[s]))return s;if(e[s].valid.valid)break}return t},e.prototype.starts_with_book=function(e){return"b"===e.type.substr(0,1)||("range"===e.type||"ff"===e.type)&&"b"===e.start.type.substr(0,1)?!0:!1},e.prototype.remove_absolute_indices=function(e,t){var n,s,i,a,o,r;if(0>e[t].enclosed_absolute_indices[0])return!1;for(n=e[t].enclosed_absolute_indices,i=n[0],n=n[1],r=e.slice(t),a=0,o=r.length;o>a&&(s=r[a],s.enclosed_absolute_indices[0]===i&&s.enclosed_absolute_indices[1]===n);a++)s.enclosed_absolute_indices=[-1,-1];return!0},e}(),t=function(){function e(){}return e.prototype.books=[],e.prototype.indices={},e.prototype.options={},e.prototype.translations={},e.prototype.handle_array=function(e,t,n){var s,i,a;for(null==t&&(t=[]),null==n&&(n={}),i=0,a=e.length;a>i&&(s=e[i],"stop"!==s.type);i++)n=this.handle_obj(s,t,n),t=n[0],n=n[1];return[t,n]},e.prototype.handle_obj=function(e,t,n){return null!=e.type&&null!=this[e.type]?this[e.type](e,t,n):[t,n]},e.prototype.b=function(e,t,s){var i,a,o,r,l;for(e.start_context=n.shallow_clone(s),e.passages=[],s=[],l=this.books[e.value].parsed,o=0,r=l.length;r>o;o++)i=l[o],a=this.validate_ref(e.start_context.translations,{b:i}),i={start:{b:i},end:{b:i},valid:a},0===e.passages.length&&a.valid?e.passages.push(i):s.push(i);return 0===e.passages.length&&e.passages.push(s.shift()),s.length>0&&(e.passages[0].alternates=s),null!=e.start_context.translations&&(e.passages[0].translations=e.start_context.translations),null==e.absolute_indices&&(e.absolute_indices=this.get_absolute_indices(e.indices)),t.push(e),s={b:e.passages[0].start.b},null!=e.start_context.translations&&(s.translations=e.start_context.translations),[t,s]},e.prototype.b_range=function(e,t,n){return this.range(e,t,n)},e.prototype.b_range_pre=function(e,t,s){var i,a;return e.start_context=n.shallow_clone(s),e.passages=[],i=this.pluck("b",e.value),s=this.b(i,[],s),i=s[0][0],s=s[1],null==e.absolute_indices&&(e.absolute_indices=this.get_absolute_indices(e.indices)),a={b:e.value[0].value+i.passages[0].start.b.substr(1),type:"b"},e.passages=[{start:a,end:i.passages[0].end,valid:i.passages[0].valid}],null!=e.start_context.translations&&(e.passages[0].translations=e.start_context.translations),t.push(e),[t,s]},e.prototype.base=function(e,t,n){return this.indices=this.calculate_indices(e.match,e.start_index),this.handle_array(e.value,t,n)},e.prototype.bc=function(e,t,s){var i,a,o,r,l,h,u,c,d;for(e.start_context=n.shallow_clone(s),e.passages=[],this.reset_context(s,["b","c","v"]),o=this.pluck("c",e.value).value,i=[],d=this.books[this.pluck("b",e.value).value].parsed,u=0,c=d.length;c>u;u++)a=d[u],r="c",h=this.validate_ref(e.start_context.translations,{b:a,c:o}),l={start:{b:a},end:{b:a},valid:h},h.messages.start_chapter_not_exist_in_single_chapter_book&&(l.valid=this.validate_ref(e.start_context.translations,{b:a,v:o}),l.start.c=1,l.end.c=1,r="v"),l.start[r]=o,a=this.fix_start_zeroes(l.valid,l.start.c,l.start.v),l.start.c=a[0],l.start.v=a[1],l.end[r]=l.start[r],0===e.passages.length&&l.valid.valid?e.passages.push(l):i.push(l);return 0===e.passages.length&&e.passages.push(i.shift()),i.length>0&&(e.passages[0].alternates=i),null!=e.start_context.translations&&(e.passages[0].translations=e.start_context.translations),null==e.absolute_indices&&(e.absolute_indices=this.get_absolute_indices(e.indices)),this.set_context_from_object(s,["b","c","v"],e.passages[0].start),t.push(e),[t,s]},e.prototype.bc_title=function(e,t,s){var i,a,o,r;if(e.start_context=n.shallow_clone(s),s=this.bc(this.pluck("bc",e.value),[],s),i=s[0][0],s=s[1],"Ps"!==i.passages[0].start.b.substr(0,2)&&null!=i.passages[0].alternates)for(a=o=0,r=i.passages[0].alternates.length;r>=0?r>o:o>r;a=r>=0?++o:--o)if("Ps"===i.passages[0].alternates[a].start.b.substr(0,2)){i.passages[0]=i.passages[0].alternates[a];break}return"Ps"!==i.passages[0].start.b.substr(0,2)?(t.push(i),[t,s]):(this.books[this.pluck("b",i.value).value].parsed=["Ps"],i=this.pluck("title",e.value),e.value[1]={type:"v",value:[{type:"integer",value:1,indices:i.indices}],indices:i.indices},e.original_type="bc_title",e.type="bcv",this.bcv(e,t,e.start_context))},e.prototype.bcv=function(e,t,s){var i,a,o,r,l,h,u,c;for(e.start_context=n.shallow_clone(s),e.passages=[],this.reset_context(s,["b","c","v"]),o=this.pluck("bc",e.value),r=this.pluck("c",o.value).value,l=this.pluck("v",e.value).value,i=[],c=this.books[this.pluck("b",o.value).value].parsed,h=0,u=c.length;u>h;h++)a=c[h],o=this.validate_ref(e.start_context.translations,{b:a,c:r,v:l}),l=this.fix_start_zeroes(o,r,l),r=l[0],l=l[1],a={start:{b:a,c:r,v:l},end:{b:a,c:r,v:l},valid:o},0===e.passages.length&&o.valid?e.passages.push(a):i.push(a);return 0===e.passages.length&&e.passages.push(i.shift()),i.length>0&&(e.passages[0].alternates=i),null!=e.start_context.translations&&(e.passages[0].translations=e.start_context.translations),null==e.absolute_indices&&(e.absolute_indices=this.get_absolute_indices(e.indices)),this.set_context_from_object(s,["b","c","v"],e.passages[0].start),t.push(e),[t,s]},e.prototype.bv=function(e,t,s){var i;return e.start_context=n.shallow_clone(s),i=e.value,i={indices:e.indices,value:[{type:"bc",value:[i[0],{type:"c",value:[{type:"integer",value:1}]}]},i[1]]},s=this.bcv(i,[],s),i=s[0][0],s=s[1],e.passages=i.passages,null!=e.start_context.translations&&(e.passages[0].translations=e.start_context.translations),null==e.absolute_indices&&(e.absolute_indices=this.get_absolute_indices(e.indices)),t.push(e),[t,s]},e.prototype.c=function(e,t,s){var i,a;return e.start_context=n.shallow_clone(s),i="integer"===e.type?e.value:this.pluck("integer",e.value).value,a=this.validate_ref(e.start_context.translations,{b:s.b,c:i}),!a.valid&&a.messages.start_chapter_not_exist_in_single_chapter_book?this.v(e,t,s):(i=this.fix_start_zeroes(a,i)[0],e.passages=[{start:{b:s.b,c:i},end:{b:s.b,c:i},valid:a}],null!=e.start_context.translations&&(e.passages[0].translations=e.start_context.translations),t.push(e),s.c=i,this.reset_context(s,["v"]),null==e.absolute_indices&&(e.absolute_indices=this.get_absolute_indices(e.indices)),[t,s])},e.prototype.c_psalm=function(e,t,n){var s;return e.original_type=e.type,e.original_value=e.value,e.type="bc",s=parseInt(this.books[e.value].value.match(/^\d+/)[0],10),e.value=[{type:"b",value:e.original_value,indices:e.indices},{type:"c",value:[{type:"integer",value:s,indices:e.indices}],indices:e.indices}],this.bc(e,t,n)},e.prototype.c_title=function(e,t,s){return e.start_context=n.shallow_clone(s),"Ps"!==s.b?this.c(e.value[0],t,s):(s=this.pluck("title",e.value),e.value[1]={type:"v",value:[{type:"integer",value:1,indices:s.indices}],indices:s.indices},e.original_type="c_title",e.type="cv",this.cv(e,t,e.start_context))},e.prototype.cv=function(e,t,s){var i,a,o;return e.start_context=n.shallow_clone(s),i=this.pluck("c",e.value).value,a=this.pluck("v",e.value).value,o=this.validate_ref(e.start_context.translations,{b:s.b,c:i,v:a}),a=this.fix_start_zeroes(o,i,a),i=a[0],a=a[1],e.passages=[{start:{b:s.b,c:i,v:a},end:{b:s.b,c:i,v:a},valid:o}],null!=e.start_context.translations&&(e.passages[0].translations=e.start_context.translations),t.push(e),s.c=i,s.v=a,null==e.absolute_indices&&(e.absolute_indices=this.get_absolute_indices(e.indices)),[t,s]},e.prototype.cb_range=function(e,t,n){var s,i,a;return e.original_type=e.type,e.type="range",i=e.value,s=i[0],a=i[1],i=i[2],e.original_value=[s,a,i],e.value=[{type:"bc",value:[s,a],indices:e.indices},i],i.indices[1]=e.indices[1],this.range(e,t,n)},e.prototype.cv_psalm=function(e,t,s){var i,a;return e.start_context=n.shallow_clone(s),e.original_type=e.type,a=e.original_value=e.value,i=a[0],a=a[1],e.type="bcv",i=this.c_psalm(i,[],e.start_context)[0][0],e.value=[i,a],this.bcv(e,t,s)},e.prototype.ff=function(e,t,s){return e.start_context=n.shallow_clone(s),e.value.push({type:"integer",indices:e.indices,value:999}),s=this.range(e,[],e.start_context),e=s[0][0],s=s[1],e.value.pop(),null!=e.passages[0].valid.end_verse_not_exist&&delete e.passages[0].valid.end_verse_not_exist,null!=e.passages[0].valid.end_chapter_not_exist&&delete e.passages[0].valid.end_chapter_not_exist,null!=e.passages[0].end.original_c&&delete e.passages[0].end.original_c,t.push(e),null==e.absolute_indices&&(e.absolute_indices=this.get_absolute_indices(e.indices)),[t,s]},e.prototype.integer_title=function(e,t,s){return e.start_context=n.shallow_clone(s),"Ps"!==s.b?this.integer(e.value[0],t,s):(e.value[0]={type:"c",value:[e.value[0]],indices:[e.value[0].indices[0],e.value[0].indices[1]]},s=[e.indices[1]-5,e.indices[1]],e.value[1]={type:"v",value:[{type:"integer",value:1,indices:s}],indices:s},e.original_type="integer_title",e.type="cv",this.cv(e,t,e.start_context))},e.prototype.integer=function(e,t,n){return null!=n.v?this.v(e,t,n):this.c(e,t,n)},e.prototype.sequence=function(e,t,s){var i,a,o,r,l,h,u,c;for(e.start_context=n.shallow_clone(s),e.passages=[],u=e.value,o=0,l=u.length;l>o;o++)for(i=u[o],s=this.handle_array(i,[],s),i=s[0],i=i[0],s=s[1],c=i.passages,r=0,h=c.length;h>r;r++)a=c[r],null==a.type&&(a.type=i.type),null==a.absolute_indices&&(a.absolute_indices=i.absolute_indices),null!=i.start_context.translations&&(a.translations=i.start_context.translations),a.enclosed_absolute_indices="sequence_post_enclosed"===i.type?i.absolute_indices:[-1,-1],e.passages.push(a);return null==e.absolute_indices&&(e.absolute_indices=e.passages.length>0&&"sequence"===e.type?[e.passages[0].absolute_indices[0],e.passages[e.passages.length-1].absolute_indices[1]]:this.get_absolute_indices(e.indices)),t.push(e),[t,s]},e.prototype.sequence_post_enclosed=function(e,t,n){return this.sequence(e,t,n)},e.prototype.v=function(e,t,s){var i,a,o;return a="integer"===e.type?e.value:this.pluck("integer",e.value).value,e.start_context=n.shallow_clone(s),i=null!=s.c?s.c:1,o=this.validate_ref(e.start_context.translations,{b:s.b,c:i,v:a}),a=this.fix_start_zeroes(o,0,a)[1],e.passages=[{start:{b:s.b,c:i,v:a},end:{b:s.b,c:i,v:a},valid:o}],null!=e.start_context.translations&&(e.passages[0].translations=e.start_context.translations),null==e.absolute_indices&&(e.absolute_indices=this.get_absolute_indices(e.indices)),t.push(e),s.v=a,[t,s]},e.prototype.range=function(e,t,s){var i,a,o,r,l;return e.start_context=n.shallow_clone(s),a=e.value,o=a[0],i=a[1],"v"!==i.type||"bc"!==o.type&&"c"!==o.type||"verse"!==this.options.end_range_digits_strategy?(s=this.handle_obj(o,[],s),o=s[0][0],s=s[1],s=this.handle_obj(i,[],s),i=s[0][0],s=s[1],e.value=[o,i],e.indices=[o.indices[0],i.indices[1]],delete e.absolute_indices,r={b:o.passages[0].start.b,c:o.passages[0].start.c,v:o.passages[0].start.v,type:o.type},a={b:i.passages[0].end.b,c:i.passages[0].end.c,v:i.passages[0].end.v,type:i.type},i.passages[0].valid.messages.start_chapter_is_zero&&(a.c=0),i.passages[0].valid.messages.start_verse_is_zero&&(a.v=0),l=this.validate_ref(e.start_context.translations,r,a),l.valid?(i=this.range_handle_valid(l,e,o,r,i,a,t),o=i[0],i=i[1],o?i:(null==e.absolute_indices&&(e.absolute_indices=this.get_absolute_indices(e.indices)),e.passages=[{start:r,end:a,valid:l}],null!=e.start_context.translations&&(e.passages[0].translations=e.start_context.translations),t.push(e),[t,s])):this.range_handle_invalid(l,e,o,r,i,a,t)):this.range_change_integer_end(e,t)
},e.prototype.range_change_end=function(e,t,n){var s;return s=e.value[1],"integer"===s.type?(s.original_value=s.value,s.value=n):"v"===s.type?(s=this.pluck("integer",s.value),s.original_value=s.value,s.value=n):"cv"===s.type&&(s=this.pluck("c",s.value),s.original_value=s.value,s.value=n),this.handle_obj(e,t,e.start_context)},e.prototype.range_change_integer_end=function(e,t){var n,s;return n=e.value,s=n[0],n=n[1],e.original_type=e.type,e.original_value=[s,n],e.type="integer"===s.type?"cv":s.type+"v","integer"===s.type&&(e.value[0]={type:"c",value:[s],indices:s.indices}),"integer"===n.type&&(e.value[1]={type:"v",value:[n],indices:n.indices}),this.handle_obj(e,t,e.start_context)},e.prototype.range_change_cv_end=function(e,t){var s,i,a;return s=e.value,a=s[0],s=s[1],e.original_type=e.type,e.original_value=[a,s],e.type="sequence",i=s.value,s=i[0],i=i[1],s=n.shallow_clone(s),s.original_type=s.type,s.type="v",e.value=[[{type:"range",value:[a,s],indices:[a.indices[0],s.indices[1]]}],[i]],this.sequence(e,t,e.start_context)},e.prototype.range_validate=function(e,t,n,s){return e.messages.end_chapter_not_exist?(n.original_c=n.c,n.c=e.messages.end_chapter_not_exist,null!=n.v&&(n.v=this.validate_ref(s.start_context.translations,{b:n.b,c:n.c,v:999}).messages.end_verse_not_exist)):e.messages.end_verse_not_exist&&(n.original_v=n.v,n.v=e.messages.end_verse_not_exist),e.messages.end_verse_is_zero&&"allow"!==this.options.zero_verse_strategy&&(n.v=e.messages.end_verse_is_zero),e.messages.end_chapter_is_zero&&(n.c=e.messages.end_chapter_is_zero),e=this.fix_start_zeroes(e,t.c,t.v),t.c=e[0],t.v=e[1],!0},e.prototype.range_check_new_end=function(e,t,n,s){var i,a;return i=0,a=null,s.messages.end_chapter_before_start?a="c":s.messages.end_verse_before_start&&(a="v"),null!=a&&(i=this.range_get_new_end_value(t,n,s,a)),i>0&&(t={b:n.b,c:n.c,v:n.v},t[a]=i,e=this.validate_ref(e,t),e.valid||(i=0)),i},e.prototype.range_get_new_end_value=function(e,t,n,s){var i;return i=0,"c"===s&&n.messages.end_chapter_is_zero||"v"===s&&n.messages.end_verse_is_zero?i:(e[s]>=10&&10>t[s]&&e[s]-10*Math.floor(e[s]/10)<t[s]?i=t[s]+10*Math.floor(e[s]/10):e[s]>=100&&100>t[s]&&e[s]-100<t[s]&&(i=t[s]+100),i)},e.prototype.range_handle_valid=function(e,t,n,s,i,a,o){return e.messages.end_chapter_not_exist&&"verse"===this.options.end_range_digits_strategy&&null==s.v&&("integer"===i.type||"v"===i.type)&&(n="v"===i.type?this.pluck("integer",i.value):i.value,n=this.validate_ref(t.start_context.translations,{b:s.b,c:s.c,v:n}),n.valid)?[!0,this.range_change_integer_end(t,o)]:e.messages.end_chapter_not_exist&&"verse"===this.options.end_range_digits_strategy&&null!=s.v&&"cv"===i.type&&(n=this.validate_ref(t.start_context.translations,{b:a.b,c:s.c,v:a.c}),n.valid&&(n=this.validate_ref(t.start_context.translations,{b:a.b,c:s.c,v:a.v})),n.valid)?[!0,this.range_change_cv_end(t,o)]:(this.range_validate(e,s,a,t),[!1,null])},e.prototype.range_handle_invalid=function(e,t,n,s,i,a,o){return((e.messages.end_chapter_before_start||e.messages.end_verse_before_start)&&("integer"===i.type||"v"===i.type)||e.messages.end_chapter_before_start&&"cv"===i.type)&&(e=this.range_check_new_end(t.start_context.translations,s,a,e),e>0)?this.range_change_end(t,o,e):"verse"!==this.options.end_range_digits_strategy||void 0!==s.v||"integer"!==i.type&&"v"!==i.type||(e="v"===i.type?this.pluck("integer",i.value):i.value,s=this.validate_ref(t.start_context.translations,{b:s.b,c:s.c,v:e}),!s.valid)?(s=[t.type,"sequence"],t.original_type=s[0],t.type=s[1],n=[[n,i],[[n],[i]]],t.original_value=n[0],t.value=n[1],this.handle_obj(t,o,t.start_context)):this.range_change_integer_end(t,o)},e.prototype.translation_sequence=function(e,t,n){var s,i,a,o,r;for(i=[],i.push({translation:this.books[e.value[0].value].parsed}),r=e.value[1],a=0,o=r.length;o>a;a++)s=r[a],s=this.books[this.pluck("translation",s).value].parsed,null!=s&&i.push({translation:s});for(a=0,o=i.length;o>a;a++)s=i[a],null!=this.translations.aliases[s.translation]?(s.alias=this.translations.aliases[s.translation].alias,s.osis=this.translations.aliases[s.translation].osis):(s.alias="default",s.osis=s.translation.toUpperCase());if(t.length>0){for(a=0,s=o=r=t.length-1;0>=r?0>=o:o>=0;s=0>=r?++o:--o)if(null!=t[s].original_type&&(t[s].type=t[s].original_type),null!=t[s].original_value&&(t[s].value=t[s].original_value),"translation_sequence"===t[s].type){a=s+1;break}t.length>a&&(t[a].start_context.translations=i,n=this.handle_array(t.slice(a),[],t[a].start_context),n=n[1])}return null==e.absolute_indices&&(e.absolute_indices=this.get_absolute_indices(e.indices)),t.push(e),this.reset_context(n,["translations"]),[t,n]},e.prototype.pluck=function(e,t){var n,s,i;for(s=0,i=t.length;i>s;s++)if(n=t[s],null!=n.type&&n.type===e)return"c"===e||"v"===e?this.pluck("integer",n.value):n;return null},e.prototype.set_context_from_object=function(e,t,n){var s,i,a,o;for(o=[],i=0,a=t.length;a>i;i++)s=t[i],null!=n[s]&&o.push(e[s]=n[s]);return o},e.prototype.reset_context=function(e,t){var n,s,i,a;for(a=[],s=0,i=t.length;i>s;s++)n=t[s],a.push(delete e[n]);return a},e.prototype.fix_start_zeroes=function(e,t,n){return e.valid&&(e.messages.start_chapter_is_zero&&(t=e.messages.start_chapter_is_zero),e.messages.start_verse_is_zero&&"allow"!==this.options.zero_verse_strategy&&(n=e.messages.start_verse_is_zero)),[t,n]},e.prototype.calculate_indices=function(e,t){var n,s,i,a,o,r,l,h,u,c,d,p;for(l="book",s=[],i=0,t=parseInt(t,10),r=[e],p=["",""],h=0,c=p.length;c>h;h++){for(n=p[h],o=[],u=0,d=r.length;d>u;u++)a=r[u],o=o.concat(a.split(n));r=o}for(h=0,u=r.length;u>h;h++)a=r[h],l="book"===l?"rest":"book",o=a.length,0!==o&&("book"===l?(a=a.replace(/\/\d+$/,""),n=i+o,s.length>0&&s[s.length-1].index===t?s[s.length-1].end=n:s.push({start:i,end:n,index:t}),i+=o+2,t=this.books[a].start_index+this.books[a].value.length-i,s.push({start:n+1,end:n+1,index:t})):(n=i+o-1,s.length>0&&s[s.length-1].index===t?s[s.length-1].end=n:s.push({start:i,end:n,index:t}),i+=o));return s},e.prototype.get_absolute_indices=function(e){var t,n,s,i,a,o,r;for(s=e[0],e=e[1],t=i=null,r=this.indices,a=0,o=r.length;o>a;a++)if(n=r[a],null===i&&s>=n.start&&n.end>=s&&(i=s+n.index),e>=n.start&&n.end>=e){t=e+n.index+1;break}return[i,t]},e.prototype.validate_ref=function(e,t,n){var s,i;return e||(e=[{translation:"default",osis:"",alias:"default"}]),i=e[0],null==i?{valid:!1,messages:{translation_invalid:!0}}:(s={},null==i.alias&&(i.alias="default"),null==i.alias?{valid:!1,messages:{translation_invalid:!0}}:(null==this.translations.aliases[i.alias]&&(i.alias="default",s.translation_unknown=!0),s=this.validate_start_ref(i.alias,t,!0,s),e=s[0],s=s[1],n&&(t=this.validate_end_ref(i.alias,t,n,e,s),e=t[0],s=t[1]),{valid:e,messages:s}))},e.prototype.validate_start_ref=function(e,t,n,s){var i,a;if("default"!==e&&null==(null!=(i=this.translations[e])?i.chapters[t.b]:void 0)&&this.promote_book_to_translation(t.b,e),i=null!=(null!=(a=this.translations[e])?a.order:void 0)?e:"default",null!=this.translations[i].order[t.b]){if(null==t.c&&(t.c=1),t.c=parseInt(t.c,10),isNaN(t.c))return s.start_chapter_not_numeric=!0,[!1,s];0===t.c&&(s.start_chapter_is_zero=1,"error"===this.options.zero_chapter_strategy?n=!1:t.c=1),t.c>0&&null!=this.translations[e].chapters[t.b][t.c-1]?null!=t.v&&(t.v=parseInt(t.v,10),isNaN(t.v)?(n=!1,s.start_verse_not_numeric=!0):0===t.v?(s.start_verse_is_zero=1,"error"===this.options.zero_verse_strategy?n=!1:"upgrade"===this.options.zero_verse_strategy&&(t.v=1)):t.v>this.translations[e].chapters[t.b][t.c-1]&&(n=!1,s.start_verse_not_exist=this.translations[e].chapters[t.b][t.c-1])):(n=!1,1!==t.c&&1===this.translations[e].chapters[t.b].length?s.start_chapter_not_exist_in_single_chapter_book=1:t.c>0&&(s.start_chapter_not_exist=this.translations[e].chapters[t.b].length))}else n=!1,s.start_book_not_exist=!0;return[n,s]},e.prototype.validate_end_ref=function(e,t,n,s,i){var a,o;return"default"!==e&&null==(null!=(a=this.translations[e])?a.chapters[n.b]:void 0)&&this.promote_book_to_translation(n.b,e),a=null!=(null!=(o=this.translations[e])?o.order:void 0)?e:"default",null!=n.c&&(n.c=parseInt(n.c,10)),null!=n.v&&(n.v=parseInt(n.v,10)),null==n.c||isNaN(n.c)||0!==n.c||(i.end_chapter_is_zero=1,"error"===this.options.zero_chapter_strategy?s=!1:n.c=1),null!=this.translations[a].order[n.b]?(null!=this.translations[a].order[t.b]&&this.translations[a].order[t.b]>this.translations[a].order[n.b]&&(s=!1,i.end_book_before_start=!0),t.b!==n.b||null==n.c||isNaN(n.c)||(null==t.c&&(t.c=1),!isNaN(parseInt(t.c,10))&&t.c>n.c?(s=!1,i.end_chapter_before_start=!0):t.c!==n.c||null==n.v||isNaN(n.v)||(null==t.v&&(t.v=1),!isNaN(parseInt(t.v,10))&&t.v>n.v&&(s=!1,i.end_verse_before_start=!0))),null==n.c||isNaN(n.c)||null!=this.translations[e].chapters[n.b][n.c-1]||(1===this.translations[e].chapters[n.b].length?i.end_chapter_not_exist_in_single_chapter_book=1:n.c>0&&(i.end_chapter_not_exist=this.translations[e].chapters[n.b].length)),null==n.v||isNaN(n.v)||(null==n.c&&(n.c=this.translations[e].chapters[n.b].length),n.v>this.translations[e].chapters[n.b][n.c-1]?i.end_verse_not_exist=this.translations[e].chapters[n.b][n.c-1]:0===n.v&&(i.end_verse_is_zero=1,"error"===this.options.zero_verse_strategy?s=!1:"upgrade"===this.options.zero_verse_strategy&&(n.v=1)))):(s=!1,i.end_book_not_exist=!0),null!=n.c&&isNaN(n.c)&&(s=!1,i.end_chapter_not_numeric=!0),null!=n.v&&isNaN(n.v)&&(s=!1,i.end_verse_not_numeric=!0),[s,i]},e.prototype.promote_book_to_translation=function(e,t){var s,i,a;return null==(s=this.translations)[t]&&(s[t]={}),null==(s=this.translations[t]).chapters&&(s.chapters={}),this.translations[t].chapters[e]=null!=(null!=(i=this.translations.alternates[t])?null!=(a=i.chapters)?a[e]:void 0:void 0)?this.translations.alternates[t].chapters[e]:n.shallow_clone_array(this.translations["default"].chapters[e])},e}(),n={shallow_clone:function(e){var t,n,i;if(null==e)return e;n={};for(t in e)s.call(e,t)&&(i=e[t],n[t]=i);return n},shallow_clone_array:function(e){var t,n,s,i;if(null==e)return e;for(n=[],t=s=0,i=e.length;i>=0?i>=s:s>=i;t=i>=0?++s:--s)e[t]!==void 0&&(n[t]=e[t]);return n}},e.prototype.regexps.translations=/(?:(?:A(?:MP|SV)|RSV|N(?:RSV|LT|I(?:RV|V)|KJV|A(?:B(?:RE)?|SB?))|MSG|TNIV|CE[BV]|E[RS]V|HCSB|KJV))\b/gi,e.prototype.translations={aliases:{ceb:{osis:"CEB",alias:"ceb"},kjv:{osis:"KJV",alias:"kjv"},nab:{osis:"NAB",alias:"nab"},nabre:{osis:"NABRE",alias:"nab"},nas:{osis:"NASB",alias:"default"},nirv:{osis:"NIRV",alias:"kjv"},niv:{osis:"NIV",alias:"kjv"},nkjv:{osis:"NKJV",alias:"nkjv"},nlt:{osis:"NLT",alias:"nlt"},nrsv:{osis:"NRSV",alias:"nrsv"},tniv:{osis:"TNIV",alias:"kjv"},"default":{osis:"",alias:"default"}},"default":{order:{Gen:1,Exod:2,Lev:3,Num:4,Deut:5,Josh:6,Judg:7,Ruth:8,"1Sam":9,"2Sam":10,"1Kgs":11,"2Kgs":12,"1Chr":13,"2Chr":14,Ezra:15,Neh:16,Esth:17,Job:18,Ps:19,Prov:20,Eccl:21,Song:22,Isa:23,Jer:24,Lam:25,Ezek:26,Dan:27,Hos:28,Joel:29,Amos:30,Obad:31,Jonah:32,Mic:33,Nah:34,Hab:35,Zeph:36,Hag:37,Zech:38,Mal:39,Matt:40,Mark:41,Luke:42,John:43,Acts:44,Rom:45,"1Cor":46,"2Cor":47,Gal:48,Eph:49,Phil:50,Col:51,"1Thess":52,"2Thess":53,"1Tim":54,"2Tim":55,Titus:56,Phlm:57,Heb:58,Jas:59,"1Pet":60,"2Pet":61,"1John":62,"2John":63,"3John":64,Jude:65,Rev:66,Tob:67,Jdt:68,GkEsth:69,Wis:70,Sir:71,Bar:72,PrAzar:73,Sus:74,Bel:75,SgThree:76,EpJer:77,"1Macc":78,"2Macc":79,"3Macc":80,"4Macc":81,"1Esd":82,"2Esd":83,PrMan:84},chapters:{Gen:[31,25,24,26,32,22,24,22,29,32,32,20,18,24,21,16,27,33,38,18,34,24,20,67,34,35,46,22,35,43,55,32,20,31,29,43,36,30,23,23,57,38,34,34,28,34,31,22,33,26],Exod:[22,25,22,31,23,30,25,32,35,29,10,51,22,31,27,36,16,27,25,26,36,31,33,18,40,37,21,43,46,38,18,35,23,35,35,38,29,31,43,38],Lev:[17,16,17,35,19,30,38,36,24,20,47,8,59,57,33,34,16,30,37,27,24,33,44,23,55,46,34],Num:[54,34,51,49,31,27,89,26,23,36,35,16,33,45,41,50,13,32,22,29,35,41,30,25,18,65,23,31,40,16,54,42,56,29,34,13],Deut:[46,37,29,49,33,25,26,20,29,22,32,32,18,29,23,22,20,22,21,20,23,30,25,22,19,19,26,68,29,20,30,52,29,12],Josh:[18,24,17,24,15,27,26,35,27,43,23,24,33,15,63,10,18,28,51,9,45,34,16,33],Judg:[36,23,31,24,31,40,25,35,57,18,40,15,25,20,20,31,13,31,30,48,25],Ruth:[22,23,18,22],"1Sam":[28,36,21,22,12,21,17,22,27,27,15,25,23,52,35,23,58,30,24,42,15,23,29,22,44,25,12,25,11,31,13],"2Sam":[27,32,39,12,25,23,29,18,13,19,27,31,39,33,37,23,29,33,43,26,22,51,39,25],"1Kgs":[53,46,28,34,18,38,51,66,28,29,43,33,34,31,34,34,24,46,21,43,29,53],"2Kgs":[18,25,27,44,27,33,20,29,37,36,21,21,25,29,38,20,41,37,37,21,26,20,37,20,30],"1Chr":[54,55,24,43,26,81,40,40,44,14,47,40,14,17,29,43,27,17,19,8,30,19,32,31,31,32,34,21,30],"2Chr":[17,18,17,22,14,42,22,18,31,19,23,16,22,15,19,14,19,34,11,37,20,12,21,27,28,23,9,27,36,27,21,33,25,33,27,23],Ezra:[11,70,13,24,17,22,28,36,15,44],Neh:[11,20,32,23,19,19,73,18,38,39,36,47,31],Esth:[22,23,15,17,14,14,10,17,32,3],Job:[22,13,26,21,27,30,21,22,35,22,20,25,28,22,35,22,16,21,29,29,34,30,17,25,6,14,23,28,25,31,40,22,33,37,16,33,24,41,30,24,34,17],Ps:[6,12,8,8,12,10,17,9,20,18,7,8,6,7,5,11,15,50,14,9,13,31,6,10,22,12,14,9,11,12,24,11,22,22,28,12,40,22,13,17,13,11,5,26,17,11,9,14,20,23,19,9,6,7,23,13,11,11,17,12,8,12,11,10,13,20,7,35,36,5,24,20,28,23,10,12,20,72,13,19,16,8,18,12,13,17,7,18,52,17,16,15,5,23,11,13,12,9,9,5,8,28,22,35,45,48,43,13,31,7,10,10,9,8,18,19,2,29,176,7,8,9,4,8,5,6,5,6,8,8,3,18,3,3,21,26,9,8,24,13,10,7,12,15,21,10,20,14,9,6],Prov:[33,22,35,27,23,35,27,36,18,32,31,28,25,35,33,33,28,24,29,30,31,29,35,34,28,28,27,28,27,33,31],Eccl:[18,26,22,16,20,12,29,17,18,20,10,14],Song:[17,17,11,16,16,13,13,14],Isa:[31,22,26,6,30,13,25,22,21,34,16,6,22,32,9,14,14,7,25,6,17,25,18,23,12,21,13,29,24,33,9,20,24,17,10,22,38,22,8,31,29,25,28,28,25,13,15,22,26,11,23,15,12,17,13,12,21,14,21,22,11,12,19,12,25,24],Jer:[19,37,25,31,31,30,34,22,26,25,23,17,27,22,21,21,27,23,15,18,14,30,40,10,38,24,22,17,32,24,40,44,26,22,19,32,21,28,18,16,18,22,13,30,5,28,7,47,39,46,64,34],Lam:[22,22,66,22,22],Ezek:[28,10,27,17,17,14,27,18,11,22,25,28,23,23,8,63,24,32,14,49,32,31,49,27,17,21,36,26,21,26,18,32,33,31,15,38,28,23,29,49,26,20,27,31,25,24,23,35],Dan:[21,49,30,37,31,28,28,27,27,21,45,13],Hos:[11,23,5,19,15,11,16,14,17,15,12,14,16,9],Joel:[20,32,21],Amos:[15,16,15,13,27,14,17,14,15],Obad:[21],Jonah:[17,10,10,11],Mic:[16,13,12,13,15,16,20],Nah:[15,13,19],Hab:[17,20,19],Zeph:[18,15,20],Hag:[15,23],Zech:[21,13,10,14,11,15,14,23,17,12,17,14,9,21],Mal:[14,17,18,6],Matt:[25,23,17,25,48,34,29,34,38,42,30,50,58,36,39,28,27,35,30,34,46,46,39,51,46,75,66,20],Mark:[45,28,35,41,43,56,37,38,50,52,33,44,37,72,47,20],Luke:[80,52,38,44,39,49,50,56,62,42,54,59,35,35,32,31,37,43,48,47,38,71,56,53],John:[51,25,36,54,47,71,53,59,41,42,57,50,38,31,27,33,26,40,42,31,25],Acts:[26,47,26,37,42,15,60,40,43,48,30,25,52,28,41,40,34,28,41,38,40,30,35,27,27,32,44,31],Rom:[32,29,31,25,21,23,25,39,33,21,36,21,14,23,33,27],"1Cor":[31,16,23,21,13,20,40,13,27,33,34,31,13,40,58,24],"2Cor":[24,17,18,18,21,18,16,24,15,18,33,21,14],Gal:[24,21,29,31,26,18],Eph:[23,22,21,32,33,24],Phil:[30,30,21,23],Col:[29,23,25,18],"1Thess":[10,20,13,18,28],"2Thess":[12,17,18],"1Tim":[20,15,16,16,25,21],"2Tim":[18,26,17,22],Titus:[16,15,15],Phlm:[25],Heb:[14,18,19,16,14,20,28,13,28,39,40,29,25],Jas:[27,26,18,17,20],"1Pet":[25,25,22,19,14],"2Pet":[21,22,18],"1John":[10,29,24,21,21],"2John":[13],"3John":[15],Jude:[25],Rev:[20,29,22,11,14,17,17,13,21,11,19,17,18,20,8,21,18,24,21,15,27,21],Tob:[22,14,17,21,22,18,16,21,6,13,18,22,17,15],Jdt:[16,28,10,15,24,21,32,36,14,23,23,20,20,19,14,25],GkEsth:[22,23,15,17,14,14,10,17,32,13,12,6,18,19,16,24],Wis:[16,24,19,20,23,25,30,21,18,21,26,27,19,31,19,29,21,25,22],Sir:[30,18,31,31,15,37,36,19,18,31,34,18,26,27,20,30,32,33,30,31,28,27,27,34,26,29,30,26,28,25,31,24,33,31,26,31,31,34,35,30,22,25,33,23,26,20,25,25,16,29,30],Bar:[22,35,37,37,9],PrAzar:[68],Sus:[64],Bel:[42],SgThree:[39],EpJer:[73],"1Macc":[64,70,60,61,68,63,50,32,73,89,74,53,53,49,41,24],"2Macc":[36,32,40,50,27,31,42,36,29,38,38,45,26,46,39],"3Macc":[29,33,30,21,51,41,23],"4Macc":[35,24,21,26,38,35,23,29,32,21,27,19,27,20,32,25,24,24],"1Esd":[58,30,24,63,73,34,15,96,55],"2Esd":[40,48,36,52,56,59,70,63,47,59,46,51,58,48,63,78],PrMan:[15],Ps151:[7]}},alternates:{vulgate:{chapters:{Ps:[6,13,9,10,13,11,18,10,39,8,9,6,7,5,10,15,51,15,10,14,32,6,10,22,12,14,9,11,13,25,11,22,23,28,13,40,23,14,18,14,12,5,26,18,12,10,15,21,23,21,11,7,9,24,13,12,12,18,14,9,13,12,11,14,20,8,36,37,6,24,20,28,23,11,13,21,72,13,20,17,8,19,13,14,17,7,19,53,17,16,16,5,23,11,13,12,9,9,5,8,29,22,35,45,48,43,14,31,7,10,10,9,26,9,19,2,29,176,7,8,9,4,8,5,6,5,6,8,8,3,18,3,3,21,26,9,8,24,14,10,8,12,15,21,10,11,20,14,9,7]}},ceb:{chapters:{"2Cor":[24,17,18,18,21,18,16,24,15,18,33,21,13],Rev:[20,29,22,11,14,17,17,13,21,11,19,18,18,20,8,21,18,24,21,15,27,21],Tob:[22,14,17,21,22,18,16,21,6,13,18,22,18,15],PrAzar:[67],EpJer:[72],"1Esd":[55,26,24,63,71,33,15,92,55]}},kjv:{chapters:{"3John":[14]}},nab:{chapters:{Gen:[31,25,24,26,32,22,24,22,29,32,32,20,18,24,21,16,27,33,38,18,34,24,20,67,34,35,46,22,35,43,54,33,20,31,29,43,36,30,23,23,57,38,34,34,28,34,31,22,33,26],Exod:[22,25,22,31,23,30,29,28,35,29,10,51,22,31,27,36,16,27,25,26,37,30,33,18,40,37,21,43,46,38,18,35,23,35,35,38,29,31,43,38],Lev:[17,16,17,35,26,23,38,36,24,20,47,8,59,57,33,34,16,30,37,27,24,33,44,23,55,46,34],Num:[54,34,51,49,31,27,89,26,23,36,35,16,33,45,41,35,28,32,22,29,35,41,30,25,19,65,23,31,39,17,54,42,56,29,34,13],Deut:[46,37,29,49,33,25,26,20,29,22,32,31,19,29,23,22,20,22,21,20,23,29,26,22,19,19,26,69,28,20,30,52,29,12],"1Sam":[28,36,21,22,12,21,17,22,27,27,15,25,23,52,35,23,58,30,24,42,16,23,28,23,44,25,12,25,11,31,13],"2Sam":[27,32,39,12,25,23,29,18,13,19,27,31,39,33,37,23,29,32,44,26,22,51,39,25],"1Kgs":[53,46,28,20,32,38,51,66,28,29,43,33,34,31,34,34,24,46,21,43,29,54],"2Kgs":[18,25,27,44,27,33,20,29,37,36,20,22,25,29,38,20,41,37,37,21,26,20,37,20,30],"1Chr":[54,55,24,43,41,66,40,40,44,14,47,41,14,17,29,43,27,17,19,8,30,19,32,31,31,32,34,21,30],"2Chr":[18,17,17,22,14,42,22,18,31,19,23,16,23,14,19,14,19,34,11,37,20,12,21,27,28,23,9,27,36,27,21,33,25,33,27,23],Neh:[11,20,38,17,19,19,72,18,37,40,36,47,31],Job:[22,13,26,21,27,30,21,22,35,22,20,25,28,22,35,22,16,21,29,29,34,30,17,25,6,14,23,28,25,31,40,22,33,37,16,33,24,41,30,32,26,17],Ps:[6,11,9,9,13,11,18,10,21,18,7,9,6,7,5,11,15,51,15,10,14,32,6,10,22,12,14,9,11,13,25,11,22,23,28,13,40,23,14,18,14,12,5,27,18,12,10,15,21,23,21,11,7,9,24,14,12,12,18,14,9,13,12,11,14,20,8,36,37,6,24,20,28,23,11,13,21,72,13,20,17,8,19,13,14,17,7,19,53,17,16,16,5,23,11,13,12,9,9,5,8,29,22,35,45,48,43,14,31,7,10,10,9,8,18,19,2,29,176,7,8,9,4,8,5,6,5,6,8,8,3,18,3,3,21,26,9,8,24,14,10,8,12,15,21,10,20,14,9,6],Eccl:[18,26,22,17,19,12,29,17,18,20,10,14],Song:[17,17,11,16,16,12,14,14],Isa:[31,22,26,6,30,13,25,23,20,34,16,6,22,32,9,14,14,7,25,6,17,25,18,23,12,21,13,29,24,33,9,20,24,17,10,22,38,22,8,31,29,25,28,28,25,13,15,22,26,11,23,15,12,17,13,12,21,14,21,22,11,12,19,11,25,24],Jer:[19,37,25,31,31,30,34,23,25,25,23,17,27,22,21,21,27,23,15,18,14,30,40,10,38,24,22,17,32,24,40,44,26,22,19,32,21,28,18,16,18,22,13,30,5,28,7,47,39,46,64,34],Ezek:[28,10,27,17,17,14,27,18,11,22,25,28,23,23,8,63,24,32,14,44,37,31,49,27,17,21,36,26,21,26,18,32,33,31,15,38,28,23,29,49,26,20,27,31,25,24,23,35],Dan:[21,49,100,34,30,29,28,27,27,21,45,13,64,42],Hos:[9,25,5,19,15,11,16,14,17,15,11,15,15,10],Joel:[20,27,5,21],Jonah:[16,11,10,11],Mic:[16,13,12,14,14,16,20],Nah:[14,14,19],Zech:[17,17,10,14,11,15,14,23,17,12,17,14,9,21],Mal:[14,17,24],Acts:[26,47,26,37,42,15,60,40,43,49,30,25,52,28,41,40,34,28,40,38,40,30,35,27,27,32,44,31],"2Cor":[24,17,18,18,21,18,16,24,15,18,33,21,13],Rev:[20,29,22,11,14,17,17,13,21,11,19,18,18,20,8,21,18,24,21,15,27,21],Tob:[22,14,17,21,22,18,17,21,6,13,18,22,18,15],Sir:[30,18,31,31,15,37,36,19,18,31,34,18,26,27,20,30,32,33,30,31,28,27,27,33,26,29,30,26,28,25,31,24,33,31,26,31,31,34,35,30,22,25,33,23,26,20,25,25,16,29,30],Bar:[22,35,38,37,9,72],"2Macc":[36,32,40,50,27,31,42,36,29,38,38,46,26,46,39]}},nlt:{chapters:{Rev:[20,29,22,11,14,17,17,13,21,11,19,18,18,20,8,21,18,24,21,15,27,21]}},nrsv:{chapters:{"2Cor":[24,17,18,18,21,18,16,24,15,18,33,21,13],Rev:[20,29,22,11,14,17,17,13,21,11,19,18,18,20,8,21,18,24,21,15,27,21]}}}},e.prototype.regexps.space="[\\s\\xa0]",e.prototype.regexps.escaped_passage=RegExp("(?:^|[^\\x1f\\x1e\\dA-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u024f\u1e00-\u1eff\u2c60-\u2c7f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua7ff])((?:(?:ch(?:apters?|a?pts?\\.?|a?p?s?\\.?)?\\s*\\d+\\s*(?:[\\u2013\\u2014\\-]|through|thru|to)\\s*\\d+\\s*(?:from|of|in)(?:\\s+the\\s+book\\s+of)?\\s*)|(?:ch(?:apters?|a?pts?\\.?|a?p?s?\\.?)?\\s*\\d+\\s*(?:from|of|in)(?:\\s+the\\s+book\\s+of)?\\s*)|(?:\\d+(?:th|nd|st)\\s*ch(?:apter|a?pt\\.?|a?p?\\.?)?\\s*(?:from|of|in)(?:\\s+the\\s+book\\s+of)?\\s*))?\\x1f(\\d+)(?:/\\d+)?\\x1f(?:/\\d+\\x1f|[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014]|title(?![a-z])|see"+e.prototype.regexps.space+"+also|ff(?![a-z0-9])|f(?![a-z0-9])|chapters|chapter|through|compare|chapts|verses|chpts|chapt|verse|chap|thru|also|chp|chs|cha|and|see|ver|vss|ch|to|cf|vs|vv|v|[a-e](?!\\w)|$)+)","gi"),e.prototype.regexps.match_end_split=/\d+\W*title|\d+\W*(?:ff(?![a-z0-9])|f(?![a-z0-9]))(?:[\s\xa0*]*\.)?|\d+[\s\xa0*]*[a-e](?!\w)|\x1e(?:[\s\xa0*]*[)\]\uff09])?|[\d\x1f]+/gi,e.prototype.regexps.control=/[\x1e\x1f]/g,e.prototype.regexps.pre_book="[^A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u024f\u1e00-\u1eff\u2c60-\u2c7f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua7ff]",e.prototype.regexps.first="(?:1st|1|I|First)\\.?"+e.prototype.regexps.space+"*",e.prototype.regexps.second="(?:2nd|2|II|Second)\\.?"+e.prototype.regexps.space+"*",e.prototype.regexps.third="(?:3rd|3|III|Third)\\.?"+e.prototype.regexps.space+"*",e.prototype.regexps.range_and="(?:[&\u2013\u2014-]|(?:and|compare|cf|see"+e.prototype.regexps.space+"+also|also|see)|(?:through|thru|to))",e.prototype.regexps.range_only="(?:[\u2013\u2014-]|(?:through|thru|to))",e.prototype.regexps.get_books=function(t,n){var s,i,a,o,r;if(i=[{osis:["Ps"],apocrypha:!0,extra:"2",regexp:/(\b)(Ps151)(?=\.1)/g},{osis:["Gen"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(G(?:n|e(?:n(?:i(?:[ei]s(?:[eiu]s)|s[eiu]s)|sis|n(?:e(?:is(?:[uie]s)?|es[iue]s|s[eiu]s)|i(?:[ei]s(?:[eiu]s)|s[uie]s)|sis)|e(?:is(?:[ieu]s)?|es[iue]s|s(?:[ei]s?|us)))?)?))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Exod"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(Ex(?:o(?:d(?:[ui]s|[se])?)?|d)?)(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Bel"],apocrypha:!0,regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(Bel(?:[\\s\\xa0]*(?:and[\\s\\xa0]*(?:S(?:erpent|nake)|Dragon|the[\\s\\xa0]*(?:S(?:erpent|nake)|Dragon))|&[\\s\\xa0]*(?:S(?:erpent|nake)|Dragon|the[\\s\\xa0]*(?:S(?:erpent|nake)|Dragon))))?)(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Lev"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(L(?:e(?:v(?:i(?:t(?:cus|[ie]cus))?|et(?:cus|[ei]cus))?)?|iv(?:[ie]t(?:cus|[ie]cus))|v))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Num"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(N(?:u(?:m(?:b(?:ers?)?)?)?|m))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Sir"],apocrypha:!0,regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")((?:Ben[\\s\\xa0]*Sira|The[\\s\\xa0]*Wisdom[\\s\\xa0]*of[\\s\\xa0]*Jesus(?:[\\s\\xa0]*(?:Son[\\s\\xa0]*of[\\s\\xa0]*Sirach|ben[\\s\\xa0]*Sirach)|,[\\s\\xa0]*Son[\\s\\xa0]*of[\\s\\xa0]*Sirach)|Wisdom[\\s\\xa0]*of[\\s\\xa0]*Jesus(?:[\\s\\xa0]*(?:Son[\\s\\xa0]*of[\\s\\xa0]*Sirach|ben[\\s\\xa0]*Sirach)|,[\\s\\xa0]*Son[\\s\\xa0]*of[\\s\\xa0]*Sirach)|Sir(?:ach)?|Ecc(?:l(?:us(?:iasticus)?|esiasticus)|s)))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Wis"],apocrypha:!0,regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")((?:Wis(?:[\\s\\xa0]*of[\\s\\xa0]*Solomon|om[\\s\\xa0]*of[\\s\\xa0]*Solomon|d(?:[\\s\\xa0]*of[\\s\\xa0]*Solomon|om(?:[\\s\\xa0]*of[\\s\\xa0]*Solomon)?)?)?|The[\\s\\xa0]*Wis(?:[\\s\\xa0]*of[\\s\\xa0]*Solomon|om[\\s\\xa0]*of[\\s\\xa0]*Solomon|d(?:[\\s\\xa0]*of[\\s\\xa0]*Solomon|om[\\s\\xa0]*of[\\s\\xa0]*Solomon))))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Lam"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(L(?:a(?:m(?:[ie]ntations?)?)?|m))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["EpJer"],apocrypha:!0,regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")((?:Let(?:[\\s\\xa0]*of[\\s\\xa0]*Jeremiah|\\.[\\s\\xa0]*of[\\s\\xa0]*Jeremiah|ter[\\s\\xa0]*of[\\s\\xa0]*Jeremiah)|The[\\s\\xa0]*(?:Ep(?:[\\s\\xa0]*of[\\s\\xa0]*Jeremiah|\\.[\\s\\xa0]*of[\\s\\xa0]*Jeremiah|istle[\\s\\xa0]*of[\\s\\xa0]*Jeremiah)|Let(?:[\\s\\xa0]*of[\\s\\xa0]*Jeremiah|\\.[\\s\\xa0]*of[\\s\\xa0]*Jeremiah|ter[\\s\\xa0]*of[\\s\\xa0]*Jeremiah))|Ep(?:\\.[\\s\\xa0]*of[\\s\\xa0]*Jeremiah|istle[\\s\\xa0]*of[\\s\\xa0]*Jerem(?:iah|y)|Jer|[\\s\\xa0]*(?:of[\\s\\xa0]*Jeremiah|Jer))))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Rev"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(R(?:e(?:v(?:el(?:ations?)?|[oa]lations?|lations?)?)?|v))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["PrMan"],apocrypha:!0,regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")((?:The[\\s\\xa0]*Pr(?:ayer(?:s[\\s\\xa0]*(?:Manasseh|of[\\s\\xa0]*Manasseh)|[\\s\\xa0]*(?:Manasseh|of[\\s\\xa0]*Manasseh))|[\\s\\xa0]*(?:Manasseh|of[\\s\\xa0]*Manasseh))|Pr(?:ayer(?:s[\\s\\xa0]*(?:Manasseh|of[\\s\\xa0]*Manasseh)|[\\s\\xa0]*(?:Manasseh|of[\\s\\xa0]*Manasseh))|[\\s\\xa0]*(?:Man(?:asseh)?|of[\\s\\xa0]*Manasseh)|Man)))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Deut"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(D(?:t|e(?:et(?:ron(?:omy|my)|(?:[oe]ron(?:omy|my)))|u(?:t(?:ron(?:omy|my)|(?:[eo]ron(?:omy|my)))?)?)|u(?:et(?:ron(?:omy|my)|(?:[eo]ron(?:omy|my)))?|ut(?:ron(?:omy|my)|(?:[eo]ron(?:omy|my))))))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Josh"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(J(?:sh|o(?:s(?:h(?:ua)?|ua)?|us(?:hua|ua))))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Judg"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(J(?:gs?|udg(?:es)?|dgs?))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Ruth"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(R(?:th?|u(?:th?)?))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["1Esd"],apocrypha:!0,regexp:/(^|[^0-9A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u024f\u1e00-\u1eff\u2c60-\u2c7f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua7ff])((?:First[\s\xa0]*Esd(?:r(?:as)?)?|I(?:\.[\s\xa0]*Esd(?:r(?:as)?)?|[\s\xa0]*Esd(?:r(?:as)?)?)|1(?:\.[\s\xa0]*Esd(?:r(?:as)?)?|[\s\xa0]*Esd(?:r(?:as)?)?|Esd|st(?:\.[\s\xa0]*Esd(?:r(?:as)?)?|[\s\xa0]*Esd(?:r(?:as)?)?))))(?:(?=[\d\s\xa0.:,;\x1e\x1f&\(\)\uff08\uff09\[\]\/"'\*=~\-\u2013\u2014])|$)/gi},{osis:["2Esd"],apocrypha:!0,regexp:/(^|[^0-9A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u024f\u1e00-\u1eff\u2c60-\u2c7f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua7ff])((?:2(?:\.[\s\xa0]*Esd(?:r(?:as)?)?|[\s\xa0]*Esd(?:r(?:as)?)?|nd(?:\.[\s\xa0]*Esd(?:r(?:as)?)?|[\s\xa0]*Esd(?:r(?:as)?)?)|Esd)|Second[\s\xa0]*Esd(?:r(?:as)?)?|II(?:\.[\s\xa0]*Esd(?:r(?:as)?)?|[\s\xa0]*Esd(?:r(?:as)?)?)))(?:(?=[\d\s\xa0.:,;\x1e\x1f&\(\)\uff08\uff09\[\]\/"'\*=~\-\u2013\u2014])|$)/gi},{osis:["Isa"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(I(?:s(?:i(?:[ia](?:(?:[ia](?:(?:[ia]ha?|ha?))|ha?))|ha)|a(?:a(?:[ai](?:(?:[ai]ha?|ha?))|ha?)|i(?:[ai](?:(?:[ia]ha?|ha?))|sha?|ha?)?|ha?)?|sah)?|a))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["2Sam"],regexp:/(^|[^0-9A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u024f\u1e00-\u1eff\u2c60-\u2c7f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua7ff])((?:II(?:[\s\xa0]*(?:Kingdoms|S(?:a(?:m(?:u[ea]l[ls]?)?)?|ma?))|\.[\s\xa0]*(?:Kingdoms|S(?:a(?:m(?:u[ea]l[sl]?)?)?|ma?)))|Second[\s\xa0]*(?:Kingdoms|S(?:a(?:m(?:u[ae]l[ls]?)?)?|ma?))|2(?:[\s\xa0]*(?:Kingdoms|S(?:a(?:m(?:u[ea]l[sl]?)?)?|ma?)?)|nd(?:[\s\xa0]*(?:Kingdoms|S(?:a(?:m(?:u[ae]l[sl]?)?)?|ma?))|\.[\s\xa0]*(?:Kingdoms|S(?:a(?:m(?:u[ae]l[ls]?)?)?|ma?)))|\.[\s\xa0]*(?:Kingdoms|S(?:a(?:m(?:u[ae]l[sl]?)?)?|ma?))|Sam)))(?:(?=[\d\s\xa0.:,;\x1e\x1f&\(\)\uff08\uff09\[\]\/"'\*=~\-\u2013\u2014])|$)/gi},{osis:["1Sam"],regexp:/(^|[^0-9A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u024f\u1e00-\u1eff\u2c60-\u2c7f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua7ff])((?:1(?:[\s\xa0]*(?:Kingdoms|S(?:a(?:m(?:u[ae]l[ls]?)?)?|ma?)?)|\.[\s\xa0]*(?:Kingdoms|S(?:a(?:m(?:u[ea]l[ls]?)?)?|ma?))|st(?:[\s\xa0]*(?:Kingdoms|S(?:a(?:m(?:u[ea]l[ls]?)?)?|ma?))|\.[\s\xa0]*(?:Kingdoms|S(?:a(?:m(?:u[ae]l[ls]?)?)?|ma?)))|Sam)|I(?:[\s\xa0]*(?:Kingdoms|S(?:a(?:m(?:u[ae]l[sl]?)?)?|ma?))|\.[\s\xa0]*(?:Kingdoms|S(?:a(?:m(?:u[ea]l[sl]?)?)?|ma?)))|First[\s\xa0]*(?:Kingdoms|S(?:a(?:m(?:u[ea]l[sl]?)?)?|ma?)))|Samu(?:[ae]l[ls]?))(?:(?=[\d\s\xa0.:,;\x1e\x1f&\(\)\uff08\uff09\[\]\/"'\*=~\-\u2013\u2014])|$)/gi},{osis:["2Kgs"],regexp:/(^|[^0-9A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u024f\u1e00-\u1eff\u2c60-\u2c7f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua7ff])((?:Fourth[\s\xa0]*Kingdoms|I(?:I(?:[\s\xa0]*K(?:n(?:gs?|s)?|i(?:n(?:gs?|s)?|gs?|s)?|gs?|s)?|\.[\s\xa0]*K(?:n(?:gs?|s)?|i(?:n(?:gs?|s)?|gs?|s)?|gs?|s)?)|V(?:\.[\s\xa0]*Kingdoms|[\s\xa0]*Kingdoms))|Second[\s\xa0]*K(?:n(?:gs?|s)?|i(?:n(?:gs?|s)?|gs?|s)?|gs?|s)?|2(?:nd(?:[\s\xa0]*K(?:n(?:gs?|s)?|i(?:n(?:gs?|s)?|gs?|s)?|gs?|s)?|\.[\s\xa0]*K(?:n(?:gs?|s)?|i(?:n(?:gs?|s)?|gs?|s)?|gs?|s)?)|Kgs|[\s\xa0]*K(?:n(?:gs?|s)?|i(?:n(?:gs?|s)?|gs?|s)?|gs?|s)?|\.[\s\xa0]*K(?:n(?:gs?|s)?|i(?:n(?:gs?|s)?|gs?|s)?|gs?|s)?)|4(?:th(?:\.[\s\xa0]*Kingdoms|[\s\xa0]*Kingdoms)|\.[\s\xa0]*Kingdoms|[\s\xa0]*Kingdoms)))(?:(?=[\d\s\xa0.:,;\x1e\x1f&\(\)\uff08\uff09\[\]\/"'\*=~\-\u2013\u2014])|$)/gi},{osis:["1Kgs"],regexp:/(^|[^0-9A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u024f\u1e00-\u1eff\u2c60-\u2c7f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua7ff])((?:3(?:rd(?:\.[\s\xa0]*Kingdoms|[\s\xa0]*Kingdoms)|\.[\s\xa0]*Kingdoms|[\s\xa0]*Kingdoms)|I(?:[\s\xa0]*K(?:n(?:gs?|s)?|gs?|i(?:n(?:gs?|s)?|gs?)?|s)?|II(?:\.[\s\xa0]*Kingdoms|[\s\xa0]*Kingdoms)|\.[\s\xa0]*K(?:n(?:gs?|s)?|gs?|i(?:n(?:gs?|s)?|gs?)?|s)?)|Third[\s\xa0]*Kingdoms|1(?:[\s\xa0]*K(?:n(?:gs?|s)?|gs?|i(?:n(?:gs?|s)?|gs?)?|s)?|Kgs|\.[\s\xa0]*K(?:n(?:gs?|s)?|gs?|i(?:n(?:gs?|s)?|gs?)?|s)?|st(?:[\s\xa0]*K(?:n(?:gs?|s)?|gs?|i(?:n(?:gs?|s)?|gs?)?|s)?|\.[\s\xa0]*K(?:n(?:gs?|s)?|gs?|i(?:n(?:gs?|s)?|gs?)?|s)?))|First[\s\xa0]*K(?:n(?:gs?|s)?|gs?|i(?:n(?:gs?|s)?|gs?)?|s)?)|K(?:gs|in(?:gs)?|ngs))(?:(?=[\d\s\xa0.:,;\x1e\x1f&\(\)\uff08\uff09\[\]\/"'\*=~\-\u2013\u2014])|$)/gi},{osis:["2Chr"],regexp:/(^|[^0-9A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u024f\u1e00-\u1eff\u2c60-\u2c7f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua7ff])((?:2(?:[\s\xa0]*(?:C(?:ron(?:[oi]cles?)?|h(?:r(?:o(?:n(?:ocles?|ic(?:les?|als))?)?|n)?|oron[io]cles?)?|oron[io]cles?)|Paralipomenon)|\.[\s\xa0]*(?:C(?:ron(?:[io]cles?)?|h(?:r(?:o(?:n(?:ocles?|ic(?:les?|als))?)?|n)?|oron[io]cles?)|oron[io]cles?)|Paralipomenon)|nd(?:\.[\s\xa0]*(?:C(?:ron(?:[io]cles?)?|h(?:r(?:o(?:n(?:ocles?|ic(?:les?|als))?)?|n)?|oron[io]cles?)|oron[io]cles?)|Paralipomenon)|[\s\xa0]*(?:C(?:ron(?:[oi]cles?)?|h(?:r(?:o(?:n(?:ocles?|ic(?:les?|als))?)?|n)?|oron[oi]cles?)|oron[oi]cles?)|Paralipomenon))|Chr)|II(?:\.[\s\xa0]*(?:C(?:ron(?:[io]cles?)?|h(?:r(?:o(?:n(?:ocles?|ic(?:les?|als))?)?|n)?|oron[oi]cles?)|oron[oi]cles?)|Paralipomenon)|[\s\xa0]*(?:C(?:ron(?:[oi]cles?)?|h(?:r(?:o(?:n(?:ocles?|ic(?:les?|als))?)?|n)?|oron[oi]cles?)|oron[oi]cles?)|Paralipomenon))|Second[\s\xa0]*(?:C(?:ron(?:[io]cles?)?|h(?:r(?:o(?:n(?:ocles?|ic(?:les?|als))?)?|n)?|oron[io]cles?)|oron[oi]cles?)|Paralipomenon)))(?:(?=[\d\s\xa0.:,;\x1e\x1f&\(\)\uff08\uff09\[\]\/"'\*=~\-\u2013\u2014])|$)/gi},{osis:["1Chr"],regexp:/(^|[^0-9A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u024f\u1e00-\u1eff\u2c60-\u2c7f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua7ff])((?:I(?:\.[\s\xa0]*(?:C(?:h(?:oron(?:ocles?|icles)|r(?:o(?:n(?:ocles?|ic(?:les?|als))?)?|n)?)|ron(?:[io]cles?)?|oron[io]cles?)|Paralipomenon)|[\s\xa0]*(?:C(?:h(?:oron(?:ocles?|icles)|r(?:o(?:n(?:ocles?|ic(?:les?|als))?)?|n)?)|ron(?:[io]cles?)?|oron[oi]cles?)|Paralipomenon))|Choronicle|1(?:\.[\s\xa0]*(?:C(?:h(?:oron(?:ocles?|icles)|r(?:o(?:n(?:ocles?|ic(?:les?|als))?)?|n)?)|ron(?:[io]cles?)?|oron[oi]cles?)|Paralipomenon)|Chr|[\s\xa0]*(?:Paralipomenon|C(?:h(?:oron(?:ocles?|icles)|r(?:o(?:n(?:ocles?|ic(?:les?|als))?)?|n)?)?|ron(?:[oi]cles?)?|oron[io]cles?))|st(?:\.[\s\xa0]*(?:C(?:h(?:oron(?:ocles?|icles)|r(?:o(?:n(?:ocles?|ic(?:les?|als))?)?|n)?)|ron(?:[io]cles?)?|oron[io]cles?)|Paralipomenon)|[\s\xa0]*(?:C(?:h(?:oron(?:ocles?|icles)|r(?:o(?:n(?:ocles?|ic(?:les?|als))?)?|n)?)|ron(?:[io]cles?)?|oron[io]cles?)|Paralipomenon)))|First[\s\xa0]*(?:C(?:h(?:oron(?:ocles?|icles)|r(?:o(?:n(?:ocles?|ic(?:les?|als))?)?|n)?)|ron(?:[io]cles?)?|oron[oi]cles?)|Paralipomenon))|(?:C(?:ron[io]cles?|h(?:oron(?:ocles?|icles)|ron(?:ocles?|ic(?:les?|als)))|oron[oi]cles?)|Paralipomenon))(?:(?=[\d\s\xa0.:,;\x1e\x1f&\(\)\uff08\uff09\[\]\/"'\*=~\-\u2013\u2014])|$)/gi},{osis:["Ezra"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(E(?:zra?|sra))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Neh"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(Ne(?:h(?:(?:[ie]m(?:i(?:h|i(?:[ai]h|h)|a(?:[ai]h|h)?)|a(?:h|[ai](?:(?:[ia]h|h)))))|amiah?)?)?)(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["GkEsth"],apocrypha:!0,regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")((?:G(?:k(?:Esth|[\\s\\xa0]*Esth?)|r(?:[\\s\\xa0]*Esth?|eek[\\s\\xa0]*Est(?:h(?:er)?)?))|Esther[\\s\\xa0]*\\(Greek\\)))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Esth"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(Es(?:t(?:h(?:er|r)?|er)?)?)(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Job"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(J(?:b|ob))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Ps"],extra:"1",regexp:RegExp("(\\b)((?:(?:(?:1[02-5]|[2-9])?(?:1"+e.prototype.regexps.space+"*st|2"+e.prototype.regexps.space+"*nd|3"+e.prototype.regexps.space+"*rd))|1?1[123]"+e.prototype.regexps.space+"*th|(?:150|1[0-4][04-9]|[1-9][04-9]|[4-9])"+e.prototype.regexps.space+"*th)"+e.prototype.regexps.space+"*Psalm)\\b","gi")},{osis:["Ps"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")((?:P(?:s(?:l(?:a(?:ms?|lms?)?|m(?:as|[ms])?)|sm?|m(?:ls?|m|a(?:l(?:ms?|s)?)?)?|a(?:a(?:ms|a|lms?)|m(?:ms?|as|l(?:ms?|[sa])?|s)?|l(?:m(?:[mal]s?|s)?|a(?:ms?|s)?|s|lms?)?)?)?|l(?:ms|s(?:s(?:s(?:ss?)?)?|ms?|a(?:ms?)?)|a(?:m(?:as|s)?|as?|s(?:m(?:as?|s)?|s)?))|a(?:m[sl]s|l(?:[lm]s|sms?)|s(?:ss|m(?:ls|s)|lms?)))|Salms?))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["PrAzar"],apocrypha:!0,regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")((?:Azariah?|The[\\s\\xa0]*Pr(?:[\\s\\xa0]*of[\\s\\xa0]*Azariah?|ayer(?:s[\\s\\xa0]*of[\\s\\xa0]*Azariah?|[\\s\\xa0]*of[\\s\\xa0]*Azariah?))|Pr(?:[\\s\\xa0]*(?:Azar|of[\\s\\xa0]*Azariah?)|Az(?:ar|r)|ayer(?:s[\\s\\xa0]*of[\\s\\xa0]*Azariah?|[\\s\\xa0]*of[\\s\\xa0]*Azariah?))))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Prov"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")((?:Oroverbs|P(?:o(?:rverbs|verbs)|v|r(?:o(?:b(?:verbs|erbs)|v(?:e(?:bs|rbs?))?)?|v(?:erbs?|bs?)?|everbs?)?)))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Eccl"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")((?:Ec(?:l(?:es(?:i(?:stes|a(?:tes|stes?|iastes))|sia(?:tes|stes)))?|c(?:l(?:es(?:s(?:aistes|ia(?:tes|stes))|a(?:stes|i(?:tes|stes|astes))|i(?:a(?:i(?:stes|astes)|st(?:es?|ies)?|tes?|a(?:tes|stes))|tes|stes|iastes))?)?)?)?|Qo(?:h(?:eleth)?)?))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["SgThree"],apocrypha:!0,regexp:/(^|[^0-9A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u024f\u1e00-\u1eff\u2c60-\u2c7f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua7ff])((?:The[\s\xa0]*Song[\s\xa0]*of[\s\xa0]*(?:3[\s\xa0]*(?:You(?:ng[\s\xa0]*Men|ths)|Holy[\s\xa0]*Children|Jews)|Three[\s\xa0]*(?:You(?:ng[\s\xa0]*Men|ths)|Holy[\s\xa0]*Children|Jews)|the[\s\xa0]*(?:3[\s\xa0]*(?:You(?:ng[\s\xa0]*Men|ths)|Holy[\s\xa0]*Children|Jews)|Three[\s\xa0]*(?:You(?:ng[\s\xa0]*Men|ths)|Holy[\s\xa0]*Children|Jews)))|S(?:[\s\xa0]*(?:of[\s\xa0]*(?:3(?:[\s\xa0]*(?:Ch|Y)|\.[\s\xa0]*(?:Ch|Y))|Th(?:[\s\xa0]*(?:Ch|Y)|\.[\s\xa0]*(?:Ch|Y)|ree(?:[\s\xa0]*(?:Ch|Y)|\.[\s\xa0]*(?:Ch|Y))))|3(?:[\s\xa0]*(?:Ch|Y)|\.[\s\xa0]*(?:Ch|Y))|Th(?:[\s\xa0]*(?:Ch|Y)|\.[\s\xa0]*(?:Ch|Y)|ree(?:[\s\xa0]*(?:Ch|Y)|\.[\s\xa0]*(?:Ch|Y))))|ong[\s\xa0]*Three|\.[\s\xa0]*(?:of[\s\xa0]*(?:3(?:[\s\xa0]*(?:Ch|Y)|\.[\s\xa0]*(?:Ch|Y))|Th(?:[\s\xa0]*(?:Ch|Y)|\.[\s\xa0]*(?:Ch|Y)|ree(?:[\s\xa0]*(?:Ch|Y)|\.[\s\xa0]*(?:Ch|Y))))|3(?:[\s\xa0]*(?:Ch|Y)|\.[\s\xa0]*(?:Ch|Y))|Th(?:[\s\xa0]*(?:Ch|Y)|\.[\s\xa0]*(?:Ch|Y)|ree(?:[\s\xa0]*(?:Ch|Y)|\.[\s\xa0]*(?:Ch|Y))))|ng[\s\xa0]*Three|g(?:Three|[\s\xa0]*Three)))|Song[\s\xa0]*of[\s\xa0]*(?:3[\s\xa0]*(?:You(?:ng[\s\xa0]*Men|ths)|Holy[\s\xa0]*Children|Jews)|Three[\s\xa0]*(?:You(?:ng[\s\xa0]*Men|ths)|Holy[\s\xa0]*Children|Jews)|the[\s\xa0]*(?:3[\s\xa0]*(?:You(?:ng[\s\xa0]*Men|ths)|Holy[\s\xa0]*Children|Jews)|Three[\s\xa0]*(?:You(?:ng[\s\xa0]*Men|ths)|Holy[\s\xa0]*Children|Jews))))(?:(?=[\d\s\xa0.:,;\x1e\x1f&\(\)\uff08\uff09\[\]\/"'\*=~\-\u2013\u2014])|$)/gi},{osis:["Song"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")((?:S(?:o[Sln]?|gs?|ngs?|[\\s\\xa0]*of[\\s\\xa0]*S|S)|The[\\s\\xa0]*Song(?:s[\\s\\xa0]*of[\\s\\xa0]*S(?:o(?:lom[oa]ns?|ngs?)|alom[oa]ns?)|[\\s\\xa0]*of[\\s\\xa0]*S(?:o(?:lom[ao]ns?|ngs?)|alom[ao]ns?)))|Song(?:s(?:[\\s\\xa0]*of[\\s\\xa0]*S(?:o(?:lom[ao]ns?|ngs?)|alom[ao]ns?))?|[\\s\\xa0]*of[\\s\\xa0]*S(?:o(?:lom[oa]ns?|ngs?)|alom[oa]ns?))?)(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Jer"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(J(?:r|e(?:r(?:im(?:ah|i(?:[ia]h|h))|m[mi]ah|e(?:m(?:i(?:ih|ah?|e|ha?)?|a(?:h|i(?:ah|h))))?|a(?:m(?:a(?:ih|h)|i(?:ih|ah?|ha?))|iah))?)?))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Ezek"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(E(?:z(?:e(?:(?:[ie]k(?:el|iel))|k(?:el|i[ae]l)?)?|i(?:(?:[ie]k(?:el|iel))|k(?:el|iel))|k)|x(?:[ei](?:(?:[ie]k(?:el|iel))|k(?:el|iel)))))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Dan"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(D(?:a(?:n(?:i[ae]l)?)?|[nl]))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Hos"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(H(?:o(?:s(?:ea)?)?|s))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Joel"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(J(?:l|oel?))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Amos"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(Am(?:os?|s)?)(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Obad"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(Ob(?:idah|a(?:d(?:iah?)?)?|d)?)(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Jonah"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(J(?:nh|on(?:ah)?))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Mic"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(Mi(?:c(?:ah?|hah?)?)?)(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Nah"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(Na(?:h(?:um?)?)?)(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Hab"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(Hab(?:bak(?:[ua]kk?|k[ua]kk?)|ak(?:[ua]kk?|k[au]kk?)|k)?)(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Zeph"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(Z(?:e(?:p(?:h(?:an(?:aiah?|iah?))?)?|faniah?)|ph?|a(?:phania|faniah?)))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Hag"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(H(?:gg?|ag(?:ai|g(?:ai|ia[hi])?)?))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Zech"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(Zach[ae]r(?:[ai](?:(?:[ai]h|h)))|Z(?:ch?|a(?:kariah|ch?)|e(?:kariah?|c(?:h(?:ar(?:i(?:ih|ah?|h)|a(?:[ia]h|h))|er[ia](?:(?:[ai]h|h)))?)?)))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Mal"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(Mal(?:ichi|ac(?:hi?|i))?)(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Matt"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")((?:Mtt|The[\\s\\xa0]*Gospel[\\s\\xa0]*(?:according[\\s\\xa0]*to[\\s\\xa0]*(?:M(?:at(?:t(?:iew|t(?:iew|h(?:iew|ew)|ew)|ew|h(?:iew|(?:[ht](?:iew|ew))|ew|we)|we)?|h(?:iew|ew|(?:[th](?:iew|(?:[ht](?:iew|ew))|ew))))?|t)|S(?:aint[\\s\\xa0]*M(?:at(?:t(?:iew|t(?:iew|h(?:iew|ew)|ew)|ew|h(?:iew|(?:[ht](?:iew|ew))|ew|we)|we)?|h(?:iew|ew|(?:[ht](?:iew|(?:[th](?:iew|ew))|ew))))?|t)|t(?:\\.[\\s\\xa0]*M(?:at(?:t(?:iew|t(?:iew|h(?:iew|ew)|ew)|ew|h(?:iew|(?:[th](?:iew|ew))|ew|we)|we)?|h(?:iew|ew|(?:[ht](?:iew|(?:[ht](?:iew|ew))|ew))))?|t)|[\\s\\xa0]*M(?:at(?:t(?:iew|t(?:iew|h(?:iew|ew)|ew)|ew|h(?:iew|(?:[ht](?:iew|ew))|ew|we)|we)?|h(?:iew|ew|(?:[th](?:iew|(?:[th](?:iew|ew))|ew))))?|t))))|of[\\s\\xa0]*(?:M(?:at(?:t(?:iew|t(?:iew|h(?:iew|ew)|ew)|ew|h(?:iew|(?:[th](?:iew|ew))|ew|we)|we)?|h(?:iew|ew|(?:[ht](?:iew|(?:[th](?:iew|ew))|ew))))?|t)|S(?:aint[\\s\\xa0]*M(?:at(?:t(?:iew|t(?:iew|h(?:iew|ew)|ew)|ew|h(?:iew|(?:[th](?:iew|ew))|ew|we)|we)?|h(?:iew|ew|(?:[ht](?:iew|(?:[th](?:iew|ew))|ew))))?|t)|t(?:\\.[\\s\\xa0]*M(?:at(?:t(?:iew|t(?:iew|h(?:iew|ew)|ew)|ew|h(?:iew|(?:[ht](?:iew|ew))|ew|we)|we)?|h(?:iew|ew|(?:[ht](?:iew|(?:[th](?:iew|ew))|ew))))?|t)|[\\s\\xa0]*M(?:at(?:t(?:iew|t(?:iew|h(?:iew|ew)|ew)|ew|h(?:iew|(?:[th](?:iew|ew))|ew|we)|we)?|h(?:iew|ew|(?:[ht](?:iew|(?:[th](?:iew|ew))|ew))))?|t))))))|(?:M(?:at(?:t(?:iew|t(?:iew|h(?:iew|ew)|ew)|ew|h(?:iew|(?:[ht](?:iew|ew))|ew|we)|we)?|h(?:iew|ew|(?:[ht](?:iew|(?:[ht](?:iew|ew))|ew))))?|t)|S(?:aint[\\s\\xa0]*M(?:at(?:t(?:iew|t(?:iew|h(?:iew|ew)|ew)|ew|h(?:iew|(?:[th](?:iew|ew))|ew|we)|we)?|h(?:iew|ew|(?:[ht](?:iew|(?:[ht](?:iew|ew))|ew))))?|t)|t(?:\\.[\\s\\xa0]*M(?:at(?:t(?:iew|t(?:iew|h(?:iew|ew)|ew)|ew|h(?:iew|(?:[ht](?:iew|ew))|ew|we)|we)?|h(?:iew|ew|(?:[th](?:iew|(?:[th](?:iew|ew))|ew))))?|t)|[\\s\\xa0]*M(?:at(?:t(?:iew|t(?:iew|h(?:iew|ew)|ew)|ew|h(?:iew|(?:[ht](?:iew|ew))|ew|we)|we)?|h(?:iew|ew|(?:[ht](?:iew|(?:[th](?:iew|ew))|ew))))?|t)))|Gospel[\\s\\xa0]*(?:according[\\s\\xa0]*to[\\s\\xa0]*(?:M(?:at(?:t(?:iew|t(?:iew|h(?:iew|ew)|ew)|ew|h(?:iew|(?:[th](?:iew|ew))|ew|we)|we)?|h(?:iew|ew|(?:[th](?:iew|(?:[th](?:iew|ew))|ew))))?|t)|S(?:aint[\\s\\xa0]*M(?:at(?:t(?:iew|t(?:iew|h(?:iew|ew)|ew)|ew|h(?:iew|(?:[th](?:iew|ew))|ew|we)|we)?|h(?:iew|ew|(?:[th](?:iew|(?:[th](?:iew|ew))|ew))))?|t)|t(?:\\.[\\s\\xa0]*M(?:at(?:t(?:iew|t(?:iew|h(?:iew|ew)|ew)|ew|h(?:iew|(?:[th](?:iew|ew))|ew|we)|we)?|h(?:iew|ew|(?:[th](?:iew|(?:[th](?:iew|ew))|ew))))?|t)|[\\s\\xa0]*M(?:at(?:t(?:iew|t(?:iew|h(?:iew|ew)|ew)|ew|h(?:iew|(?:[ht](?:iew|ew))|ew|we)|we)?|h(?:iew|ew|(?:[th](?:iew|(?:[th](?:iew|ew))|ew))))?|t))))|of[\\s\\xa0]*(?:M(?:at(?:t(?:iew|t(?:iew|h(?:iew|ew)|ew)|ew|h(?:iew|(?:[ht](?:iew|ew))|ew|we)|we)?|h(?:iew|ew|(?:[th](?:iew|(?:[th](?:iew|ew))|ew))))?|t)|S(?:aint[\\s\\xa0]*M(?:at(?:t(?:iew|t(?:iew|h(?:iew|ew)|ew)|ew|h(?:iew|(?:[ht](?:iew|ew))|ew|we)|we)?|h(?:iew|ew|(?:[ht](?:iew|(?:[ht](?:iew|ew))|ew))))?|t)|t(?:\\.[\\s\\xa0]*M(?:at(?:t(?:iew|t(?:iew|h(?:iew|ew)|ew)|ew|h(?:iew|(?:[th](?:iew|ew))|ew|we)|we)?|h(?:iew|ew|(?:[ht](?:iew|(?:[th](?:iew|ew))|ew))))?|t)|[\\s\\xa0]*M(?:at(?:t(?:iew|t(?:iew|h(?:iew|ew)|ew)|ew|h(?:iew|(?:[th](?:iew|ew))|ew|we)|we)?|h(?:iew|ew|(?:[th](?:iew|(?:[ht](?:iew|ew))|ew))))?|t)))))))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Mark"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(The[\\s\\xa0]*Gospel[\\s\\xa0]*(?:according[\\s\\xa0]*to[\\s\\xa0]*(?:M(?:rk?|ark?|k)|S(?:aint[\\s\\xa0]*M(?:rk?|ark?|k)|t(?:\\.[\\s\\xa0]*M(?:rk?|ark?|k)|[\\s\\xa0]*M(?:rk?|ark?|k))))|of[\\s\\xa0]*(?:M(?:rk?|ark?|k)|S(?:aint[\\s\\xa0]*M(?:rk?|ark?|k)|t(?:\\.[\\s\\xa0]*M(?:rk?|ark?|k)|[\\s\\xa0]*M(?:rk?|ark?|k)))))|(?:Gospel[\\s\\xa0]*(?:according[\\s\\xa0]*to[\\s\\xa0]*(?:M(?:rk?|ark?|k)|S(?:aint[\\s\\xa0]*M(?:rk?|ark?|k)|t(?:\\.[\\s\\xa0]*M(?:rk?|ark?|k)|[\\s\\xa0]*M(?:rk?|ark?|k))))|of[\\s\\xa0]*(?:M(?:rk?|ark?|k)|S(?:aint[\\s\\xa0]*M(?:rk?|ark?|k)|t(?:\\.[\\s\\xa0]*M(?:rk?|ark?|k)|[\\s\\xa0]*M(?:rk?|ark?|k)))))|M(?:rk?|ark?|k)|S(?:aint[\\s\\xa0]*M(?:rk?|ark?|k)|t(?:\\.[\\s\\xa0]*M(?:rk?|ark?|k)|[\\s\\xa0]*M(?:rk?|ark?|k)))))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Luke"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(The[\\s\\xa0]*Gospel[\\s\\xa0]*(?:of[\\s\\xa0]*(?:S(?:aint[\\s\\xa0]*L(?:u(?:ke?)?|k)|t(?:[\\s\\xa0]*L(?:u(?:ke?)?|k)|\\.[\\s\\xa0]*L(?:u(?:ke?)?|k)))|L(?:u(?:ke?)?|k))|according[\\s\\xa0]*to[\\s\\xa0]*(?:S(?:aint[\\s\\xa0]*L(?:u(?:ke?)?|k)|t(?:[\\s\\xa0]*L(?:u(?:ke?)?|k)|\\.[\\s\\xa0]*L(?:u(?:ke?)?|k)))|L(?:u(?:ke?)?|k)))|(?:S(?:aint[\\s\\xa0]*L(?:u(?:ke?)?|k)|t(?:[\\s\\xa0]*L(?:u(?:ke?)?|k)|\\.[\\s\\xa0]*L(?:u(?:ke?)?|k)))|L(?:u(?:ke?)?|k)|Gospel[\\s\\xa0]*(?:of[\\s\\xa0]*(?:S(?:aint[\\s\\xa0]*L(?:u(?:ke?)?|k)|t(?:[\\s\\xa0]*L(?:u(?:ke?)?|k)|\\.[\\s\\xa0]*L(?:u(?:ke?)?|k)))|L(?:u(?:ke?)?|k))|according[\\s\\xa0]*to[\\s\\xa0]*(?:S(?:aint[\\s\\xa0]*L(?:u(?:ke?)?|k)|t(?:[\\s\\xa0]*L(?:u(?:ke?)?|k)|\\.[\\s\\xa0]*L(?:u(?:ke?)?|k)))|L(?:u(?:ke?)?|k)))))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["1John"],regexp:/(^|[^0-9A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u024f\u1e00-\u1eff\u2c60-\u2c7f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua7ff])((?:First[\s\xa0]*J(?:phn|n|o(?:phn|nh|on|h[mn]?)|h(?:[ho]n|n)?)|I(?:[\s\xa0]*J(?:phn|n|o(?:phn|nh|on|h[mn]?)|h(?:[ho]n|n)?)|\.[\s\xa0]*J(?:phn|n|o(?:phn|nh|on|h[nm]?)|h(?:[oh]n|n)?))|1(?:st(?:[\s\xa0]*J(?:phn|n|o(?:phn|nh|on|h[nm]?)|h(?:[oh]n|n)?)|\.[\s\xa0]*J(?:phn|n|o(?:phn|nh|on|h[nm]?)|h(?:[ho]n|n)?))|[\s\xa0]*J(?:phn|n|o(?:phn|nh|on|h[nm]?)|h(?:[oh]n|n)?)|\.[\s\xa0]*J(?:phn|n|o(?:phn|nh|on|h[mn]?)|h(?:[oh]n|n)?)|John)))(?:(?=[\d\s\xa0.:,;\x1e\x1f&\(\)\uff08\uff09\[\]\/"'\*=~\-\u2013\u2014])|$)/gi},{osis:["2John"],regexp:/(^|[^0-9A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u024f\u1e00-\u1eff\u2c60-\u2c7f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua7ff])((?:2(?:[\s\xa0]*J(?:phn|n|o(?:phn|nh|on|h[mn]?)|h(?:[ho]n|n)?)|\.[\s\xa0]*J(?:phn|n|o(?:phn|nh|on|h[nm]?)|h(?:[ho]n|n)?)|John|nd(?:[\s\xa0]*J(?:phn|n|o(?:phn|nh|on|h[mn]?)|h(?:[oh]n|n)?)|\.[\s\xa0]*J(?:phn|n|o(?:phn|nh|on|h[nm]?)|h(?:[ho]n|n)?)))|II(?:[\s\xa0]*J(?:phn|n|o(?:phn|nh|on|h[nm]?)|h(?:[ho]n|n)?)|\.[\s\xa0]*J(?:phn|n|o(?:phn|nh|on|h[mn]?)|h(?:[ho]n|n)?))|Second[\s\xa0]*J(?:phn|n|o(?:phn|nh|on|h[nm]?)|h(?:[oh]n|n)?)))(?:(?=[\d\s\xa0.:,;\x1e\x1f&\(\)\uff08\uff09\[\]\/"'\*=~\-\u2013\u2014])|$)/gi},{osis:["3John"],regexp:/(^|[^0-9A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u024f\u1e00-\u1eff\u2c60-\u2c7f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua7ff])((?:3(?:[\s\xa0]*J(?:phn|n|o(?:phn|nh|on|h[mn]?)|h(?:[oh]n|n)?)|\.[\s\xa0]*J(?:phn|n|o(?:phn|nh|on|h[mn]?)|h(?:[oh]n|n)?)|John|rd(?:[\s\xa0]*J(?:phn|n|o(?:phn|nh|on|h[mn]?)|h(?:[ho]n|n)?)|\.[\s\xa0]*J(?:phn|n|o(?:phn|nh|on|h[nm]?)|h(?:[ho]n|n)?)))|III(?:[\s\xa0]*J(?:phn|n|o(?:phn|nh|on|h[nm]?)|h(?:[ho]n|n)?)|\.[\s\xa0]*J(?:phn|n|o(?:phn|nh|on|h[nm]?)|h(?:[ho]n|n)?))|Third[\s\xa0]*J(?:phn|n|o(?:phn|nh|on|h[mn]?)|h(?:[ho]n|n)?)))(?:(?=[\d\s\xa0.:,;\x1e\x1f&\(\)\uff08\uff09\[\]\/"'\*=~\-\u2013\u2014])|$)/gi},{osis:["John"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(The[\\s\\xa0]*Gospel[\\s\\xa0]*(?:of[\\s\\xa0]*(?:S(?:t(?:[\\s\\xa0]*J(?:phn|n|o(?:phn|nh|on|h[mn]?)|h(?:[ho]n|n)?)|\\.[\\s\\xa0]*J(?:phn|n|o(?:phn|nh|on|h[nm]?)|h(?:[oh]n|n)?))|aint[\\s\\xa0]*J(?:phn|n|o(?:phn|nh|on|h[nm]?)|h(?:[ho]n|n)?))|J(?:phn|n|o(?:phn|nh|on|h[mn]?)|h(?:[oh]n|n)?))|according[\\s\\xa0]*to[\\s\\xa0]*(?:S(?:t(?:[\\s\\xa0]*J(?:phn|n|o(?:phn|nh|on|h[nm]?)|h(?:[ho]n|n)?)|\\.[\\s\\xa0]*J(?:phn|n|o(?:phn|nh|on|h[mn]?)|h(?:[oh]n|n)?))|aint[\\s\\xa0]*J(?:phn|n|o(?:phn|nh|on|h[nm]?)|h(?:[ho]n|n)?))|J(?:phn|n|o(?:phn|nh|on|h[nm]?)|h(?:[oh]n|n)?)))|(?:S(?:t(?:[\\s\\xa0]*J(?:phn|n|o(?:phn|nh|on|h[mn]?)|h(?:[ho]n|n)?)|\\.[\\s\\xa0]*J(?:phn|n|o(?:phn|nh|on|h[mn]?)|h(?:[oh]n|n)?))|aint[\\s\\xa0]*J(?:phn|n|o(?:phn|nh|on|h[mn]?)|h(?:[ho]n|n)?))|Gospel[\\s\\xa0]*(?:of[\\s\\xa0]*(?:S(?:t(?:[\\s\\xa0]*J(?:phn|n|o(?:phn|nh|on|h[nm]?)|h(?:[oh]n|n)?)|\\.[\\s\\xa0]*J(?:phn|n|o(?:phn|nh|on|h[nm]?)|h(?:[oh]n|n)?))|aint[\\s\\xa0]*J(?:phn|n|o(?:phn|nh|on|h[mn]?)|h(?:[oh]n|n)?))|J(?:phn|n|o(?:phn|nh|on|h[mn]?)|h(?:[ho]n|n)?))|according[\\s\\xa0]*to[\\s\\xa0]*(?:S(?:t(?:[\\s\\xa0]*J(?:phn|n|o(?:phn|nh|on|h[mn]?)|h(?:[oh]n|n)?)|\\.[\\s\\xa0]*J(?:phn|n|o(?:phn|nh|on|h[nm]?)|h(?:[oh]n|n)?))|aint[\\s\\xa0]*J(?:phn|n|o(?:phn|nh|on|h[mn]?)|h(?:[oh]n|n)?))|J(?:phn|n|o(?:phn|nh|on|h[mn]?)|h(?:[oh]n|n)?)))|J(?:phn|n|o(?:phn|nh|on|h[mn]?)|h(?:[ho]n|n)?)))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Acts"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")((?:The[\\s\\xa0]*Acts[\\s\\xa0]*of[\\s\\xa0]*the[\\s\\xa0]*Apostles|Ac(?:t(?:s(?:ss?|[\\s\\xa0]*of[\\s\\xa0]*the[\\s\\xa0]*Apostles)?)?)?))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Rom"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(R(?:pmans|m(?:ns?|s)?|o(?:amns|s|m(?:s|a(?:n(?:ds|s)?|sn))?)?))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["2Cor"],regexp:/(^|[^0-9A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u024f\u1e00-\u1eff\u2c60-\u2c7f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua7ff])((?:2(?:nd(?:[\s\xa0]*C(?:hor(?:anthians|nthians|i(?:nth(?:i(?:ns|ans)|ains)|thians))|o(?:r(?:i(?:n(?:ith(?:i(?:nas|ans)|a(?:ns|ins))|t(?:h(?:a(?:i(?:ns|ans)|ns)|o(?:ians|ans)|i(?:ians|n(?:as|s)|a(?:n(?:[ao]s|s)?|[ai]ns)|ons))?|i[ao]ns)?|[an]thians)?|th(?:oans|a(?:ns|ins)|i(?:ians|ns|ans))|inthi(?:ians|ans))|anthians|n(?:i(?:nth(?:ians|a(?:ns|ins))|th(?:ians|a(?:i(?:ns|ans)|ns)))|th(?:ains|i(?:ians|ns|ans)))|ri(?:th(?:ians|ains)|nth(?:ians|ains))|th(?:ians?)?)?)?)|\.[\s\xa0]*C(?:hor(?:anthians|nthians|i(?:nth(?:i(?:ns|ans)|ains)|thians))|o(?:r(?:i(?:n(?:ith(?:i(?:nas|ans)|a(?:ns|ins))|t(?:h(?:a(?:i(?:ns|ans)|ns)|o(?:ians|ans)|i(?:ians|n(?:as|s)|a(?:n(?:[ao]s|s)?|[ia]ns)|ons))?|i[ao]ns)?|[an]thians)?|th(?:oans|a(?:ns|ins)|i(?:ians|ns|ans))|inthi(?:ians|ans))|anthians|n(?:i(?:nth(?:ians|a(?:ns|ins))|th(?:ians|a(?:i(?:ns|ans)|ns)))|th(?:ains|i(?:ians|ns|ans)))|ri(?:th(?:ians|ains)|nth(?:ians|ains))|th(?:ians?)?)?)?))|[\s\xa0]*C(?:hor(?:anthians|nthians|i(?:nth(?:i(?:ns|ans)|ains)|thians))|o(?:r(?:i(?:n(?:ith(?:i(?:nas|ans)|a(?:ns|ins))|t(?:h(?:a(?:i(?:ns|ans)|ns)|o(?:ians|ans)|i(?:ians|n(?:as|s)|a(?:n(?:[oa]s|s)?|[ia]ns)|ons))?|i[ao]ns)?|[an]thians)?|th(?:oans|a(?:ns|ins)|i(?:ians|ns|ans))|inthi(?:ians|ans))|anthians|n(?:i(?:nth(?:ians|a(?:ns|ins))|th(?:ians|a(?:i(?:ns|ans)|ns)))|th(?:ains|i(?:ians|ns|ans)))|ri(?:th(?:ians|ains)|nth(?:ians|ains))|th(?:ians?)?)?)?)|Cor|\.[\s\xa0]*C(?:hor(?:anthians|nthians|i(?:nth(?:i(?:ns|ans)|ains)|thians))|o(?:r(?:i(?:n(?:ith(?:i(?:nas|ans)|a(?:ns|ins))|t(?:h(?:a(?:i(?:ns|ans)|ns)|o(?:ians|ans)|i(?:ians|n(?:as|s)|a(?:n(?:[ao]s|s)?|[ai]ns)|ons))?|i[ao]ns)?|[na]thians)?|th(?:oans|a(?:ns|ins)|i(?:ians|ns|ans))|inthi(?:ians|ans))|anthians|n(?:i(?:nth(?:ians|a(?:ns|ins))|th(?:ians|a(?:i(?:ns|ans)|ns)))|th(?:ains|i(?:ians|ns|ans)))|ri(?:th(?:ians|ains)|nth(?:ians|ains))|th(?:ians?)?)?)?))|II(?:[\s\xa0]*C(?:hor(?:anthians|nthians|i(?:nth(?:i(?:ns|ans)|ains)|thians))|o(?:r(?:i(?:n(?:ith(?:i(?:nas|ans)|a(?:ns|ins))|t(?:h(?:a(?:i(?:ns|ans)|ns)|o(?:ians|ans)|i(?:ians|n(?:as|s)|a(?:n(?:[oa]s|s)?|[ia]ns)|ons))?|i[ao]ns)?|[an]thians)?|th(?:oans|a(?:ns|ins)|i(?:ians|ns|ans))|inthi(?:ians|ans))|anthians|n(?:i(?:nth(?:ians|a(?:ns|ins))|th(?:ians|a(?:i(?:ns|ans)|ns)))|th(?:ains|i(?:ians|ns|ans)))|ri(?:th(?:ians|ains)|nth(?:ians|ains))|th(?:ians?)?)?)?)|\.[\s\xa0]*C(?:hor(?:anthians|nthians|i(?:nth(?:i(?:ns|ans)|ains)|thians))|o(?:r(?:i(?:n(?:ith(?:i(?:nas|ans)|a(?:ns|ins))|t(?:h(?:a(?:i(?:ns|ans)|ns)|o(?:ians|ans)|i(?:ians|n(?:as|s)|a(?:n(?:[oa]s|s)?|[ai]ns)|ons))?|i[oa]ns)?|[an]thians)?|th(?:oans|a(?:ns|ins)|i(?:ians|ns|ans))|inthi(?:ians|ans))|anthians|n(?:i(?:nth(?:ians|a(?:ns|ins))|th(?:ians|a(?:i(?:ns|ans)|ns)))|th(?:ains|i(?:ians|ns|ans)))|ri(?:th(?:ians|ains)|nth(?:ians|ains))|th(?:ians?)?)?)?))|Second[\s\xa0]*C(?:hor(?:anthians|nthians|i(?:nth(?:i(?:ns|ans)|ains)|thians))|o(?:r(?:i(?:n(?:ith(?:i(?:nas|ans)|a(?:ns|ins))|t(?:h(?:a(?:i(?:ns|ans)|ns)|o(?:ians|ans)|i(?:ians|n(?:as|s)|a(?:n(?:[ao]s|s)?|[ai]ns)|ons))?|i[ao]ns)?|[an]thians)?|th(?:oans|a(?:ns|ins)|i(?:ians|ns|ans))|inthi(?:ians|ans))|anthians|n(?:i(?:nth(?:ians|a(?:ns|ins))|th(?:ians|a(?:i(?:ns|ans)|ns)))|th(?:ains|i(?:ians|ns|ans)))|ri(?:th(?:ians|ains)|nth(?:ians|ains))|th(?:ians?)?)?)?)))(?:(?=[\d\s\xa0.:,;\x1e\x1f&\(\)\uff08\uff09\[\]\/"'\*=~\-\u2013\u2014])|$)/gi},{osis:["1Cor"],regexp:/(^|[^0-9A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u024f\u1e00-\u1eff\u2c60-\u2c7f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua7ff])((?:First[\s\xa0]*C(?:hor(?:anthians|nthians|i(?:nth(?:i(?:ns|ans)|ains)|thians))|o(?:r(?:i(?:n(?:ith(?:i(?:nas|ans)|a(?:ns|ins))|t(?:h(?:a(?:i(?:ns|ans)|ns)|o(?:ians|ans)|i(?:ians|n(?:as|s)|a(?:n(?:[ao]s|s)?|[ai]ns)|ons))?|i[oa]ns)?|[na]thians)?|th(?:oans|a(?:ns|ins)|i(?:ians|ns|ans))|inthi(?:ians|ans))|anthians|n(?:i(?:nth(?:ians|a(?:ns|ins))|th(?:ians|a(?:i(?:ns|ans)|ns)))|th(?:ains|i(?:ians|ns|ans)))|ri(?:th(?:ians|ains)|nth(?:ians|ains))|th(?:ians?)?)?)?)|I(?:[\s\xa0]*C(?:hor(?:anthians|nthians|i(?:nth(?:i(?:ns|ans)|ains)|thians))|o(?:r(?:i(?:n(?:ith(?:i(?:nas|ans)|a(?:ns|ins))|t(?:h(?:a(?:i(?:ns|ans)|ns)|o(?:ians|ans)|i(?:ians|n(?:as|s)|a(?:n(?:[oa]s|s)?|[ai]ns)|ons))?|i[oa]ns)?|[an]thians)?|th(?:oans|a(?:ns|ins)|i(?:ians|ns|ans))|inthi(?:ians|ans))|anthians|n(?:i(?:nth(?:ians|a(?:ns|ins))|th(?:ians|a(?:i(?:ns|ans)|ns)))|th(?:ains|i(?:ians|ns|ans)))|ri(?:th(?:ians|ains)|nth(?:ians|ains))|th(?:ians?)?)?)?)|\.[\s\xa0]*C(?:hor(?:anthians|nthians|i(?:nth(?:i(?:ns|ans)|ains)|thians))|o(?:r(?:i(?:n(?:ith(?:i(?:nas|ans)|a(?:ns|ins))|t(?:h(?:a(?:i(?:ns|ans)|ns)|o(?:ians|ans)|i(?:ians|n(?:as|s)|a(?:n(?:[oa]s|s)?|[ai]ns)|ons))?|i[ao]ns)?|[an]thians)?|th(?:oans|a(?:ns|ins)|i(?:ians|ns|ans))|inthi(?:ians|ans))|anthians|n(?:i(?:nth(?:ians|a(?:ns|ins))|th(?:ians|a(?:i(?:ns|ans)|ns)))|th(?:ains|i(?:ians|ns|ans)))|ri(?:th(?:ians|ains)|nth(?:ians|ains))|th(?:ians?)?)?)?))|1(?:st(?:[\s\xa0]*C(?:hor(?:anthians|nthians|i(?:nth(?:i(?:ns|ans)|ains)|thians))|o(?:r(?:i(?:n(?:ith(?:i(?:nas|ans)|a(?:ns|ins))|t(?:h(?:a(?:i(?:ns|ans)|ns)|o(?:ians|ans)|i(?:ians|n(?:as|s)|a(?:n(?:[ao]s|s)?|[ia]ns)|ons))?|i[ao]ns)?|[na]thians)?|th(?:oans|a(?:ns|ins)|i(?:ians|ns|ans))|inthi(?:ians|ans))|anthians|n(?:i(?:nth(?:ians|a(?:ns|ins))|th(?:ians|a(?:i(?:ns|ans)|ns)))|th(?:ains|i(?:ians|ns|ans)))|ri(?:th(?:ians|ains)|nth(?:ians|ains))|th(?:ians?)?)?)?)|\.[\s\xa0]*C(?:hor(?:anthians|nthians|i(?:nth(?:i(?:ns|ans)|ains)|thians))|o(?:r(?:i(?:n(?:ith(?:i(?:nas|ans)|a(?:ns|ins))|t(?:h(?:a(?:i(?:ns|ans)|ns)|o(?:ians|ans)|i(?:ians|n(?:as|s)|a(?:n(?:[oa]s|s)?|[ia]ns)|ons))?|i[ao]ns)?|[an]thians)?|th(?:oans|a(?:ns|ins)|i(?:ians|ns|ans))|inthi(?:ians|ans))|anthians|n(?:i(?:nth(?:ians|a(?:ns|ins))|th(?:ians|a(?:i(?:ns|ans)|ns)))|th(?:ains|i(?:ians|ns|ans)))|ri(?:th(?:ians|ains)|nth(?:ians|ains))|th(?:ians?)?)?)?))|[\s\xa0]*C(?:hor(?:anthians|nthians|i(?:nth(?:i(?:ns|ans)|ains)|thians))|o(?:r(?:i(?:n(?:ith(?:i(?:nas|ans)|a(?:ns|ins))|t(?:h(?:a(?:i(?:ns|ans)|ns)|o(?:ians|ans)|i(?:ians|n(?:as|s)|a(?:n(?:[ao]s|s)?|[ai]ns)|ons))?|i[oa]ns)?|[an]thians)?|th(?:oans|a(?:ns|ins)|i(?:ians|ns|ans))|inthi(?:ians|ans))|anthians|n(?:i(?:nth(?:ians|a(?:ns|ins))|th(?:ians|a(?:i(?:ns|ans)|ns)))|th(?:ains|i(?:ians|ns|ans)))|ri(?:th(?:ians|ains)|nth(?:ians|ains))|th(?:ians?)?)?)?)|Cor|\.[\s\xa0]*C(?:hor(?:anthians|nthians|i(?:nth(?:i(?:ns|ans)|ains)|thians))|o(?:r(?:i(?:n(?:ith(?:i(?:nas|ans)|a(?:ns|ins))|t(?:h(?:a(?:i(?:ns|ans)|ns)|o(?:ians|ans)|i(?:ians|n(?:as|s)|a(?:n(?:[ao]s|s)?|[ai]ns)|ons))?|i[ao]ns)?|[na]thians)?|th(?:oans|a(?:ns|ins)|i(?:ians|ns|ans))|inthi(?:ians|ans))|anthians|n(?:i(?:nth(?:ians|a(?:ns|ins))|th(?:ians|a(?:i(?:ns|ans)|ns)))|th(?:ains|i(?:ians|ns|ans)))|ri(?:th(?:ians|ains)|nth(?:ians|ains))|th(?:ians?)?)?)?)))|C(?:or(?:i(?:n(?:ith(?:i(?:nas|ans)|a(?:ns|ins))|t(?:h(?:a(?:i(?:ns|ans)|ns)|o(?:ians|ans)|i(?:ians|n(?:as|s)|a(?:n(?:[oa]s|s)?|[ia]ns)|ons))|i[oa]ns)|[na]thians)|th(?:oans|a(?:ns|ins)|i(?:ians|ns|ans))|inthi(?:ians|ans))|n(?:i(?:nth(?:ians|a(?:ns|ins))|th(?:ians|a(?:i(?:ns|ans)|ns)))|th(?:ains|i(?:ians|ns|ans)))|ri(?:th(?:ians|ains)|nth(?:ians|ains)))|hor(?:anthians|nthians|i(?:nth(?:i(?:ns|ans)|ains)|thians))))(?:(?=[\d\s\xa0.:,;\x1e\x1f&\(\)\uff08\uff09\[\]\/"'\*=~\-\u2013\u2014])|$)/gi},{osis:["Gal"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(G(?:a(?:l(?:a(?:t(?:o(?:ns|ans)|ns|a(?:ns|s|i(?:ns|[oa]ns)|[ao]ns)|i(?:o(?:n(?:[an]s|s)|s|ans)|a(?:n(?:[ai]s|s)?|s|[ia]ns)|n(?:a(?:ns|s)|s)|i(?:ns|[ao]ns)))?)?|lati(?:ns|[ao]ns))?)?|l))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Eph"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(E(?:sphesians|p(?:e(?:hesians|sians)|h(?:e(?:s(?:ains?|i(?:an[ds]?|ons))?)?|s(?:ians?)?|isians?)?)?|hp(?:[ei]sians)?))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Phil"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(Ph(?:l(?:pp?|ip(?:ians|p(?:ians)?)?)|p|i(?:l(?:p(?:eans|i(?:ns|ans?)|a(?:n|ins)|p(?:pians|i(?:ians|ans?))?)?|l(?:l(?:ip(?:pians|i(?:ians|ans?))|p(?:ians|pians))|p(?:pians?|i(?:ans?|ens)|ans)|i(?:p(?:a(?:i(?:ns?|ans)|ns?)|i(?:ians|e(?:ns|ans)|ns|a(?:ns?|[ia]ns))|p(?:pians|a(?:ns|ins)|i(?:[ie]ans|a(?:ns?|ins)|ns)|eans?)|eans?)?)?)|i(?:p(?:a(?:i(?:ns?|ans)|ns?)|e(?:ns|ans)|i(?:ians|ns|ans?|ens)|p(?:a(?:i(?:ns|ans)|ns?)|i(?:ians|ns?|a(?:ns?|[ia]ns)|ens)|pians?|eans?)?)?)?)?)?))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Col"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(C(?:al(?:l(?:asi[oa]ns|os(?:sians|i[oa]ns))|[ao]s(?:si(?:[ao]ns|i[oa]ns)))|o(?:l(?:os(?:s(?:i(?:ans?|ons)|ans)?|i[oa]ns)|l[oa]si(?:[oa]ns)|as(?:si[oa]ns|i[oa]ns))?)?)|Cal[ao]si(?:[oa]ns))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["2Thess"],regexp:/(^|[^0-9A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u024f\u1e00-\u1eff\u2c60-\u2c7f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua7ff])((?:II(?:[\s\xa0]*Th(?:s(?:ss?)?|es(?:elon(?:ains|ians?)|olonians?|al(?:oni(?:[ci]ans|ns|ans?|ons)|lonians)|s(?:al(?:on(?:eans|a(?:i(?:ns?|ans)|ns)|o(?:ians|ans)|i(?:(?:[ao](?:ns?|ans))|ns|ions|ens|c(?:i[ae]ns|ans))|ciens)|lonians)|elon(?:ains|ians?)|oloni(?:ns|ans?)|s)?)?)?|\.[\s\xa0]*Th(?:s(?:ss?)?|es(?:elon(?:ains|ians?)|olonians?|al(?:oni(?:[ic]ans|ns|ans?|ons)|lonians)|s(?:al(?:on(?:eans|a(?:i(?:ns?|ans)|ns)|o(?:ians|ans)|i(?:(?:[ao](?:ns?|ans))|ns|ions|ens|c(?:i[ea]ns|ans))|ciens)|lonians)|elon(?:ains|ians?)|oloni(?:ns|ans?)|s)?)?)?)|2(?:nd(?:[\s\xa0]*Th(?:s(?:ss?)?|es(?:elon(?:ains|ians?)|olonians?|al(?:oni(?:[ic]ans|ns|ans?|ons)|lonians)|s(?:al(?:on(?:eans|a(?:i(?:ns?|ans)|ns)|o(?:ians|ans)|i(?:(?:[oa](?:ns?|ans))|ns|ions|ens|c(?:i[ea]ns|ans))|ciens)|lonians)|elon(?:ains|ians?)|oloni(?:ns|ans?)|s)?)?)?|\.[\s\xa0]*Th(?:s(?:ss?)?|es(?:elon(?:ains|ians?)|olonians?|al(?:oni(?:[ic]ans|ns|ans?|ons)|lonians)|s(?:al(?:on(?:eans|a(?:i(?:ns?|ans)|ns)|o(?:ians|ans)|i(?:(?:[ao](?:ns?|ans))|ns|ions|ens|c(?:i[ae]ns|ans))|ciens)|lonians)|elon(?:ains|ians?)|oloni(?:ns|ans?)|s)?)?)?)|[\s\xa0]*Th(?:s(?:ss?)?|es(?:elon(?:ains|ians?)|olonians?|al(?:oni(?:[ci]ans|ns|ans?|ons)|lonians)|s(?:al(?:on(?:eans|a(?:i(?:ns?|ans)|ns)|o(?:ians|ans)|i(?:(?:[oa](?:ns?|ans))|ns|ions|ens|c(?:i[ea]ns|ans))|ciens)|lonians)|elon(?:ains|ians?)|oloni(?:ns|ans?)|s)?)?)?|\.[\s\xa0]*Th(?:s(?:ss?)?|es(?:elon(?:ains|ians?)|olonians?|al(?:oni(?:[ic]ans|ns|ans?|ons)|lonians)|s(?:al(?:on(?:eans|a(?:i(?:ns?|ans)|ns)|o(?:ians|ans)|i(?:(?:[oa](?:ns?|ans))|ns|ions|ens|c(?:i[ae]ns|ans))|ciens)|lonians)|elon(?:ains|ians?)|oloni(?:ns|ans?)|s)?)?)?|Thess)|Second[\s\xa0]*Th(?:s(?:ss?)?|es(?:elon(?:ains|ians?)|olonians?|al(?:oni(?:[ci]ans|ns|ans?|ons)|lonians)|s(?:al(?:on(?:eans|a(?:i(?:ns?|ans)|ns)|o(?:ians|ans)|i(?:(?:[oa](?:ns?|ans))|ns|ions|ens|c(?:i[ea]ns|ans))|ciens)|lonians)|elon(?:ains|ians?)|oloni(?:ns|ans?)|s)?)?)?))(?:(?=[\d\s\xa0.:,;\x1e\x1f&\(\)\uff08\uff09\[\]\/"'\*=~\-\u2013\u2014])|$)/gi},{osis:["1Thess"],regexp:/(^|[^0-9A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u024f\u1e00-\u1eff\u2c60-\u2c7f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua7ff])((?:I(?:[\s\xa0]*Th(?:s(?:ss?)?|es(?:elon(?:ains|ians?)|olonians?|al(?:oni(?:[ci]ans|ns|ans?|ons)|lonians)|s(?:al(?:on(?:eans|a(?:i(?:ns?|ans)|ns)|o(?:ians|ans)|i(?:(?:[oa](?:ns?|ans))|ns|ions|ens|c(?:i[ae]ns|ans))|ciens)|lonians)|elon(?:ains|ians?)|oloni(?:ns|ans?)|s)?)?)?|\.[\s\xa0]*Th(?:s(?:ss?)?|es(?:elon(?:ains|ians?)|olonians?|al(?:oni(?:[ic]ans|ns|ans?|ons)|lonians)|s(?:al(?:on(?:eans|a(?:i(?:ns?|ans)|ns)|o(?:ians|ans)|i(?:(?:[ao](?:ns?|ans))|ns|ions|ens|c(?:i[ae]ns|ans))|ciens)|lonians)|elon(?:ains|ians?)|oloni(?:ns|ans?)|s)?)?)?)|1(?:[\s\xa0]*Th(?:s(?:ss?)?|es(?:elon(?:ains|ians?)|olonians?|al(?:oni(?:[ci]ans|ns|ans?|ons)|lonians)|s(?:al(?:on(?:eans|a(?:i(?:ns?|ans)|ns)|o(?:ians|ans)|i(?:(?:[oa](?:ns?|ans))|ns|ions|ens|c(?:i[ae]ns|ans))|ciens)|lonians)|elon(?:ains|ians?)|oloni(?:ns|ans?)|s)?)?)?|\.[\s\xa0]*Th(?:s(?:ss?)?|es(?:elon(?:ains|ians?)|olonians?|al(?:oni(?:[ic]ans|ns|ans?|ons)|lonians)|s(?:al(?:on(?:eans|a(?:i(?:ns?|ans)|ns)|o(?:ians|ans)|i(?:(?:[ao](?:ns?|ans))|ns|ions|ens|c(?:i[ae]ns|ans))|ciens)|lonians)|elon(?:ains|ians?)|oloni(?:ns|ans?)|s)?)?)?|Thess|st(?:[\s\xa0]*Th(?:s(?:ss?)?|es(?:elon(?:ains|ians?)|olonians?|al(?:oni(?:[ci]ans|ns|ans?|ons)|lonians)|s(?:al(?:on(?:eans|a(?:i(?:ns?|ans)|ns)|o(?:ians|ans)|i(?:(?:[oa](?:ns?|ans))|ns|ions|ens|c(?:i[ea]ns|ans))|ciens)|lonians)|elon(?:ains|ians?)|oloni(?:ns|ans?)|s)?)?)?|\.[\s\xa0]*Th(?:s(?:ss?)?|es(?:elon(?:ains|ians?)|olonians?|al(?:oni(?:[ic]ans|ns|ans?|ons)|lonians)|s(?:al(?:on(?:eans|a(?:i(?:ns?|ans)|ns)|o(?:ians|ans)|i(?:(?:[oa](?:ns?|ans))|ns|ions|ens|c(?:i[ae]ns|ans))|ciens)|lonians)|elon(?:ains|ians?)|oloni(?:ns|ans?)|s)?)?)?))|First[\s\xa0]*Th(?:s(?:ss?)?|es(?:elon(?:ains|ians?)|olonians?|al(?:oni(?:[ci]ans|ns|ans?|ons)|lonians)|s(?:al(?:on(?:eans|a(?:i(?:ns?|ans)|ns)|o(?:ians|ans)|i(?:(?:[oa](?:ns?|ans))|ns|ions|ens|c(?:i[ea]ns|ans))|ciens)|lonians)|elon(?:ains|ians?)|oloni(?:ns|ans?)|s)?)?)?)|Thes(?:s(?:elon(?:ains|ians?)|oloni(?:ns|ans?)|al(?:lonians|on(?:eans|a(?:i(?:ns?|ans)|ns)|i(?:(?:[ao](?:ns?|ans))|ns|ions|c(?:i[ea]ns|ans))|o(?:ians|ans)|ciens)))|elon(?:ains|ians?)|olonians?|al(?:oni(?:[ci]ans|ns|ans?|ons)|lonians)))(?:(?=[\d\s\xa0.:,;\x1e\x1f&\(\)\uff08\uff09\[\]\/"'\*=~\-\u2013\u2014])|$)/gi},{osis:["2Tim"],regexp:/(^|[^0-9A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u024f\u1e00-\u1eff\u2c60-\u2c7f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua7ff])((?:II(?:[\s\xa0]*T(?:omothy|i(?:m(?:ot(?:hy?|y))?)?|himot(?:hy|y)|m)|\.[\s\xa0]*T(?:omothy|i(?:m(?:ot(?:hy?|y))?)?|himot(?:hy|y)|m))|2(?:Tim|[\s\xa0]*T(?:omothy|i(?:m(?:ot(?:hy?|y))?)?|himot(?:hy|y)|m)|nd(?:[\s\xa0]*T(?:omothy|i(?:m(?:ot(?:hy?|y))?)?|himot(?:hy|y)|m)|\.[\s\xa0]*T(?:omothy|i(?:m(?:ot(?:hy?|y))?)?|himot(?:hy|y)|m))|\.[\s\xa0]*T(?:omothy|i(?:m(?:ot(?:hy?|y))?)?|himot(?:hy|y)|m))|Second[\s\xa0]*T(?:omothy|i(?:m(?:ot(?:hy?|y))?)?|himot(?:hy|y)|m)))(?:(?=[\d\s\xa0.:,;\x1e\x1f&\(\)\uff08\uff09\[\]\/"'\*=~\-\u2013\u2014])|$)/gi},{osis:["1Tim"],regexp:/(^|[^0-9A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u024f\u1e00-\u1eff\u2c60-\u2c7f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua7ff])((?:1(?:Tim|[\s\xa0]*T(?:omothy|i(?:m(?:ot(?:hy?|y))?)?|himot(?:hy|y)|m)|\.[\s\xa0]*T(?:omothy|i(?:m(?:ot(?:hy?|y))?)?|himot(?:hy|y)|m)|st(?:[\s\xa0]*T(?:omothy|i(?:m(?:ot(?:hy?|y))?)?|himot(?:hy|y)|m)|\.[\s\xa0]*T(?:omothy|i(?:m(?:ot(?:hy?|y))?)?|himot(?:hy|y)|m)))|I(?:[\s\xa0]*T(?:omothy|i(?:m(?:ot(?:hy?|y))?)?|himot(?:hy|y)|m)|\.[\s\xa0]*T(?:omothy|i(?:m(?:ot(?:hy?|y))?)?|himot(?:hy|y)|m))|First[\s\xa0]*T(?:omothy|i(?:m(?:ot(?:hy?|y))?)?|himot(?:hy|y)|m))|Timothy?)(?:(?=[\d\s\xa0.:,;\x1e\x1f&\(\)\uff08\uff09\[\]\/"'\*=~\-\u2013\u2014])|$)/gi},{osis:["Titus"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(Ti(?:t(?:us)?)?)(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Phlm"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(Ph(?:ile(?:m(?:on)?)?|mn?|l(?:[ei]mon|mn?)))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Heb"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(H(?:brew(?:ws|s)|w(?:brew(?:ws|s)|(?:[we]brew(?:ws|s)))|e(?:b(?:e(?:rws|w[ewr]s)|r(?:e(?:s|w(?:ws|s)?)|rws|w(?:es|s)|s)|w(?:ers|res))?|(?:[we]brew(?:ws|s)))))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Jas"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(J(?:a(?:m(?:es?)?|s)?|ms?))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["2Pet"],regexp:/(^|[^0-9A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u024f\u1e00-\u1eff\u2c60-\u2c7f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua7ff])((?:II(?:[\s\xa0]*P(?:tr?|e(?:t(?:er?|r)?|r)?)?|\.[\s\xa0]*P(?:tr?|e(?:t(?:er?|r)?|r)?)?)|2(?:[\s\xa0]*P(?:tr?|e(?:t(?:er?|r)?|r)?)?|nd(?:[\s\xa0]*P(?:tr?|e(?:t(?:er?|r)?|r)?)?|\.[\s\xa0]*P(?:tr?|e(?:t(?:er?|r)?|r)?)?)|Pet|\.[\s\xa0]*P(?:tr?|e(?:t(?:er?|r)?|r)?)?)|Second[\s\xa0]*P(?:tr?|e(?:t(?:er?|r)?|r)?)?))(?:(?=[\d\s\xa0.:,;\x1e\x1f&\(\)\uff08\uff09\[\]\/"'\*=~\-\u2013\u2014])|$)/gi},{osis:["1Pet"],regexp:/(^|[^0-9A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u024f\u1e00-\u1eff\u2c60-\u2c7f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua7ff])((?:1(?:[\s\xa0]*P(?:tr?|e(?:t(?:er?|r)?|r)?)?|Pet|\.[\s\xa0]*P(?:tr?|e(?:t(?:er?|r)?|r)?)?|st(?:[\s\xa0]*P(?:tr?|e(?:t(?:er?|r)?|r)?)?|\.[\s\xa0]*P(?:tr?|e(?:t(?:er?|r)?|r)?)?))|I(?:[\s\xa0]*P(?:tr?|e(?:t(?:er?|r)?|r)?)?|\.[\s\xa0]*P(?:tr?|e(?:t(?:er?|r)?|r)?)?)|First[\s\xa0]*P(?:tr?|e(?:t(?:er?|r)?|r)?)?)|Peter)(?:(?=[\d\s\xa0.:,;\x1e\x1f&\(\)\uff08\uff09\[\]\/"'\*=~\-\u2013\u2014])|$)/gi},{osis:["Jude"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(J(?:ude|de))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Tob"],apocrypha:!0,regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(T(?:ob(?:i(?:as|t)?|t)?|b))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Jdt"],apocrypha:!0,regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(J(?:d(?:th?|ith?)|ud(?:th?|ith?)))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Bar"],apocrypha:!0,regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(Bar(?:uch)?)(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Sus"],apocrypha:!0,regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(S(?:hoshana|us(?:annah?)?))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["2Macc"],apocrypha:!0,regexp:/(^|[^0-9A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u024f\u1e00-\u1eff\u2c60-\u2c7f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua7ff])((?:2(?:nd(?:\.[\s\xa0]*Mac(?:c(?:c(?:ab(?:b(?:e[es]?|be)|e(?:e[es]?|s)?))?|ab(?:e(?:e(?:es?|s)?|s)?|b(?:be[es]?|e(?:e[se]?|s)?)))?|ab(?:b(?:be(?:e[se]?|s)?|e(?:e(?:es?|s)?|s)?)|e(?:e(?:es?|s)?|s)?))?|[\s\xa0]*Mac(?:c(?:c(?:ab(?:b(?:e[es]?|be)|e(?:e[es]?|s)?))?|ab(?:e(?:e(?:es?|s)?|s)?|b(?:be[es]?|e(?:e[se]?|s)?)))?|ab(?:b(?:be(?:e[es]?|s)?|e(?:e(?:es?|s)?|s)?)|e(?:e(?:es?|s)?|s)?))?)|Macc|\.[\s\xa0]*Mac(?:c(?:c(?:ab(?:b(?:e[se]?|be)|e(?:e[es]?|s)?))?|ab(?:e(?:e(?:es?|s)?|s)?|b(?:be[es]?|e(?:e[se]?|s)?)))?|ab(?:b(?:be(?:e[se]?|s)?|e(?:e(?:es?|s)?|s)?)|e(?:e(?:es?|s)?|s)?))?|[\s\xa0]*M(?:a(?:c(?:c(?:c(?:ab(?:b(?:e[se]?|be)|e(?:e[es]?|s)?))?|ab(?:e(?:e(?:es?|s)?|s)?|b(?:be[se]?|e(?:e[es]?|s)?)))?|ab(?:b(?:be(?:e[se]?|s)?|e(?:e(?:es?|s)?|s)?)|e(?:e(?:es?|s)?|s)?))?)?|c))|Second[\s\xa0]*Mac(?:c(?:c(?:ab(?:b(?:e[se]?|be)|e(?:e[se]?|s)?))?|ab(?:e(?:e(?:es?|s)?|s)?|b(?:be[es]?|e(?:e[se]?|s)?)))?|ab(?:b(?:be(?:e[se]?|s)?|e(?:e(?:es?|s)?|s)?)|e(?:e(?:es?|s)?|s)?))?|II(?:\.[\s\xa0]*Mac(?:c(?:c(?:ab(?:b(?:e[es]?|be)|e(?:e[se]?|s)?))?|ab(?:e(?:e(?:es?|s)?|s)?|b(?:be[es]?|e(?:e[es]?|s)?)))?|ab(?:b(?:be(?:e[se]?|s)?|e(?:e(?:es?|s)?|s)?)|e(?:e(?:es?|s)?|s)?))?|[\s\xa0]*Mac(?:c(?:c(?:ab(?:b(?:e[es]?|be)|e(?:e[es]?|s)?))?|ab(?:e(?:e(?:es?|s)?|s)?|b(?:be[se]?|e(?:e[es]?|s)?)))?|ab(?:b(?:be(?:e[se]?|s)?|e(?:e(?:es?|s)?|s)?)|e(?:e(?:es?|s)?|s)?))?)))(?:(?=[\d\s\xa0.:,;\x1e\x1f&\(\)\uff08\uff09\[\]\/"'\*=~\-\u2013\u2014])|$)/gi},{osis:["3Macc"],apocrypha:!0,regexp:/(^|[^0-9A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u024f\u1e00-\u1eff\u2c60-\u2c7f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua7ff])((?:III(?:\.[\s\xa0]*Mac(?:c(?:c(?:ab(?:b(?:e[se]?|be)|e(?:e[se]?|s)?))?|ab(?:e(?:e(?:es?|s)?|s)?|b(?:be[es]?|e(?:e[es]?|s)?)))?|ab(?:b(?:be(?:e[es]?|s)?|e(?:e(?:es?|s)?|s)?)|e(?:e(?:es?|s)?|s)?))?|[\s\xa0]*Mac(?:c(?:c(?:ab(?:b(?:e[es]?|be)|e(?:e[se]?|s)?))?|ab(?:e(?:e(?:es?|s)?|s)?|b(?:be[es]?|e(?:e[es]?|s)?)))?|ab(?:b(?:be(?:e[se]?|s)?|e(?:e(?:es?|s)?|s)?)|e(?:e(?:es?|s)?|s)?))?)|Third[\s\xa0]*Mac(?:c(?:c(?:ab(?:b(?:e[se]?|be)|e(?:e[se]?|s)?))?|ab(?:e(?:e(?:es?|s)?|s)?|b(?:be[se]?|e(?:e[se]?|s)?)))?|ab(?:b(?:be(?:e[es]?|s)?|e(?:e(?:es?|s)?|s)?)|e(?:e(?:es?|s)?|s)?))?|3(?:[\s\xa0]*M(?:ac(?:c(?:c(?:ab(?:b(?:e[es]?|be)|e(?:e[es]?|s)?))?|ab(?:e(?:e(?:es?|s)?|s)?|b(?:be[es]?|e(?:e[se]?|s)?)))?|ab(?:b(?:be(?:e[es]?|s)?|e(?:e(?:es?|s)?|s)?)|e(?:e(?:es?|s)?|s)?))?|c)|rd(?:\.[\s\xa0]*Mac(?:c(?:c(?:ab(?:b(?:e[es]?|be)|e(?:e[se]?|s)?))?|ab(?:e(?:e(?:es?|s)?|s)?|b(?:be[es]?|e(?:e[se]?|s)?)))?|ab(?:b(?:be(?:e[se]?|s)?|e(?:e(?:es?|s)?|s)?)|e(?:e(?:es?|s)?|s)?))?|[\s\xa0]*Mac(?:c(?:c(?:ab(?:b(?:e[es]?|be)|e(?:e[se]?|s)?))?|ab(?:e(?:e(?:es?|s)?|s)?|b(?:be[se]?|e(?:e[se]?|s)?)))?|ab(?:b(?:be(?:e[se]?|s)?|e(?:e(?:es?|s)?|s)?)|e(?:e(?:es?|s)?|s)?))?)|Macc|\.[\s\xa0]*Mac(?:c(?:c(?:ab(?:b(?:e[es]?|be)|e(?:e[es]?|s)?))?|ab(?:e(?:e(?:es?|s)?|s)?|b(?:be[es]?|e(?:e[se]?|s)?)))?|ab(?:b(?:be(?:e[se]?|s)?|e(?:e(?:es?|s)?|s)?)|e(?:e(?:es?|s)?|s)?))?)))(?:(?=[\d\s\xa0.:,;\x1e\x1f&\(\)\uff08\uff09\[\]\/"'\*=~\-\u2013\u2014])|$)/gi},{osis:["4Macc"],apocrypha:!0,regexp:/(^|[^0-9A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u024f\u1e00-\u1eff\u2c60-\u2c7f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua7ff])((?:IV(?:\.[\s\xa0]*Mac(?:c(?:c(?:ab(?:b(?:e[se]?|be)|e(?:e[es]?|s)?))?|ab(?:e(?:e(?:es?|s)?|s)?|b(?:be[es]?|e(?:e[es]?|s)?)))?|ab(?:b(?:be(?:e[se]?|s)?|e(?:e(?:es?|s)?|s)?)|e(?:e(?:es?|s)?|s)?))?|[\s\xa0]*Mac(?:c(?:c(?:ab(?:b(?:e[se]?|be)|e(?:e[se]?|s)?))?|ab(?:e(?:e(?:es?|s)?|s)?|b(?:be[es]?|e(?:e[se]?|s)?)))?|ab(?:b(?:be(?:e[se]?|s)?|e(?:e(?:es?|s)?|s)?)|e(?:e(?:es?|s)?|s)?))?)|Fourth[\s\xa0]*Mac(?:c(?:c(?:ab(?:b(?:e[se]?|be)|e(?:e[es]?|s)?))?|ab(?:e(?:e(?:es?|s)?|s)?|b(?:be[es]?|e(?:e[es]?|s)?)))?|ab(?:b(?:be(?:e[es]?|s)?|e(?:e(?:es?|s)?|s)?)|e(?:e(?:es?|s)?|s)?))?|4(?:[\s\xa0]*M(?:ac(?:c(?:c(?:ab(?:b(?:e[se]?|be)|e(?:e[se]?|s)?))?|ab(?:e(?:e(?:es?|s)?|s)?|b(?:be[es]?|e(?:e[es]?|s)?)))?|ab(?:b(?:be(?:e[se]?|s)?|e(?:e(?:es?|s)?|s)?)|e(?:e(?:es?|s)?|s)?))?|c)|Macc|th(?:\.[\s\xa0]*Mac(?:c(?:c(?:ab(?:b(?:e[se]?|be)|e(?:e[es]?|s)?))?|ab(?:e(?:e(?:es?|s)?|s)?|b(?:be[es]?|e(?:e[es]?|s)?)))?|ab(?:b(?:be(?:e[se]?|s)?|e(?:e(?:es?|s)?|s)?)|e(?:e(?:es?|s)?|s)?))?|[\s\xa0]*Mac(?:c(?:c(?:ab(?:b(?:e[es]?|be)|e(?:e[es]?|s)?))?|ab(?:e(?:e(?:es?|s)?|s)?|b(?:be[es]?|e(?:e[se]?|s)?)))?|ab(?:b(?:be(?:e[se]?|s)?|e(?:e(?:es?|s)?|s)?)|e(?:e(?:es?|s)?|s)?))?)|\.[\s\xa0]*Mac(?:c(?:c(?:ab(?:b(?:e[es]?|be)|e(?:e[es]?|s)?))?|ab(?:e(?:e(?:es?|s)?|s)?|b(?:be[se]?|e(?:e[se]?|s)?)))?|ab(?:b(?:be(?:e[se]?|s)?|e(?:e(?:es?|s)?|s)?)|e(?:e(?:es?|s)?|s)?))?)))(?:(?=[\d\s\xa0.:,;\x1e\x1f&\(\)\uff08\uff09\[\]\/"'\*=~\-\u2013\u2014])|$)/gi},{osis:["1Macc"],apocrypha:!0,regexp:/(^|[^0-9A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u024f\u1e00-\u1eff\u2c60-\u2c7f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua7ff])((?:First[\s\xa0]*Mac(?:c(?:c(?:ab(?:b(?:e[es]?|be)|e(?:e[es]?|s)?))?|ab(?:e(?:e(?:es?|s)?|s)?|b(?:be[se]?|e(?:e[se]?|s)?)))?|ab(?:b(?:be(?:e[es]?|s)?|e(?:e(?:es?|s)?|s)?)|e(?:e(?:es?|s)?|s)?))?|I(?:\.[\s\xa0]*Mac(?:c(?:c(?:ab(?:b(?:e[se]?|be)|e(?:e[se]?|s)?))?|ab(?:e(?:e(?:es?|s)?|s)?|b(?:be[es]?|e(?:e[es]?|s)?)))?|ab(?:b(?:be(?:e[se]?|s)?|e(?:e(?:es?|s)?|s)?)|e(?:e(?:es?|s)?|s)?))?|[\s\xa0]*Mac(?:c(?:c(?:ab(?:b(?:e[es]?|be)|e(?:e[es]?|s)?))?|ab(?:e(?:e(?:es?|s)?|s)?|b(?:be[es]?|e(?:e[es]?|s)?)))?|ab(?:b(?:be(?:e[es]?|s)?|e(?:e(?:es?|s)?|s)?)|e(?:e(?:es?|s)?|s)?))?)|1(?:st(?:\.[\s\xa0]*Mac(?:c(?:c(?:ab(?:b(?:e[se]?|be)|e(?:e[se]?|s)?))?|ab(?:e(?:e(?:es?|s)?|s)?|b(?:be[se]?|e(?:e[es]?|s)?)))?|ab(?:b(?:be(?:e[se]?|s)?|e(?:e(?:es?|s)?|s)?)|e(?:e(?:es?|s)?|s)?))?|[\s\xa0]*Mac(?:c(?:c(?:ab(?:b(?:e[se]?|be)|e(?:e[es]?|s)?))?|ab(?:e(?:e(?:es?|s)?|s)?|b(?:be[se]?|e(?:e[es]?|s)?)))?|ab(?:b(?:be(?:e[se]?|s)?|e(?:e(?:es?|s)?|s)?)|e(?:e(?:es?|s)?|s)?))?)|Macc|\.[\s\xa0]*Mac(?:c(?:c(?:ab(?:b(?:e[es]?|be)|e(?:e[se]?|s)?))?|ab(?:e(?:e(?:es?|s)?|s)?|b(?:be[es]?|e(?:e[es]?|s)?)))?|ab(?:b(?:be(?:e[se]?|s)?|e(?:e(?:es?|s)?|s)?)|e(?:e(?:es?|s)?|s)?))?|[\s\xa0]*M(?:a(?:c(?:c(?:c(?:ab(?:b(?:e[es]?|be)|e(?:e[es]?|s)?))?|ab(?:e(?:e(?:es?|s)?|s)?|b(?:be[se]?|e(?:e[se]?|s)?)))?|ab(?:b(?:be(?:e[se]?|s)?|e(?:e(?:es?|s)?|s)?)|e(?:e(?:es?|s)?|s)?))?)?|c)))|Maccabees)(?:(?=[\d\s\xa0.:,;\x1e\x1f&\(\)\uff08\uff09\[\]\/"'\*=~\-\u2013\u2014])|$)/gi},{osis:["Ezek","Ezra"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(Ez)(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Hab","Hag"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(Ha)(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Heb","Hab"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(Hb)(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["John","Jonah","Job","Josh","Joel"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(Jo)(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Jude","Judg"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(J(?:d|ud?))(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Matt","Mark","Mal"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(Ma)(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Phil","Phlm"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(Ph)(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")},{osis:["Zeph","Zech"],regexp:RegExp("(^|"+e.prototype.regexps.pre_book+")(Ze)(?:(?=[\\d\\s\\xa0.:,;\\x1e\\x1f&\\(\\)\uff08\uff09\\[\\]/\"'\\*=~\\-\\u2013\\u2014])|$)","gi")}],!0===t&&"none"===n)return i;
for(a=[],o=0,r=i.length;r>o;o++)s=i[o],(null==s.apocrypha||!0!==s.apocrypha)&&("books"===n&&(s.regexp=RegExp(s.regexp.source,"g")),a.push(s));return a},e.prototype.regexps.books=e.prototype.regexps.get_books(!1,"none");var i=function(){function e(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var t={parse:function(t,n){function s(e){at>st||(st>at&&(at=st,ot=[]),ot.push(e))}function i(){var e,t,n,s,i,a,c;if(a=i=st,e=x(),null===e&&(e=m(),null===e&&(e=r(),null===e&&(e=R(),null===e&&(e=g(),null===e&&(e=d(),null===e&&(e=M(),null===e&&(e=p(),null===e&&(e=f(),null===e&&(e=N(),null===e&&(e=u(),null===e&&(e=S(),null===e&&(e=b(),null===e&&(e=h(),null===e&&(e=_(),null===e&&(e=l(),null===e&&(e=y(),null===e&&(e=C(),null===e&&(e=v(),null===e&&(e=w()))))))))))))))))))),null!==e){if(c=st,n=H(),n=null!==n?n:"",null!==n?(s=o(),null!==s?n=[n,s]:(n=null,st=c)):(n=null,st=c),null!==n)for(t=[];null!==n;)t.push(n),c=st,n=H(),n=null!==n?n:"",null!==n?(s=o(),null!==s?n=[n,s]:(n=null,st=c)):(n=null,st=c);else t=null;null!==t?e=[e,t]:(e=null,st=a)}else e=null,st=a;return null!==e&&(t=e[1],t.unshift([e[0]]),e={type:"sequence",value:t,indices:[i,st-1]}),null===e&&(st=i),e}function a(){var e,n,i,a,r,l,h,u,c,d;if(c=u=st,40===t.charCodeAt(st)?(e="(",st++):(e=null,0===it&&s('"("')),null!==e)if(n=X(),null!==n)if(i=H(),i=null!==i?i:"",null!==i)if(a=o(),null!==a){for(r=[],d=st,l=H(),l=null!==l?l:"",null!==l?(h=o(),null!==h?l=[l,h]:(l=null,st=d)):(l=null,st=d);null!==l;)r.push(l),d=st,l=H(),l=null!==l?l:"",null!==l?(h=o(),null!==h?l=[l,h]:(l=null,st=d)):(l=null,st=d);null!==r?(l=X(),null!==l?(41===t.charCodeAt(st)?(h=")",st++):(h=null,0===it&&s('")"')),null!==h?e=[e,n,i,a,r,l,h]:(e=null,st=c)):(e=null,st=c)):(e=null,st=c)}else e=null,st=c;else e=null,st=c;else e=null,st=c;else e=null,st=c;return null!==e&&(n=e[4],n===void 0&&(n=[]),n.unshift([e[3]]),e={type:"sequence_post_enclosed",value:n,indices:[u,st-1]}),null===e&&(st=u),e}function o(){var e;return e=a(),null===e&&(e=x(),null===e&&(e=m(),null===e&&(e=r(),null===e&&(e=R(),null===e&&(e=g(),null===e&&(e=d(),null===e&&(e=M(),null===e&&(e=p(),null===e&&(e=f(),null===e&&(e=N(),null===e&&(e=u(),null===e&&(e=S(),null===e&&(e=b(),null===e&&(e=h(),null===e&&(e=_(),null===e&&(e=l(),null===e&&(e=y(),null===e&&(e=C(),null===e&&(e=v(),null===e&&(e=w(),null===e&&(e=P(),null===e&&(e=A(),null===e&&(e=k(),null===e&&(e=T(),null===e&&(e=D(),null===e&&(e=W(),null===e&&(e=I(),null===e&&(e=$())))))))))))))))))))))))))))),e}function r(){var e,t,n,s,i;return i=s=st,e=g(),null===e&&(e=d(),null===e&&(e=M(),null===e&&(e=p(),null===e&&(e=f(),null===e&&(e=N(),null===e&&(e=u(),null===e&&(e=S(),null===e&&(e=b(),null===e&&(e=y(),null===e&&(e=C(),null===e&&(e=_(),null===e&&(e=v(),null===e&&(e=w(),null===e&&(e=P(),null===e&&(e=A(),null===e&&(e=k(),null===e&&(e=T(),null===e&&(e=D(),null===e&&(e=W(),null===e&&(e=I(),null===e&&(e=$()))))))))))))))))))))),null!==e?(t=V(),null!==t?(n=R(),null===n&&(n=g(),null===n&&(n=d(),null===n&&(n=M(),null===n&&(n=p(),null===n&&(n=f(),null===n&&(n=N(),null===n&&(n=u(),null===n&&(n=S(),null===n&&(n=b(),null===n&&(n=y(),null===n&&(n=C(),null===n&&(n=_(),null===n&&(n=v(),null===n&&(n=w(),null===n&&(n=P(),null===n&&(n=A(),null===n&&(n=k(),null===n&&(n=D(),null===n&&(n=W(),null===n&&(n=T(),null===n&&(n=I(),null===n&&(n=$())))))))))))))))))))))),null!==n?e=[e,t,n]:(e=null,st=i)):(e=null,st=i)):(e=null,st=i),null!==e&&(e={type:"range",value:[e[0],e[2]],indices:[s,st-1]}),null===e&&(st=s),e}function l(){var e,n,i,a,o,r,l;return r=o=st,31===t.charCodeAt(st)?(e="",st++):(e=null,0===it&&s('"\\x1F"')),null!==e?(n=Y(),null!==n?(l=st,47===t.charCodeAt(st)?(i="/",st++):(i=null,0===it&&s('"/"')),null!==i?(/^[a-z]/.test(t.charAt(st))?(a=t.charAt(st),st++):(a=null,0===it&&s("[a-z]")),null!==a?i=[i,a]:(i=null,st=l)):(i=null,st=l),i=null!==i?i:"",null!==i?(31===t.charCodeAt(st)?(a="",st++):(a=null,0===it&&s('"\\x1F"')),null!==a?e=[e,n,i,a]:(e=null,st=r)):(e=null,st=r)):(e=null,st=r)):(e=null,st=r),null!==e&&(e={type:"b",value:e[1].value,indices:[o,st-1]}),null===e&&(st=o),e}function h(){var e,t,n,s,i,a;return a=i=st,e=l(),null!==e?(t=V(),null!==t?(s=st,it++,n=r(),null===n&&(n=R(),null===n&&(n=M(),null===n&&(n=p(),null===n&&(n=f(),null===n&&(n=N(),null===n&&(n=u(),null===n&&(n=b()))))))),it--,null===n?n="":(n=null,st=s),null!==n?(s=l(),null!==s?e=[e,t,n,s]:(e=null,st=a)):(e=null,st=a)):(e=null,st=a)):(e=null,st=a),null!==e&&(e={type:"b_range",value:[e[0],e[3]],indices:[i,st-1]}),null===e&&(st=i),e}function u(){var e,t,n,s,i,a,o,r,h,u;if(o=a=st,e=l(),null!==e){if(r=st,t=O(),null!==t?(h=st,it++,u=st,n=I(),null!==n?(s=z(),null!==s?(i=$(),null!==i?n=[n,s,i]:(n=null,st=u)):(n=null,st=u)):(n=null,st=u),it--,null!==n?(n="",st=h):n=null,null!==n?t=[t,n]:(t=null,st=r)):(t=null,st=r),null===t){if(n=z(),null!==n)for(t=[];null!==n;)t.push(n),n=z();else t=null;if(null===t){if(n=L(),null!==n)for(t=[];null!==n;)t.push(n),n=L();else t=null;if(null===t){if(n=V(),null!==n)for(t=[];null!==n;)t.push(n),n=V();else t=null;null===t&&(t=X())}}}null!==t?(n=I(),null!==n?e=[e,t,n]:(e=null,st=o)):(e=null,st=o)}else e=null,st=o;return null!==e&&(e={type:"bc",value:[e[0],e[2]],indices:[a,st-1]}),null===e&&(st=a),e}function c(){var e,n,i,a,o,r,h;return h=r=st,e=l(),null!==e?(n=X(),null!==n?(44===t.charCodeAt(st)?(i=",",st++):(i=null,0===it&&s('","')),null!==i?(a=X(),null!==a?(o=I(),null!==o?e=[e,n,i,a,o]:(e=null,st=h)):(e=null,st=h)):(e=null,st=h)):(e=null,st=h)):(e=null,st=h),null!==e&&(e={type:"bc",value:[e[0],e[4]],indices:[r,st-1]}),null===e&&(st=r),e}function d(){var e,t,n,s;return s=n=st,e=N(),null===e&&(e=u()),null!==e?(t=F(),null!==t?e=[e,t]:(e=null,st=s)):(e=null,st=s),null!==e&&(e={type:"bc_title",value:[e[0],e[1]],indices:[n,st-1]}),null===e&&(st=n),e}function p(){var e,n,i,a,o,r,l,h;return r=o=st,e=N(),null===e&&(e=u()),null!==e?(l=st,it++,h=st,46===t.charCodeAt(st)?(n=".",st++):(n=null,0===it&&s('"."')),null!==n?(i=O(),null!==i?(a=$(),null!==a?n=[n,i,a]:(n=null,st=h)):(n=null,st=h)):(n=null,st=h),it--,null===n?n="":(n=null,st=l),null!==n?(l=st,i=z(),null===i&&(i=H()),i=null!==i?i:"",null!==i?(a=O(),null!==a?i=[i,a]:(i=null,st=l)):(i=null,st=l),null===i&&(i=z()),null!==i?(a=D(),null===a&&(a=$()),null!==a?e=[e,n,i,a]:(e=null,st=r)):(e=null,st=r)):(e=null,st=r)):(e=null,st=r),null!==e&&(e={type:"bcv",value:[e[0],e[3]],indices:[o,st-1]}),null===e&&(st=o),e}function f(){var e,t,n,s,i,a,o,r,l;return o=a=st,e=N(),null===e&&(e=u()),null!==e?(t=L(),null!==t?(n=D(),null===n&&(n=$()),null!==n?(r=st,it++,l=st,s=z(),null!==s?(i=$(),null!==i?s=[s,i]:(s=null,st=l)):(s=null,st=l),it--,null===s?s="":(s=null,st=r),null!==s?e=[e,t,n,s]:(e=null,st=o)):(e=null,st=o)):(e=null,st=o)):(e=null,st=o),null!==e&&(e={type:"bcv",value:[e[0],e[2]],indices:[a,st-1]}),null===e&&(st=a),e}function g(){var e,n,i,a,o,r,l,h,u,d,p;return u=h=st,e=c(),null!==e?(n=X(),null!==n?(44===t.charCodeAt(st)?(i=",",st++):(i=null,0===it&&s('","')),null!==i?(a=X(),null!==a?(o=D(),null===o&&(o=$()),null!==o?(d=st,it++,p=st,r=z(),null!==r?(l=$(),null!==l?r=[r,l]:(r=null,st=p)):(r=null,st=p),it--,null===r?r="":(r=null,st=d),null!==r?e=[e,n,i,a,o,r]:(e=null,st=u)):(e=null,st=u)):(e=null,st=u)):(e=null,st=u)):(e=null,st=u)):(e=null,st=u),null!==e&&(e={type:"bcv",value:[e[0],e[4]],indices:[h,st-1]}),null===e&&(st=h),e}function m(){var e,n,i,a,o,r,h,u,c;return c=u=st,e=l(),null!==e?(45===t.charCodeAt(st)?(n="-",st++):(n=null,0===it&&s('"-"')),null===n&&(n=Q()),n=null!==n?n:"",null!==n?(i=I(),null!==i?(45===t.charCodeAt(st)?(a="-",st++):(a=null,0===it&&s('"-"')),null!==a?(o=$(),null!==o?(45===t.charCodeAt(st)?(r="-",st++):(r=null,0===it&&s('"-"')),null!==r?(h=$(),null!==h?e=[e,n,i,a,o,r,h]:(e=null,st=c)):(e=null,st=c)):(e=null,st=c)):(e=null,st=c)):(e=null,st=c)):(e=null,st=c)):(e=null,st=c),null!==e&&(e={type:"range",value:[{type:"bcv",value:[{type:"bc",value:[e[0],e[2]],indices:[e[0].indices[0],e[2].indices[1]]},e[4]],indices:[e[0].indices[0],e[4].indices[1]]},e[6]],indices:[u,st-1]}),null===e&&(st=u),e}function b(){var e,t,n,s,i,a,o;if(i=s=st,e=l(),null!==e){if(n=z(),null!==n)for(t=[];null!==n;)t.push(n),n=z();else t=null;if(null===t){if(n=L(),null!==n)for(t=[];null!==n;)t.push(n),n=L();else t=null;if(null===t){if(n=V(),null!==n)for(t=[];null!==n;)t.push(n),n=V();else t=null;if(null===t){if(a=st,n=H(),null!==n)for(t=[];null!==n;)t.push(n),n=H();else t=null;null!==t?(o=st,it++,n=O(),it--,null!==n?(n="",st=o):n=null,null!==n?t=[t,n]:(t=null,st=a)):(t=null,st=a),null===t&&(t=X())}}}null!==t?(n=D(),null===n&&(n=$()),null!==n?e=[e,t,n]:(e=null,st=i)):(e=null,st=i)}else e=null,st=i;return null!==e&&(e={type:"bv",value:[e[0],e[2]],indices:[s,st-1]}),null===e&&(st=s),e}function v(){var e,t,n,s,i,a;return a=i=st,e=B(),null!==e?(t=I(),null!==t?(n=J(),n=null!==n?n:"",null!==n?(s=l(),null!==s?e=[e,t,n,s]:(e=null,st=a)):(e=null,st=a)):(e=null,st=a)):(e=null,st=a),null!==e&&(e={type:"bc",value:[e[3],e[1]],indices:[i,st-1]}),null===e&&(st=i),e}function x(){var e,t,n,s,i,a,o,r;return r=o=st,e=B(),null!==e?(t=I(),null!==t?(n=V(),null!==n?(s=I(),null!==s?(i=J(),i=null!==i?i:"",null!==i?(a=l(),null!==a?e=[e,t,n,s,i,a]:(e=null,st=r)):(e=null,st=r)):(e=null,st=r)):(e=null,st=r)):(e=null,st=r)):(e=null,st=r),null!==e&&(e={type:"cb_range",value:[e[5],e[1],e[3]],indices:[o,st-1]}),null===e&&(st=o),e}function y(){var e,t,n,s,i,a;return a=i=st,e=v(),null!==e?(t=H(),t=null!==t?t:"",null!==t?(n=O(),null!==n?(s=$(),null!==s?e=[e,t,n,s]:(e=null,st=a)):(e=null,st=a)):(e=null,st=a)):(e=null,st=a),null!==e&&(e={type:"bcv",value:[e[0],e[3]],indices:[i,st-1]}),null===e&&(st=i),e}function w(){var e,n,i,a,o,r,h;return h=r=st,e=I(),null!==e?("th"===t.substr(st,2)?(n="th",st+=2):(n=null,0===it&&s('"th"')),null===n&&("nd"===t.substr(st,2)?(n="nd",st+=2):(n=null,0===it&&s('"nd"')),null===n&&("st"===t.substr(st,2)?(n="st",st+=2):(n=null,0===it&&s('"st"')))),null!==n?(i=B(),null!==i?(a=J(),a=null!==a?a:"",null!==a?(o=l(),null!==o?e=[e,n,i,a,o]:(e=null,st=h)):(e=null,st=h)):(e=null,st=h)):(e=null,st=h)):(e=null,st=h),null!==e&&(e={type:"bc",value:[e[4],e[0]],indices:[r,st-1]}),null===e&&(st=r),e}function C(){var e,t,n,s,i,a;return a=i=st,e=w(),null!==e?(t=H(),t=null!==t?t:"",null!==t?(n=O(),null!==n?(s=$(),null!==s?e=[e,t,n,s]:(e=null,st=a)):(e=null,st=a)):(e=null,st=a)):(e=null,st=a),null!==e&&(e={type:"bcv",value:[e[0],e[3]],indices:[i,st-1]}),null===e&&(st=i),e}function _(){var e,n,i,a,o;return o=a=st,31===t.charCodeAt(st)?(e="",st++):(e=null,0===it&&s('"\\x1F"')),null!==e?(n=Y(),null!==n?("/1"===t.substr(st,3)?(i="/1",st+=3):(i=null,0===it&&s('"/1\\x1F"')),null!==i?e=[e,n,i]:(e=null,st=o)):(e=null,st=o)):(e=null,st=o),null!==e&&(e={type:"c_psalm",value:e[1].value,indices:[a,st-1]}),null===e&&(st=a),e}function S(){var e,t,n,s,i,a;return a=i=st,e=_(),null!==e?(t=H(),t=null!==t?t:"",null!==t?(n=O(),null!==n?(s=$(),null!==s?e=[e,t,n,s]:(e=null,st=a)):(e=null,st=a)):(e=null,st=a)):(e=null,st=a),null!==e&&(e={type:"cv_psalm",value:[e[0],e[3]],indices:[i,st-1]}),null===e&&(st=i),e}function P(){var e,t,n,s,i;return i=s=st,e=B(),null!==e?(t=I(),null!==t?(n=F(),null!==n?e=[e,t,n]:(e=null,st=i)):(e=null,st=i)):(e=null,st=i),null!==e&&(e={type:"c_title",value:[e[1],e[2]],indices:[s,st-1]}),null===e&&(st=s),e}function k(){var e,n,i,a,o,r,l,h;return r=o=st,e=I(),null!==e?(l=st,it++,h=st,46===t.charCodeAt(st)?(n=".",st++):(n=null,0===it&&s('"."')),null!==n?(i=O(),null!==i?(a=$(),null!==a?n=[n,i,a]:(n=null,st=h)):(n=null,st=h)):(n=null,st=h),it--,null===n?n="":(n=null,st=l),null!==n?(l=st,i=z(),i=null!==i?i:"",null!==i?(a=O(),null!==a?i=[i,a]:(i=null,st=l)):(i=null,st=l),null===i&&(i=z()),null!==i?(a=D(),null===a&&(a=$()),null!==a?e=[e,n,i,a]:(e=null,st=r)):(e=null,st=r)):(e=null,st=r)):(e=null,st=r),null!==e&&(e={type:"cv",value:[e[0],e[3]],indices:[o,st-1]}),null===e&&(st=o),e}function T(){var e,t,n,s,i,a,o,r,l;return o=a=st,e=I(),null!==e?(t=L(),null!==t?(n=D(),null===n&&(n=$()),null!==n?(r=st,it++,l=st,s=z(),null!==s?(i=$(),null!==i?s=[s,i]:(s=null,st=l)):(s=null,st=l),it--,null===s?s="":(s=null,st=r),null!==s?e=[e,t,n,s]:(e=null,st=o)):(e=null,st=o)):(e=null,st=o)):(e=null,st=o),null!==e&&(e={type:"cv",value:[e[0],e[2]],indices:[a,st-1]}),null===e&&(st=a),e}function I(){var e,t,n,s;return s=n=st,e=B(),e=null!==e?e:"",null!==e?(t=W(),null!==t?e=[e,t]:(e=null,st=s)):(e=null,st=s),null!==e&&(e={type:"c",value:[e[1]],indices:[n,st-1]}),null===e&&(st=n),e}function R(){var e,n,i,a,o,r,l,h;return l=r=st,e=p(),null===e&&(e=f(),null===e&&(e=u(),null===e&&(e=k(),null===e&&(e=T(),null===e&&(e=W(),null===e&&(e=I(),null===e&&(e=$()))))))),null!==e?(n=X(),null!==n?(h=st,"ff"===t.substr(st,2)?(i="ff",st+=2):(i=null,0===it&&s('"ff"')),null!==i?(o=st,it++,/^[a-z0-9]/.test(t.charAt(st))?(a=t.charAt(st),st++):(a=null,0===it&&s("[a-z0-9]")),it--,null===a?a="":(a=null,st=o),null!==a?i=[i,a]:(i=null,st=h)):(i=null,st=h),null===i&&(h=st,102===t.charCodeAt(st)?(i="f",st++):(i=null,0===it&&s('"f"')),null!==i?(o=st,it++,/^[a-z0-9]/.test(t.charAt(st))?(a=t.charAt(st),st++):(a=null,0===it&&s("[a-z0-9]")),it--,null===a?a="":(a=null,st=o),null!==a?i=[i,a]:(i=null,st=h)):(i=null,st=h)),null!==i?(a=K(),a=null!==a?a:"",null!==a?(h=st,it++,/^[a-z]/.test(t.charAt(st))?(o=t.charAt(st),st++):(o=null,0===it&&s("[a-z]")),it--,null===o?o="":(o=null,st=h),null!==o?e=[e,n,i,a,o]:(e=null,st=l)):(e=null,st=l)):(e=null,st=l)):(e=null,st=l)):(e=null,st=l),null!==e&&(e={type:"ff",value:[e[0]],indices:[r,st-1]}),null===e&&(st=r),e}function A(){var e,n,i,a,o;return o=a=st,e=W(),null!==e?(n=z(),null===n&&(n=H()),n=null!==n?n:"",null!==n?("title"===t.substr(st,5)?(i="title",st+=5):(i=null,0===it&&s('"title"')),null!==i?e=[e,n,i]:(e=null,st=o)):(e=null,st=o)):(e=null,st=o),null!==e&&(e={type:"integer_title",value:[e[0]],indices:[a,st-1]}),null===e&&(st=a),e}function E(){var e,n,i,a,o;return o=a=st,31===t.charCodeAt(st)?(e="",st++):(e=null,0===it&&s('"\\x1F"')),null!==e?(n=Y(),null!==n?("/2"===t.substr(st,3)?(i="/2",st+=3):(i=null,0===it&&s('"/2\\x1F"')),null!==i?e=[e,n,i]:(e=null,st=o)):(e=null,st=o)):(e=null,st=o),null!==e&&(e={type:"b",value:e[1].value,indices:[a,st-1]}),null===e&&(st=a),e}function N(){var e,n,i,a,o,r;return o=a=st,e=E(),null!==e?(".1"===t.substr(st,2)?(n=".1",st+=2):(n=null,0===it&&s('".1"')),null!==n?(r=st,it++,/^[0-9]/.test(t.charAt(st))?(i=t.charAt(st),st++):(i=null,0===it&&s("[0-9]")),it--,null===i?i="":(i=null,st=r),null!==i?e=[e,n,i]:(e=null,st=o)):(e=null,st=o)):(e=null,st=o),null!==e&&(e={type:"bc",value:[e[0],{type:"c",value:[{type:"integer",value:151,indices:[st-2,st-1]}],indices:[st-2,st-1]}],indices:[a,st-1]}),null===e&&(st=a),e}function M(){var e,n,i,a,o;return o=a=st,e=N(),null!==e?(46===t.charCodeAt(st)?(n=".",st++):(n=null,0===it&&s('"."')),null!==n?(i=W(),null!==i?e=[e,n,i]:(e=null,st=o)):(e=null,st=o)):(e=null,st=o),null!==e&&(e={type:"bcv",value:[e[0],{type:"v",value:[e[2]],indices:[e[2].indices[0],e[2].indices[1]]}],indices:[a,st-1]}),null===e&&(st=a),e}function D(){var e,n,i,a,o,r,l,h,u,c;return h=l=st,e=O(),e=null!==e?e:"",null!==e?(n=W(),null!==n?(i=X(),null!==i?(u=st,it++,r=st,"ff"===t.substr(st,2)?(a="ff",st+=2):(a=null,0===it&&s('"ff"')),null!==a?(c=st,it++,/^[a-z0-9]/.test(t.charAt(st))?(o=t.charAt(st),st++):(o=null,0===it&&s("[a-z0-9]")),it--,null===o?o="":(o=null,st=c),null!==o?a=[a,o]:(a=null,st=r)):(a=null,st=r),null===a&&(r=st,102===t.charCodeAt(st)?(a="f",st++):(a=null,0===it&&s('"f"')),null!==a?(c=st,it++,/^[a-z0-9]/.test(t.charAt(st))?(o=t.charAt(st),st++):(o=null,0===it&&s("[a-z0-9]")),it--,null===o?o="":(o=null,st=c),null!==o?a=[a,o]:(a=null,st=r)):(a=null,st=r)),it--,null===a?a="":(a=null,st=u),null!==a?(/^[a-e]/.test(t.charAt(st))?(o=t.charAt(st),st++):(o=null,0===it&&s("[a-e]")),null!==o?(u=st,it++,/^[a-z]/.test(t.charAt(st))?(r=t.charAt(st),st++):(r=null,0===it&&s("[a-z]")),it--,null===r?r="":(r=null,st=u),null!==r?e=[e,n,i,a,o,r]:(e=null,st=h)):(e=null,st=h)):(e=null,st=h)):(e=null,st=h)):(e=null,st=h)):(e=null,st=h),null!==e&&(e={type:"v",value:[e[1]],indices:[l,st-1]}),null===e&&(st=l),e}function $(){var e,t,n,s;return s=n=st,e=O(),e=null!==e?e:"",null!==e?(t=W(),null!==t?e=[e,t]:(e=null,st=s)):(e=null,st=s),null!==e&&(e={type:"v",value:[e[1]],indices:[n,st-1]}),null===e&&(st=n),e}function B(){var e,n,i,a,o,r;return o=a=st,e=X(),null!==e?("chapters"===t.substr(st,8)?(n="chapters",st+=8):(n=null,0===it&&s('"chapters"')),null===n&&("chapter"===t.substr(st,7)?(n="chapter",st+=7):(n=null,0===it&&s('"chapter"')),null===n&&(r=st,"chapts"===t.substr(st,6)?(n="chapts",st+=6):(n=null,0===it&&s('"chapts"')),null!==n?(i=K(),i=null!==i?i:"",null!==i?n=[n,i]:(n=null,st=r)):(n=null,st=r),null===n&&(r=st,"chpts"===t.substr(st,5)?(n="chpts",st+=5):(n=null,0===it&&s('"chpts"')),null!==n?(i=K(),i=null!==i?i:"",null!==i?n=[n,i]:(n=null,st=r)):(n=null,st=r),null===n&&(r=st,"chapt"===t.substr(st,5)?(n="chapt",st+=5):(n=null,0===it&&s('"chapt"')),null!==n?(i=K(),i=null!==i?i:"",null!==i?n=[n,i]:(n=null,st=r)):(n=null,st=r),null===n&&(r=st,"chap"===t.substr(st,4)?(n="chap",st+=4):(n=null,0===it&&s('"chap"')),null!==n?(i=K(),i=null!==i?i:"",null!==i?n=[n,i]:(n=null,st=r)):(n=null,st=r),null===n&&(r=st,"chp"===t.substr(st,3)?(n="chp",st+=3):(n=null,0===it&&s('"chp"')),null!==n?(i=K(),i=null!==i?i:"",null!==i?n=[n,i]:(n=null,st=r)):(n=null,st=r),null===n&&(r=st,"chs"===t.substr(st,3)?(n="chs",st+=3):(n=null,0===it&&s('"chs"')),null!==n?(i=K(),i=null!==i?i:"",null!==i?n=[n,i]:(n=null,st=r)):(n=null,st=r),null===n&&(r=st,"cha"===t.substr(st,3)?(n="cha",st+=3):(n=null,0===it&&s('"cha"')),null!==n?(i=K(),i=null!==i?i:"",null!==i?n=[n,i]:(n=null,st=r)):(n=null,st=r),null===n&&(r=st,"ch"===t.substr(st,2)?(n="ch",st+=2):(n=null,0===it&&s('"ch"')),null!==n?(i=K(),i=null!==i?i:"",null!==i?n=[n,i]:(n=null,st=r)):(n=null,st=r)))))))))),null!==n?(i=X(),null!==i?e=[e,n,i]:(e=null,st=o)):(e=null,st=o)):(e=null,st=o),null!==e&&(e={type:"c_explicit"}),null===e&&(st=a),e}function O(){var e,n,i,a,o,r;return r=o=st,e=X(),null!==e?("verses"===t.substr(st,6)?(n="verses",st+=6):(n=null,0===it&&s('"verses"')),null===n&&("verse"===t.substr(st,5)?(n="verse",st+=5):(n=null,0===it&&s('"verse"')),null===n&&(a=st,"ver"===t.substr(st,3)?(n="ver",st+=3):(n=null,0===it&&s('"ver"')),null!==n?(i=K(),i=null!==i?i:"",null!==i?n=[n,i]:(n=null,st=a)):(n=null,st=a),null===n&&(a=st,"vss"===t.substr(st,3)?(n="vss",st+=3):(n=null,0===it&&s('"vss"')),null!==n?(i=K(),i=null!==i?i:"",null!==i?n=[n,i]:(n=null,st=a)):(n=null,st=a),null===n&&(a=st,"vs"===t.substr(st,2)?(n="vs",st+=2):(n=null,0===it&&s('"vs"')),null!==n?(i=K(),i=null!==i?i:"",null!==i?n=[n,i]:(n=null,st=a)):(n=null,st=a),null===n&&(a=st,"vv"===t.substr(st,2)?(n="vv",st+=2):(n=null,0===it&&s('"vv"')),null!==n?(i=K(),i=null!==i?i:"",null!==i?n=[n,i]:(n=null,st=a)):(n=null,st=a),null===n&&(a=st,118===t.charCodeAt(st)?(n="v",st++):(n=null,0===it&&s('"v"')),null!==n?(i=K(),i=null!==i?i:"",null!==i?n=[n,i]:(n=null,st=a)):(n=null,st=a))))))),null!==n?(a=st,it++,/^[a-z]/.test(t.charAt(st))?(i=t.charAt(st),st++):(i=null,0===it&&s("[a-z]")),it--,null===i?i="":(i=null,st=a),null!==i?(a=X(),null!==a?e=[e,n,i,a]:(e=null,st=r)):(e=null,st=r)):(e=null,st=r)):(e=null,st=r),null!==e&&(e={type:"v_explicit"}),null===e&&(st=o),e}function z(){var e,n,i,a,o,r,l,h,u,c;if(l=st,e=X(),null!==e){if(58===t.charCodeAt(st)?(i=":",st++):(i=null,0===it&&s('":"')),null!==i)for(n=[];null!==i;)n.push(i),58===t.charCodeAt(st)?(i=":",st++):(i=null,0===it&&s('":"'));else n=null;null===n&&(h=st,46===t.charCodeAt(st)?(n=".",st++):(n=null,0===it&&s('"."')),null!==n?(u=st,it++,c=st,i=X(),null!==i?(46===t.charCodeAt(st)?(a=".",st++):(a=null,0===it&&s('"."')),null!==a?(o=X(),null!==o?(46===t.charCodeAt(st)?(r=".",st++):(r=null,0===it&&s('"."')),null!==r?i=[i,a,o,r]:(i=null,st=c)):(i=null,st=c)):(i=null,st=c)):(i=null,st=c),it--,null===i?i="":(i=null,st=u),null!==i?n=[n,i]:(n=null,st=h)):(n=null,st=h)),null!==n?(i=X(),null!==i?e=[e,n,i]:(e=null,st=l)):(e=null,st=l)}else e=null,st=l;return e}function L(){var e,n,i,a;return a=st,e=X(),null!==e?(/^["']/.test(t.charAt(st))?(n=t.charAt(st),st++):(n=null,0===it&&s("[\"']")),null!==n?(i=X(),null!==i?e=[e,n,i]:(e=null,st=a)):(e=null,st=a)):(e=null,st=a),null===e&&(e=Q()),e}function H(){var e,n,i,a,o,r,l,h,u,c;if(l=st,/^[,;\/:&\-\u2013\u2014~]/.test(t.charAt(st))?(n=t.charAt(st),st++):(n=null,0===it&&s("[,;\\/:&\\-\\u2013\\u2014~]")),null===n&&(h=st,46===t.charCodeAt(st)?(n=".",st++):(n=null,0===it&&s('"."')),null!==n?(u=st,it++,c=st,i=X(),null!==i?(46===t.charCodeAt(st)?(a=".",st++):(a=null,0===it&&s('"."')),null!==a?(o=X(),null!==o?(46===t.charCodeAt(st)?(r=".",st++):(r=null,0===it&&s('"."')),null!==r?i=[i,a,o,r]:(i=null,st=c)):(i=null,st=c)):(i=null,st=c)):(i=null,st=c),it--,null===i?i="":(i=null,st=u),null!==i?n=[n,i]:(n=null,st=h)):(n=null,st=h),null===n&&("and"===t.substr(st,3)?(n="and",st+=3):(n=null,0===it&&s('"and"')),null===n&&("compare"===t.substr(st,7)?(n="compare",st+=7):(n=null,0===it&&s('"compare"')),null===n&&(h=st,"cf"===t.substr(st,2)?(n="cf",st+=2):(n=null,0===it&&s('"cf"')),null!==n?(i=K(),i=null!==i?i:"",null!==i?n=[n,i]:(n=null,st=h)):(n=null,st=h),null===n&&(h=st,"see"===t.substr(st,3)?(n="see",st+=3):(n=null,0===it&&s('"see"')),null!==n?(i=Q(),null!==i?("also"===t.substr(st,4)?(a="also",st+=4):(a=null,0===it&&s('"also"')),null!==a?n=[n,i,a]:(n=null,st=h)):(n=null,st=h)):(n=null,st=h),null===n&&("also"===t.substr(st,4)?(n="also",st+=4):(n=null,0===it&&s('"also"')),null===n&&("see"===t.substr(st,3)?(n="see",st+=3):(n=null,0===it&&s('"see"')),null===n&&(n=Q())))))))),null!==n)for(e=[];null!==n;)e.push(n),/^[,;\/:&\-\u2013\u2014~]/.test(t.charAt(st))?(n=t.charAt(st),st++):(n=null,0===it&&s("[,;\\/:&\\-\\u2013\\u2014~]")),null===n&&(h=st,46===t.charCodeAt(st)?(n=".",st++):(n=null,0===it&&s('"."')),null!==n?(u=st,it++,c=st,i=X(),null!==i?(46===t.charCodeAt(st)?(a=".",st++):(a=null,0===it&&s('"."')),null!==a?(o=X(),null!==o?(46===t.charCodeAt(st)?(r=".",st++):(r=null,0===it&&s('"."')),null!==r?i=[i,a,o,r]:(i=null,st=c)):(i=null,st=c)):(i=null,st=c)):(i=null,st=c),it--,null===i?i="":(i=null,st=u),null!==i?n=[n,i]:(n=null,st=h)):(n=null,st=h),null===n&&("and"===t.substr(st,3)?(n="and",st+=3):(n=null,0===it&&s('"and"')),null===n&&("compare"===t.substr(st,7)?(n="compare",st+=7):(n=null,0===it&&s('"compare"')),null===n&&(h=st,"cf"===t.substr(st,2)?(n="cf",st+=2):(n=null,0===it&&s('"cf"')),null!==n?(i=K(),i=null!==i?i:"",null!==i?n=[n,i]:(n=null,st=h)):(n=null,st=h),null===n&&(h=st,"see"===t.substr(st,3)?(n="see",st+=3):(n=null,0===it&&s('"see"')),null!==n?(i=Q(),null!==i?("also"===t.substr(st,4)?(a="also",st+=4):(a=null,0===it&&s('"also"')),null!==a?n=[n,i,a]:(n=null,st=h)):(n=null,st=h)):(n=null,st=h),null===n&&("also"===t.substr(st,4)?(n="also",st+=4):(n=null,0===it&&s('"also"')),null===n&&("see"===t.substr(st,3)?(n="see",st+=3):(n=null,0===it&&s('"see"')),null===n&&(n=Q()))))))));else e=null;return null!==e&&(e=""),null===e&&(st=l),e}function V(){var e,n,i,a,o,r;if(o=st,e=X(),null!==e){if(r=st,/^[\-\u2013\u2014]/.test(t.charAt(st))?(i=t.charAt(st),st++):(i=null,0===it&&s("[\\-\\u2013\\u2014]")),null!==i?(a=X(),null!==a?i=[i,a]:(i=null,st=r)):(i=null,st=r),null===i&&(r=st,"through"===t.substr(st,7)?(i="through",st+=7):(i=null,0===it&&s('"through"')),null!==i?(a=X(),null!==a?i=[i,a]:(i=null,st=r)):(i=null,st=r),null===i&&(r=st,"thru"===t.substr(st,4)?(i="thru",st+=4):(i=null,0===it&&s('"thru"')),null!==i?(a=X(),null!==a?i=[i,a]:(i=null,st=r)):(i=null,st=r),null===i&&(r=st,"to"===t.substr(st,2)?(i="to",st+=2):(i=null,0===it&&s('"to"')),null!==i?(a=X(),null!==a?i=[i,a]:(i=null,st=r)):(i=null,st=r)))),null!==i)for(n=[];null!==i;)n.push(i),r=st,/^[\-\u2013\u2014]/.test(t.charAt(st))?(i=t.charAt(st),st++):(i=null,0===it&&s("[\\-\\u2013\\u2014]")),null!==i?(a=X(),null!==a?i=[i,a]:(i=null,st=r)):(i=null,st=r),null===i&&(r=st,"through"===t.substr(st,7)?(i="through",st+=7):(i=null,0===it&&s('"through"')),null!==i?(a=X(),null!==a?i=[i,a]:(i=null,st=r)):(i=null,st=r),null===i&&(r=st,"thru"===t.substr(st,4)?(i="thru",st+=4):(i=null,0===it&&s('"thru"')),null!==i?(a=X(),null!==a?i=[i,a]:(i=null,st=r)):(i=null,st=r),null===i&&(r=st,"to"===t.substr(st,2)?(i="to",st+=2):(i=null,0===it&&s('"to"')),null!==i?(a=X(),null!==a?i=[i,a]:(i=null,st=r)):(i=null,st=r))));else n=null;null!==n?e=[e,n]:(e=null,st=o)}else e=null,st=o;return e}function F(){var e,n,i,a;return a=i=st,e=z(),null===e&&(e=H()),e=null!==e?e:"",null!==e?("title"===t.substr(st,5)?(n="title",st+=5):(n=null,0===it&&s('"title"')),null!==n?e=[e,n]:(e=null,st=a)):(e=null,st=a),null!==e&&(e={type:"title",value:[e[1]],indices:[i,st-1]}),null===e&&(st=i),e}function J(){var e,n,i,a,o,r,l,h,u,c,d;return c=st,e=X(),null!==e?("from"===t.substr(st,4)?(n="from",st+=4):(n=null,0===it&&s('"from"')),null===n&&("of"===t.substr(st,2)?(n="of",st+=2):(n=null,0===it&&s('"of"')),null===n&&("in"===t.substr(st,2)?(n="in",st+=2):(n=null,0===it&&s('"in"')))),null!==n?(i=X(),null!==i?(d=st,"the"===t.substr(st,3)?(a="the",st+=3):(a=null,0===it&&s('"the"')),null!==a?(o=X(),null!==o?("book"===t.substr(st,4)?(r="book",st+=4):(r=null,0===it&&s('"book"')),null!==r?(l=X(),null!==l?("of"===t.substr(st,2)?(h="of",st+=2):(h=null,0===it&&s('"of"')),null!==h?(u=X(),null!==u?a=[a,o,r,l,h,u]:(a=null,st=d)):(a=null,st=d)):(a=null,st=d)):(a=null,st=d)):(a=null,st=d)):(a=null,st=d),a=null!==a?a:"",null!==a?e=[e,n,i,a]:(e=null,st=c)):(e=null,st=c)):(e=null,st=c)):(e=null,st=c),e}function K(){var e,n,i,a,o,r,l,h,u;return l=st,e=X(),null!==e?(46===t.charCodeAt(st)?(n=".",st++):(n=null,0===it&&s('"."')),null!==n?(h=st,it++,u=st,i=X(),null!==i?(46===t.charCodeAt(st)?(a=".",st++):(a=null,0===it&&s('"."')),null!==a?(o=X(),null!==o?(46===t.charCodeAt(st)?(r=".",st++):(r=null,0===it&&s('"."')),null!==r?i=[i,a,o,r]:(i=null,st=u)):(i=null,st=u)):(i=null,st=u)):(i=null,st=u),it--,null===i?i="":(i=null,st=h),null!==i?e=[e,n,i]:(e=null,st=l)):(e=null,st=l)):(e=null,st=l),e}function U(){var e,n,i,a,o,r,l,h,u,c,d;if(u=h=st,e=X(),null!==e)if(/^[([]/.test(t.charAt(st))?(n=t.charAt(st),st++):(n=null,0===it&&s("[([]")),null!==n)if(i=X(),null!==i){if(c=st,a=q(),null!==a){for(o=[],d=st,r=H(),null!==r?(l=q(),null!==l?r=[r,l]:(r=null,st=d)):(r=null,st=d);null!==r;)o.push(r),d=st,r=H(),null!==r?(l=q(),null!==l?r=[r,l]:(r=null,st=d)):(r=null,st=d);null!==o?a=[a,o]:(a=null,st=c)}else a=null,st=c;null!==a?(o=X(),null!==o?(/^[)\]]/.test(t.charAt(st))?(r=t.charAt(st),st++):(r=null,0===it&&s("[)\\]]")),null!==r?e=[e,n,i,a,o,r]:(e=null,st=u)):(e=null,st=u)):(e=null,st=u)}else e=null,st=u;else e=null,st=u;else e=null,st=u;return null!==e&&(e={type:"translation_sequence",value:e[3],indices:[h,st-1]}),null===e&&(st=h),e}function j(){var e,n,i,a,o,r,l,h,u,c;if(h=l=st,e=X(),null!==e)if(u=st,44===t.charCodeAt(st)?(n=",",st++):(n=null,0===it&&s('","')),null!==n?(i=X(),null!==i?n=[n,i]:(n=null,st=u)):(n=null,st=u),n=null!==n?n:"",null!==n){if(u=st,i=q(),null!==i){for(a=[],c=st,o=H(),null!==o?(r=q(),null!==r?o=[o,r]:(o=null,st=c)):(o=null,st=c);null!==o;)a.push(o),c=st,o=H(),null!==o?(r=q(),null!==r?o=[o,r]:(o=null,st=c)):(o=null,st=c);null!==a?i=[i,a]:(i=null,st=u)}else i=null,st=u;null!==i?e=[e,n,i]:(e=null,st=h)}else e=null,st=h;else e=null,st=h;return null!==e&&(e={type:"translation_sequence",value:e[2],indices:[l,st-1]}),null===e&&(st=l),e}function q(){var e,n,i,a,o;return o=a=st,30===t.charCodeAt(st)?(e="",st++):(e=null,0===it&&s('"\\x1E"')),null!==e?(n=Y(),null!==n?(30===t.charCodeAt(st)?(i="",st++):(i=null,0===it&&s('"\\x1E"')),null!==i?e=[e,n,i]:(e=null,st=o)):(e=null,st=o)):(e=null,st=o),null!==e&&(e={type:"translation",value:e[1].value,indices:[a,st-1]}),null===e&&(st=a),e}function W(){var e,n,i,a,o,r;return r=o=a=st,/^[0-9]/.test(t.charAt(st))?(e=t.charAt(st),st++):(e=null,0===it&&s("[0-9]")),null!==e?(/^[0-9]/.test(t.charAt(st))?(n=t.charAt(st),st++):(n=null,0===it&&s("[0-9]")),n=null!==n?n:"",null!==n?(/^[0-9]/.test(t.charAt(st))?(i=t.charAt(st),st++):(i=null,0===it&&s("[0-9]")),i=null!==i?i:"",null!==i?e=[e,n,i]:(e=null,st=r)):(e=null,st=r)):(e=null,st=r),null!==e?(r=st,it++,/^[0-9]/.test(t.charAt(st))?(n=t.charAt(st),st++):(n=null,0===it&&s("[0-9]")),null===n&&(",000"===t.substr(st,4)?(n=",000",st+=4):(n=null,0===it&&s('",000"'))),it--,null===n?n="":(n=null,st=r),null!==n?e=[e,n]:(e=null,st=o)):(e=null,st=o),null!==e&&(e={type:"integer",value:parseInt(e[0].join(""),10),indices:[a,st-1]}),null===e&&(st=a),e}function Y(){var e,n,i;if(i=st,/^[0-9]/.test(t.charAt(st))?(n=t.charAt(st),st++):(n=null,0===it&&s("[0-9]")),null!==n)for(e=[];null!==n;)e.push(n),/^[0-9]/.test(t.charAt(st))?(n=t.charAt(st),st++):(n=null,0===it&&s("[0-9]"));else e=null;return null!==e&&(e={type:"integer",value:parseInt(e.join(""),10),indices:[i,st-1]}),null===e&&(st=i),e}function Z(){var e,n,i;if(i=st,/^[^\x1F\x1E([]/.test(t.charAt(st))?(n=t.charAt(st),st++):(n=null,0===it&&s("[^\\x1F\\x1E([]")),null!==n)for(e=[];null!==n;)e.push(n),/^[^\x1F\x1E([]/.test(t.charAt(st))?(n=t.charAt(st),st++):(n=null,0===it&&s("[^\\x1F\\x1E([]"));else e=null;return null!==e&&(e={type:"word",value:e.join(""),indices:[i,st-1]}),null===e&&(st=i),e}function G(){var e,n;return n=st,/^[([]/.test(t.charAt(st))?(e=t.charAt(st),st++):(e=null,0===it&&s("[([]")),null!==e&&(e={type:"stop",value:e,indices:[n,st-1]}),null===e&&(st=n),e}function X(){var e;return e=Q(),null!==e?e:""}function Q(){var e,n;if(/^[\s\xa0*]/.test(t.charAt(st))?(n=t.charAt(st),st++):(n=null,0===it&&s("[\\s\\xa0*]")),null!==n)for(e=[];null!==n;)e.push(n),/^[\s\xa0*]/.test(t.charAt(st))?(n=t.charAt(st),st++):(n=null,0===it&&s("[\\s\\xa0*]"));else e=null;return e}function et(e){e.sort();for(var t=null,n=[],s=0;e.length>s;s++)e[s]!==t&&(n.push(e[s]),t=e[s]);return n}function tt(){for(var e=1,n=1,s=!1,i=0;Math.max(st,at)>i;i++){var a=t.charAt(i);"\n"===a?(s||e++,n=1,s=!1):"\r"===a||"\u2028"===a||"\u2029"===a?(e++,n=1,s=!0):(n++,s=!1)}return{line:e,column:n}}var nt={start:function(){var e,t;if(t=m(),null===t&&(t=i(),null===t&&(t=x(),null===t&&(t=r(),null===t&&(t=R(),null===t&&(t=g(),null===t&&(t=d(),null===t&&(t=M(),null===t&&(t=p(),null===t&&(t=f(),null===t&&(t=N(),null===t&&(t=u(),null===t&&(t=S(),null===t&&(t=b(),null===t&&(t=h(),null===t&&(t=_(),null===t&&(t=l(),null===t&&(t=y(),null===t&&(t=C(),null===t&&(t=v(),null===t&&(t=w(),null===t&&(t=U(),null===t&&(t=j(),null===t&&(t=H(),null===t&&(t=P(),null===t&&(t=A(),null===t&&(t=k(),null===t&&(t=T(),null===t&&(t=D(),null===t&&(t=W(),null===t&&(t=I(),null===t&&(t=$(),null===t&&(t=Z(),null===t&&(t=G()))))))))))))))))))))))))))))))))),null!==t)for(e=[];null!==t;)e.push(t),t=m(),null===t&&(t=i(),null===t&&(t=x(),null===t&&(t=r(),null===t&&(t=R(),null===t&&(t=g(),null===t&&(t=d(),null===t&&(t=M(),null===t&&(t=p(),null===t&&(t=f(),null===t&&(t=N(),null===t&&(t=u(),null===t&&(t=S(),null===t&&(t=b(),null===t&&(t=h(),null===t&&(t=_(),null===t&&(t=l(),null===t&&(t=y(),null===t&&(t=C(),null===t&&(t=v(),null===t&&(t=w(),null===t&&(t=U(),null===t&&(t=j(),null===t&&(t=H(),null===t&&(t=P(),null===t&&(t=A(),null===t&&(t=k(),null===t&&(t=T(),null===t&&(t=D(),null===t&&(t=W(),null===t&&(t=I(),null===t&&(t=$(),null===t&&(t=Z(),null===t&&(t=G())))))))))))))))))))))))))))))))));else e=null;return e},sequence:i,sequence_post_enclosed:a,sequence_post:o,range:r,b:l,b_range:h,bc:u,bc_comma:c,bc_title:d,bcv:p,bcv_weak:f,bcv_comma:g,bcv_hyphen_range:m,bv:b,cb:v,cb_range:x,cbv:y,cb_ordinal:w,cbv_ordinal:C,c_psalm:_,cv_psalm:S,c_title:P,cv:k,cv_weak:T,c:I,ff:R,integer_title:A,ps151_b:E,ps151_bc:N,ps151_bcv:M,v_letter:D,v:$,c_explicit:B,v_explicit:O,cv_sep:z,cv_sep_weak:L,sequence_sep:H,range_sep:V,title:F,in_book_of:J,abbrev:K,translation_sequence_enclosed:U,translation_sequence:j,translation:q,integer:W,any_integer:Y,word:Z,word_parenthesis:G,sp:X,space:Q};if(void 0!==n){if(void 0===nt[n])throw Error("Invalid rule name: "+e(n)+".")}else n="start";var st=0,it=0,at=0,ot=[],nt=nt[n]();if(null===nt||st!==t.length){var nt=Math.max(st,at),rt=t.length>nt?t.charAt(nt):null,lt=tt();
throw new this.SyntaxError(et(ot),rt,nt,lt.line,lt.column)}return nt},toSource:function(){return this._source},SyntaxError:function(t,n,s,i,a){switch(this.name="SyntaxError",this.expected=t,this.found=n,t.length){case 0:t="end of input";break;case 1:t=t[0];break;default:t=t.slice(0,t.length-1).join(", ")+" or "+t[t.length-1]}n=n?e(n):"end of input",this.message="Expected "+t+" but "+n+" found.",this.offset=s,this.line=i,this.column=a}};return t.SyntaxError.prototype=Error.prototype,t}()}.call(this),define("bcv",function(e){return function(){var t,n;return n=function(){return new this.bcv_parser},t=n.apply(e,arguments),t||e.bcv_parser}}(this)),define("verseKey",["bcv","versificationMgr"],function(e,t){function n(n,s){var i={};i.osisRef=e.parse(n).osis(),""===i.osisRef&&(i.osisRef="Matt.1");var a=i.osisRef.split("-")[0].split(".");return i.book=a[0],i.chapter=isNaN(parseInt(a[1],10))?1:parseInt(a[1],10),i.verse=parseInt(a[2],10),i.bookNum=t.getBookNum(i.book,s),i}function s(e,s){var i=[],a=e;if("string"==typeof e&&(a=n(e)),-1!==a.osisRef.search("-")){var o=a.osisRef.split("-"),r=(o[0].split("."),o[1].split("."));if(!isNaN(a.verse)&&3===r.length)for(var l=a.verse;parseInt(r[2],10)+1>l;l++)i.push({osis:a.book+"."+a.chapter+"."+l,book:a.book,bookNum:h,chapter:a.chapter,verse:l})}else if(isNaN(a.verse))for(var h=t.getBookNum(a.book),u=t.getVersesInChapter(h,a.chapter,s),c=0;u>c;c++)i.push({osis:a.book+"."+a.chapter+"."+(c+1),book:a.book,bookNum:h,chapter:a.chapter,verse:c+1});else i.push(a);return i}function i(e,s){var i=n(e,s),a=t.getChapterMax(i.bookNum,s);return a>i.chapter?i.chapter++:(i.bookNum=65>i.bookNum?++i.bookNum:65,i.chapter=65>i.bookNum?1:a,i.book=t.getBook(i.bookNum,s).abbrev),i.osisRef=i.book+"."+i.chapter,i}function a(e,s){var i=n(e,s),a=t.getChapterMax(i.bookNum-1,s);return i.chapter>1?--i.chapter:(i.chapter=0===i.bookNum?1:a,i.bookNum=i.bookNum>0?--i.bookNum:0,i.book=t.getBook(i.bookNum,s).abbrev),i.osisRef=i.book+"."+i.chapter,i}return{parse:n,parseVerseList:s,next:i,previous:a}}),function(e){function t(n,i){if(!(this instanceof t))return new t(n,i);var a=this;s(a),a.q=a.c="",a.bufferCheckPosition=e.MAX_BUFFER_LENGTH,a.opt=i||{},a.opt.lowercase=a.opt.lowercase||a.opt.lowercasetags,a.looseCase=a.opt.lowercase?"toLowerCase":"toUpperCase",a.tags=[],a.closed=a.closedRoot=a.sawRoot=!1,a.tag=a.error=null,a.strict=!!n,a.noscript=!!n||!!a.opt.noscript,a.state=F.BEGIN,a.ENTITIES=Object.create(e.ENTITIES),a.attribList=[],a.opt.xmlns&&(a.ns=Object.create(L)),a.trackPosition=a.opt.position!==!1,a.trackPosition&&(a.position=a.line=a.column=0),c(a,"onready")}function n(t){for(var n=Math.max(e.MAX_BUFFER_LENGTH,10),s=0,i=0,a=P.length;a>i;i++){var o=t[P[i]].length;if(o>n)switch(P[i]){case"textNode":p(t);break;case"cdata":d(t,"oncdata",t.cdata),t.cdata="";break;case"script":d(t,"onscript",t.script),t.script="";break;default:g(t,"Max buffer length exceeded: "+P[i])}s=Math.max(s,o)}t.bufferCheckPosition=e.MAX_BUFFER_LENGTH-s+t.position}function s(e){for(var t=0,n=P.length;n>t;t++)e[P[t]]=""}function i(e){p(e),""!==e.cdata&&(d(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(d(e,"onscript",e.script),e.script="")}function a(e,t){return new o(e,t)}function o(e,n){if(!(this instanceof o))return new o(e,n);k.apply(this),this._parser=new t(e,n),this.writable=!0,this.readable=!0;var s=this;this._parser.onend=function(){s.emit("end")},this._parser.onerror=function(e){s.emit("error",e),s._parser.error=null},this._decoder=null,I.forEach(function(e){Object.defineProperty(s,"on"+e,{get:function(){return s._parser["on"+e]},set:function(t){return t?(s.on(e,t),void 0):(s.removeAllListeners(e),s._parser["on"+e]=t)},enumerable:!0,configurable:!1})})}function r(e){return e.split("").reduce(function(e,t){return e[t]=!0,e},{})}function l(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function h(e,t){return l(e)?!!t.match(e):e[t]}function u(e,t){return!h(e,t)}function c(e,t,n){e[t]&&e[t](n)}function d(e,t,n){e.textNode&&p(e),c(e,t,n)}function p(e){e.textNode=f(e.opt,e.textNode),e.textNode&&c(e,"ontext",e.textNode),e.textNode=""}function f(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function g(e,t){return p(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=Error(t),e.error=t,c(e,"onerror",t),e}function m(e){return e.closedRoot||b(e,"Unclosed root tag"),e.state!==F.BEGIN&&e.state!==F.TEXT&&g(e,"Unexpected end"),p(e),e.c="",e.closed=!0,c(e,"onend"),t.call(e,e.strict,e.opt),e}function b(e,n){if(!("object"==typeof e&&e instanceof t))throw Error("bad call to strictFail");e.strict&&g(e,n)}function v(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0}function x(e,t){var n=e.indexOf(":"),s=0>n?["",e]:e.split(":"),i=s[0],a=s[1];return t&&"xmlns"===e&&(i="xmlns",a=""),{prefix:i,local:a}}function y(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))return e.attribName=e.attribValue="";if(e.opt.xmlns){var t=x(e.attribName,!0),n=t.prefix,s=t.local;if("xmlns"===n)if("xml"===s&&e.attribValue!==O)b(e,"xml: prefix must be bound to "+O+"\n"+"Actual: "+e.attribValue);else if("xmlns"===s&&e.attribValue!==z)b(e,"xmlns: prefix must be bound to "+z+"\n"+"Actual: "+e.attribValue);else{var i=e.tag,a=e.tags[e.tags.length-1]||e;i.ns===a.ns&&(i.ns=Object.create(a.ns)),i.ns[s]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,d(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}function w(e,t){if(e.opt.xmlns){var n=e.tag,s=x(e.tagName);n.prefix=s.prefix,n.local=s.local,n.uri=n.ns[s.prefix]||"",n.prefix&&!n.uri&&(b(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=s.prefix);var i=e.tags[e.tags.length-1]||e;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach(function(t){d(e,"onopennamespace",{prefix:t,uri:n.ns[t]})});for(var a=0,o=e.attribList.length;o>a;a++){var r=e.attribList[a],l=r[0],h=r[1],u=x(l,!0),c=u.prefix,p=u.local,f=""==c?"":n.ns[c]||"",g={name:l,value:h,prefix:c,local:p,uri:f};c&&"xmlns"!=c&&!f&&(b(e,"Unbound namespace prefix: "+JSON.stringify(c)),g.uri=c),e.tag.attributes[l]=g,d(e,"onattribute",g)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),d(e,"onopentag",e.tag),t||(e.state=e.noscript||"script"!==e.tagName.toLowerCase()?F.TEXT:F.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function C(e){if(!e.tagName)return b(e,"Weird empty close tag."),e.textNode+="</>",e.state=F.TEXT,void 0;if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",e.state=F.SCRIPT,void 0;d(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var s=n;t--;){var i=e.tags[t];if(i.name===s)break;b(e,"Unexpected close tag")}if(0>t)return b(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",e.state=F.TEXT,void 0;e.tagName=n;for(var a=e.tags.length;a-->t;){var o=e.tag=e.tags.pop();e.tagName=e.tag.name,d(e,"onclosetag",e.tagName);var r={};for(var l in o.ns)r[l]=o.ns[l];var h=e.tags[e.tags.length-1]||e;e.opt.xmlns&&o.ns!==h.ns&&Object.keys(o.ns).forEach(function(t){var n=o.ns[t];d(e,"onclosenamespace",{prefix:t,uri:n})})}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=F.TEXT}function _(e){var t,n=e.entity,s=n.toLowerCase(),i="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[s]?e.ENTITIES[s]:(n=s,"#"===n.charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),t=parseInt(n,16),i=t.toString(16)):(n=n.slice(1),t=parseInt(n,10),i=t.toString(10))),n=n.replace(/^0+/,""),i.toLowerCase()!==n?(b(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function S(e){var t=this;if(this.error)throw this.error;if(t.closed)return g(t,"Cannot write after close. Assign an onready handler.");if(null===e)return m(t);for(var s=0,i="";t.c=i=e.charAt(s++);)switch(t.trackPosition&&(t.position++,"\n"===i?(t.line++,t.column=0):t.column++),t.state){case F.BEGIN:"<"===i?(t.state=F.OPEN_WAKA,t.startTagPosition=t.position):u(R,i)&&(b(t,"Non-whitespace before first tag."),t.textNode=i,t.state=F.TEXT);continue;case F.TEXT:if(t.sawRoot&&!t.closedRoot){for(var a=s-1;i&&"<"!==i&&"&"!==i;)i=e.charAt(s++),i&&t.trackPosition&&(t.position++,"\n"===i?(t.line++,t.column=0):t.column++);t.textNode+=e.substring(a,s-1)}"<"===i?(t.state=F.OPEN_WAKA,t.startTagPosition=t.position):(u(R,i)&&(!t.sawRoot||t.closedRoot)&&b(t,"Text data outside of root node."),"&"===i?t.state=F.TEXT_ENTITY:t.textNode+=i);continue;case F.SCRIPT:"<"===i?t.state=F.SCRIPT_ENDING:t.script+=i;continue;case F.SCRIPT_ENDING:"/"===i?t.state=F.CLOSE_TAG:(t.script+="<"+i,t.state=F.SCRIPT);continue;case F.OPEN_WAKA:if("!"===i)t.state=F.SGML_DECL,t.sgmlDecl="";else if(!h(R,i))if(h(H,i))t.state=F.OPEN_TAG,t.tagName=i;else if("/"===i)t.state=F.CLOSE_TAG,t.tagName="";else if("?"===i)t.state=F.PROC_INST,t.procInstName=t.procInstBody="";else{if(b(t,"Unencoded <"),t.startTagPosition+1<t.position){var o=t.position-t.startTagPosition;i=Array(o).join(" ")+i}t.textNode+="<"+i,t.state=F.TEXT}continue;case F.SGML_DECL:(t.sgmlDecl+i).toUpperCase()===$?(d(t,"onopencdata"),t.state=F.CDATA,t.sgmlDecl="",t.cdata=""):"--"===t.sgmlDecl+i?(t.state=F.COMMENT,t.comment="",t.sgmlDecl=""):(t.sgmlDecl+i).toUpperCase()===B?(t.state=F.DOCTYPE,(t.doctype||t.sawRoot)&&b(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):">"===i?(d(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=F.TEXT):h(N,i)?(t.state=F.SGML_DECL_QUOTED,t.sgmlDecl+=i):t.sgmlDecl+=i;continue;case F.SGML_DECL_QUOTED:i===t.q&&(t.state=F.SGML_DECL,t.q=""),t.sgmlDecl+=i;continue;case F.DOCTYPE:">"===i?(t.state=F.TEXT,d(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=i,"["===i?t.state=F.DOCTYPE_DTD:h(N,i)&&(t.state=F.DOCTYPE_QUOTED,t.q=i));continue;case F.DOCTYPE_QUOTED:t.doctype+=i,i===t.q&&(t.q="",t.state=F.DOCTYPE);continue;case F.DOCTYPE_DTD:t.doctype+=i,"]"===i?t.state=F.DOCTYPE:h(N,i)&&(t.state=F.DOCTYPE_DTD_QUOTED,t.q=i);continue;case F.DOCTYPE_DTD_QUOTED:t.doctype+=i,i===t.q&&(t.state=F.DOCTYPE_DTD,t.q="");continue;case F.COMMENT:"-"===i?t.state=F.COMMENT_ENDING:t.comment+=i;continue;case F.COMMENT_ENDING:"-"===i?(t.state=F.COMMENT_ENDED,t.comment=f(t.opt,t.comment),t.comment&&d(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+i,t.state=F.COMMENT);continue;case F.COMMENT_ENDED:">"!==i?(b(t,"Malformed comment"),t.comment+="--"+i,t.state=F.COMMENT):t.state=F.TEXT;continue;case F.CDATA:"]"===i?t.state=F.CDATA_ENDING:t.cdata+=i;continue;case F.CDATA_ENDING:"]"===i?t.state=F.CDATA_ENDING_2:(t.cdata+="]"+i,t.state=F.CDATA);continue;case F.CDATA_ENDING_2:">"===i?(t.cdata&&d(t,"oncdata",t.cdata),d(t,"onclosecdata"),t.cdata="",t.state=F.TEXT):"]"===i?t.cdata+="]":(t.cdata+="]]"+i,t.state=F.CDATA);continue;case F.PROC_INST:"?"===i?t.state=F.PROC_INST_ENDING:h(R,i)?t.state=F.PROC_INST_BODY:t.procInstName+=i;continue;case F.PROC_INST_BODY:if(!t.procInstBody&&h(R,i))continue;"?"===i?t.state=F.PROC_INST_ENDING:t.procInstBody+=i;continue;case F.PROC_INST_ENDING:">"===i?(d(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=F.TEXT):(t.procInstBody+="?"+i,t.state=F.PROC_INST_BODY);continue;case F.OPEN_TAG:h(V,i)?t.tagName+=i:(v(t),">"===i?w(t):"/"===i?t.state=F.OPEN_TAG_SLASH:(u(R,i)&&b(t,"Invalid character in tag name"),t.state=F.ATTRIB));continue;case F.OPEN_TAG_SLASH:">"===i?(w(t,!0),C(t)):(b(t,"Forward-slash in opening tag not followed by >"),t.state=F.ATTRIB);continue;case F.ATTRIB:if(h(R,i))continue;">"===i?w(t):"/"===i?t.state=F.OPEN_TAG_SLASH:h(H,i)?(t.attribName=i,t.attribValue="",t.state=F.ATTRIB_NAME):b(t,"Invalid attribute name");continue;case F.ATTRIB_NAME:"="===i?t.state=F.ATTRIB_VALUE:">"===i?(b(t,"Attribute without value"),t.attribValue=t.attribName,y(t),w(t)):h(R,i)?t.state=F.ATTRIB_NAME_SAW_WHITE:h(V,i)?t.attribName+=i:b(t,"Invalid attribute name");continue;case F.ATTRIB_NAME_SAW_WHITE:if("="===i)t.state=F.ATTRIB_VALUE;else{if(h(R,i))continue;b(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",d(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",">"===i?w(t):h(H,i)?(t.attribName=i,t.state=F.ATTRIB_NAME):(b(t,"Invalid attribute name"),t.state=F.ATTRIB)}continue;case F.ATTRIB_VALUE:if(h(R,i))continue;h(N,i)?(t.q=i,t.state=F.ATTRIB_VALUE_QUOTED):(b(t,"Unquoted attribute value"),t.state=F.ATTRIB_VALUE_UNQUOTED,t.attribValue=i);continue;case F.ATTRIB_VALUE_QUOTED:if(i!==t.q){"&"===i?t.state=F.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=i;continue}y(t),t.q="",t.state=F.ATTRIB_VALUE_CLOSED;continue;case F.ATTRIB_VALUE_CLOSED:h(R,i)?t.state=F.ATTRIB:">"===i?w(t):"/"===i?t.state=F.OPEN_TAG_SLASH:h(H,i)?(b(t,"No whitespace between attributes"),t.attribName=i,t.attribValue="",t.state=F.ATTRIB_NAME):b(t,"Invalid attribute name");continue;case F.ATTRIB_VALUE_UNQUOTED:if(u(D,i)){"&"===i?t.state=F.ATTRIB_VALUE_ENTITY_U:t.attribValue+=i;continue}y(t),">"===i?w(t):t.state=F.ATTRIB;continue;case F.CLOSE_TAG:if(t.tagName)">"===i?C(t):h(V,i)?t.tagName+=i:t.script?(t.script+="</"+t.tagName,t.tagName="",t.state=F.SCRIPT):(u(R,i)&&b(t,"Invalid tagname in closing tag"),t.state=F.CLOSE_TAG_SAW_WHITE);else{if(h(R,i))continue;u(H,i)?t.script?(t.script+="</"+i,t.state=F.SCRIPT):b(t,"Invalid tagname in closing tag."):t.tagName=i}continue;case F.CLOSE_TAG_SAW_WHITE:if(h(R,i))continue;">"===i?C(t):b(t,"Invalid characters in closing tag");continue;case F.TEXT_ENTITY:case F.ATTRIB_VALUE_ENTITY_Q:case F.ATTRIB_VALUE_ENTITY_U:switch(t.state){case F.TEXT_ENTITY:var r=F.TEXT,l="textNode";break;case F.ATTRIB_VALUE_ENTITY_Q:var r=F.ATTRIB_VALUE_QUOTED,l="attribValue";break;case F.ATTRIB_VALUE_ENTITY_U:var r=F.ATTRIB_VALUE_UNQUOTED,l="attribValue"}";"===i?(t[l]+=_(t),t.entity="",t.state=r):h(M,i)?t.entity+=i:(b(t,"Invalid character entity"),t[l]+="&"+t.entity+i,t.entity="",t.state=r);continue;default:throw Error(t,"Unknown state: "+t.state)}return t.position>=t.bufferCheckPosition&&n(t),t}e.parser=function(e,n){return new t(e,n)},e.SAXParser=t,e.SAXStream=o,e.createStream=a,e.MAX_BUFFER_LENGTH=65536;var P=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){this.__proto__=e}return t.prototype=e,new t}),Object.getPrototypeOf||(Object.getPrototypeOf=function(e){return e.__proto__}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),t.prototype={end:function(){m(this)},write:S,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){i(this)}};try{var k=require("stream").Stream}catch(T){var k=function(){}}var I=e.EVENTS.filter(function(e){return"error"!==e&&"end"!==e});o.prototype=Object.create(k.prototype,{constructor:{value:o}}),o.prototype.write=function(e){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(e)){if(!this._decoder){var t=require("string_decoder").StringDecoder;this._decoder=new t("utf8")}e=this._decoder.write(e)}return this._parser.write(""+e),this.emit("data",e),!0},o.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},o.prototype.on=function(e,t){var n=this;return!n._parser["on"+e]&&-1!==I.indexOf(e)&&(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),k.prototype.on.call(n,e,t)};var R="\r\n	 ",A="0124356789",E="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",N="'\"",M=A+E+"#",D=R+">",$="[CDATA[",B="DOCTYPE",O="http://www.w3.org/XML/1998/namespace",z="http://www.w3.org/2000/xmlns/",L={xml:O,xmlns:z};R=r(R),A=r(A),E=r(E);var H=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,V=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;N=r(N),M=r(M),D=r(D);var F=0;e.STATE={BEGIN:F++,TEXT:F++,TEXT_ENTITY:F++,OPEN_WAKA:F++,SGML_DECL:F++,SGML_DECL_QUOTED:F++,DOCTYPE:F++,DOCTYPE_QUOTED:F++,DOCTYPE_DTD:F++,DOCTYPE_DTD_QUOTED:F++,COMMENT_STARTING:F++,COMMENT:F++,COMMENT_ENDING:F++,COMMENT_ENDED:F++,CDATA:F++,CDATA_ENDING:F++,CDATA_ENDING_2:F++,PROC_INST:F++,PROC_INST_BODY:F++,PROC_INST_ENDING:F++,OPEN_TAG:F++,OPEN_TAG_SLASH:F++,ATTRIB:F++,ATTRIB_NAME:F++,ATTRIB_NAME_SAW_WHITE:F++,ATTRIB_VALUE:F++,ATTRIB_VALUE_QUOTED:F++,ATTRIB_VALUE_CLOSED:F++,ATTRIB_VALUE_UNQUOTED:F++,ATTRIB_VALUE_ENTITY_Q:F++,ATTRIB_VALUE_ENTITY_U:F++,CLOSE_TAG:F++,CLOSE_TAG_SAW_WHITE:F++,SCRIPT:F++,SCRIPT_ENDING:F++},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(t){var n=e.ENTITIES[t],s="number"==typeof n?String.fromCharCode(n):n;e.ENTITIES[t]=s});for(var F in e.STATE)e.STATE[e.STATE[F]]=F;F=e.STATE,String.fromCodePoint||function(){var e=String.fromCharCode,t=Math.floor,n=function(){var n,s,i=16384,a=[],o=-1,r=arguments.length;if(!r)return"";for(var l="";r>++o;){var h=Number(arguments[o]);if(!isFinite(h)||0>h||h>1114111||t(h)!=h)throw RangeError("Invalid code point: "+h);65535>=h?a.push(h):(h-=65536,n=(h>>10)+55296,s=h%1024+56320,a.push(n,s)),(o+1==r||a.length>i)&&(l+=e.apply(null,a),a.length=0)}return l};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:n,configurable:!0,writable:!0}):String.fromCodePoint=n}()}("undefined"==typeof exports?sax={}:exports),define("sax",function(e){return function(){var t;return t||e.sax}}(this)),define("filters/osis",["sax","bcv"],function(e,t){function n(e,t){var n="";if("crossReference"===u.attributes.type&&t.crossReferences)if("reference"!==l)n+=s(e);else{var a=c?c.attributes.osisRef:u.attributes.osisRef;n+='<a href="?type=crossReference&osisRef='+a+"&n="+u.attributes.n+'">'+e+"</a>"}else if(t.footnotes&&"crossReference"!==u.attributes.type){"hi"===l&&(e=i(h,e)),x=u.attributes.osisRef||u.attributes.annotateRef||p.osisRef;var o=u.attributes.n||C;y.hasOwnProperty(x)?y[x][y[x].length-1].n===o?y[x][y[x].length-1].note+=e:y[x].push({note:e,n:o}):y[x]=[{note:e,n:o}]}return n}function s(e){var n="",s=t.parse(e).osis();if(""!==s&&c){var i=c.attributes.n||u.attributes.n;n+='<a href="?type=crossReference&osisRef='+s+"&n="+i+'">'+e+"</a>"}else n+=e;return n}function i(e,t){switch(e.attributes.type){case"italic":t="<i>"+t+"</i>";break;case"bold":t="<b>"+t+"</b>";break;case"line-through":t="<s>"+t+"</s>";break;case"underline":t="<u>"+t+"</u>";break;case"sub":t="<sub>"+t+"</sub>";break;case"super":t="<sup>"+t+"</sup>"}return t}var a={},o=e.parser(!0),r={headings:!1,footnotes:!1,crossReferences:!1,strongsNumbers:!1,wordsOfChristInRed:!1,oneVersePerLine:!1,array:!1},l="",h=null,u=null,c=null,d=null,p=null,f="",g="",m="",b=[],v="",x="",y={},w=!1,C=0;return a.processText=function(e,t,s){s&&s!=={}?(s.headings=s.headings?s.headings:r.headings,s.footnotes=s.footnotes?s.footnotes:r.footnotes,s.crossReferences=s.crossReferences?s.crossReferences:r.crossReferences,s.strongsNumbers=s.strongsNumbers?s.strongsNumbers:r.strongsNumbers,s.wordsOfChristInRed=s.wordsOfChristInRed?s.wordsOfChristInRed:r.wordsOfChristInRed,s.oneVersePerLine=s.oneVersePerLine?s.oneVersePerLine:r.oneVersePerLine,s.array=s.array?s.array:r.array):s=r,l="",h=null,u=null,c=null,d=null,p=null,f="",g="",m="",b=[],v="",x="",y={},w=!1,C=0,o.onerror=function(){o.resume()},o.ontext=function(e){if(u)g+=n(e,s);else if(d)g+="Jesus"===d.attributes.who&&s.wordsOfChristInRed?"<span style='color: red'><span class='sword-woc'>"+e+" </span></span>":e;else if(h)switch(h.name){case"title":s.headings&&(g="section"===h.attributes.type?"<h3>"+e+"</h3>"+g:"<h1>"+e+"</h1>"+g);break;case"hi":g+=i(h,e);break;default:g+=e}else g+=e},o.onopentag=function(e){switch(h=e,l=e.name,e.name){case"xml":p={osisRef:e.attributes.osisRef,verseNum:e.attributes.verseNum},g+=0===parseInt(p.verseNum,10)?"RtoL"===t?"<span dir='rtl'><div class='sword-intro'>":"<span class='sword-intro'>":"RtoL"===t?"<span dir='rtl'><a href=\"?type=verseNum&osisRef="+p.osisRef+"\" class='verse-number'> "+p.verseNum+" </a></span><span dir='rtl'>":'<a href="?type=verseNum&osisRef='+p.osisRef+"\" class='verse-number'> "+p.verseNum+" </a>";break;case"note":if("crossReference"===e.attributes.type&&s.crossReferences)g+="<span class='sword-cross-reference'>[";else if(s.footnotes&&"crossReference"!==e.attributes.type){x=e.attributes.osisRef||e.attributes.annotateRef||p.osisRef,e.attributes.n||C++;var n=e.attributes.n||C;g+="<a class='sword-footnote' href=\"?type=footnote&osisRef="+x+"&n="+n+'"><sup>'+"*n"+n+"</sup></a>"}u=e;break;case"reference":c=e;break;case"q":e.isSelfClosing||(d=e);break;case"div":e.isSelfClosing&&"paragraph"===e.attributes.type&&e.attributes.sID&&(g+="<p>"),e.isSelfClosing&&"paragraph"===e.attributes.type&&e.attributes.eID&&(g+="</p>");break;case"l":e.isSelfClosing&&"x-br"===e.attributes.type&&(g+="<br>")}},o.onclosetag=function(e){switch(e){case"title":h=null;break;case"note":"crossReference"===u.attributes.type&&s.crossReferences&&(g+="]</span> "),f="",u=null;break;case"reference":c=null;break;case"q":break;case"xml":0===parseInt(p.verseNum,10)&&(g+="</div>"),"RtoL"===t&&(g+="</span>")}l="",h=null},o.onattribute=function(){},o.onend=function(){};for(var a="",_=0;e.length>_;_++)a="<xml osisRef='"+e[_].osis+"' verseNum = '"+e[_].verse+"'>"+e[_].text+"</xml>",o.write(a),o.close(),s.array?b.push({text:s.oneVersePerLine?"<div class='verse' id = '"+e[_].osis+"'>"+g+"</div>":"<span class='verse' id = '"+e[_].osis+"'>"+g+"</span>",osisRef:e[_].osis}):m+=s.oneVersePerLine?"<div class='verse' id = '"+e[_].osis+"'>"+g+"</div>":"<span class='verse' id = '"+e[_].osis+"'>"+g+"</span>",g="";return"RtoL"===t&&(m="<div style='text-align: right;'>"+m+"</div>"),s.array?{verses:b,footnotes:y,rtol:"RtoL"===t?!0:!1}:{text:m,footnotes:y}},a}),define("filters/plain",[],function(){var e={},t={oneVersePerLine:!1,array:!1};return e.processText=function(e,n,s){var i="",a=[];s&&s!=={}?(s.oneVersePerLine=s.oneVersePerLine?s.oneVersePerLine:t.oneVersePerLine,s.array=s.array?s.array:t.array):s=t;for(var o=0;e.length>o;o++)outText="RtoL"!==n?'<a href="?type=verseNum&osisRef='+e[o].osis+"\" class='verse-number'> "+e[o].verse+" </a>":"<span dir='rtl'><a href=\"?type=verseNum&osisRef="+e[o].osis+"\" class='verse-number'> "+e[o].verse+" </a></span>",outText+="RtoL"!==n?e[o].text:"<span dir='rtl'>"+e[o].text+"</span>",s.array?a.push({text:s.oneVersePerLine?"<div class='verse' id = '"+e[o].osis+"'>"+outText+"</div>":"<span class='verse' id = '"+e[o].osis+"'>"+outText+"</span>",osisRef:e[o].osis}):i+=s.oneVersePerLine?"<div class='verse' id = '"+e[o].osis+"'>"+outText+"</div>":"<span class='verse' id = '"+e[o].osis+"'>"+outText+"</span>",outText="";return"RtoL"===n&&(i="<div style='text-align: right;'>"+i+"</div>"),s.array?{verses:a,rtol:"RtoL"===n?!0:!1}:{text:i}},e}),define("filterMgr",["filters/osis","filters/plain"],function(e,t){function n(n,s,i,a){return s&&"osis"===s.toLowerCase()?e.processText(n,i,a):t.processText(n,i,a)}return{processText:n}}),define("swmodule",["has","dataMgr","verseKey","zText","filterMgr","versificationMgr"],function(e,t,n,s,i,a){function o(e,t,n){if(!(this instanceof o))throw new TypeError("Module constructor cannot be called as a function.");this.modKey=e,this.language=n.language,this.id=t,this.config=n}function r(e,n){t.getBlob(e,n)}return o.create=function(e,t,n){return new o(e,t,n)},o.prototype={constructor:o,self:this,renderText:function(e,a,o){var l=null,h=null,u=this;"function"==typeof a&&(o=a);var c=n.parseVerseList(e,this.config.Versification);0!==c.length&&""!==c[0].osisRef?t.get(u.config.bcvPosID,function(e,t){e?o(e):(t.nt&&t.nt.hasOwnProperty(c[0].book)?(l=t.nt[c[0].book],h=u.config.nt):t.ot&&t.ot.hasOwnProperty(c[0].book)&&(l=t.ot[c[0].book],h=u.config.ot),null===l?o({message:"The requested chapter is not available in this module."}):r(h,function(e,t){e?o(e):s.getRawEntry(t,l,c,u.config.Encoding,a.intro?a.intro:!1,function(e,t){if(e)o(e);else{var n=i.processText(t,u.config.SourceType,u.config.Direction,a);o(null,n)}})}))}):o({message:"Wrong passage. The requested chapter is not available in this module."})},getAllBooks:function(e){a.getAllBooks(this.config.bcvPosID,this.config.Versification,function(t,n){e(t,n)})},getVersesInChapter:function(e){return a.getVersesInChapter(a.getBookNum(e.split(".")[0],this.config.Versification),e.split(".")[1],this.config.Versification)}},o}),define("moduleMgr",["dataMgr","swmodule"],function(e,t){var n={};return n.getModules=function(n){var s=[];e.getModules(function(e,i){e?n(e):(i.forEach(function(e){s.push(new t(e.moduleKey,e.id,{id:e.id,Versification:e.Versification,Encoding:e.Encoding,Direction:e.Direction,SourceType:e.SourceType,bcvPosID:e.bcvPosID,description:e.Description,language:e.Lang,ot:e.ot,nt:e.nt,moduleKey:e.moduleKey}))}),n(null,s))})},n.getModule=function(n,s){e.get(n,function(e,i){e?s(null):s(null,new t(i.moduleKey,n,i))})},n}),define("config",[],function(){var e={};return e.version="0.3",e.workerPath="lib/sword",e.setWorkerPath=function(t){e.workerPath=t},e}),require.config({paths:{text:"libs/text/text",json:"libs/json/src/json",async:"libs/async/lib/async",bcv:"libs/bible-reference-parser/js/en_bcv_parser.min",unzip:"libs/zlib/bin/unzip.min",inflateStream:"libs/zlib/bin/inflate_stream.min",sax:"libs/sax/lib/sax",idb:"libs/IDBWrapper/idbstore.min",has:"libs/has/has"},shim:{bcv:{exports:"bcv_parser",init:function(){return new this.bcv_parser}},unzip:{exports:"Zlib"},inflateStream:{exports:"Zlib"},sax:{exports:"sax"}}}),define("sword",["installMgr","moduleMgr","dataMgr","versificationMgr","verseKey","config"],function(e,t,n,s,i,a){var o={};return o.installMgr=e,o.moduleMgr=t,o.versificationMgr=s,o.dataMgr=n,o.verseKey=i,o.config=a,o.isSupported=function(){var e={}.toString,t=[],n="[object Function]";return window.FileReader&&e.call(t.forEach)==n?!0:!1},o}),define("worker",["has","config"],function(e,t){function n(e,t,n,s,a,r){i.getRawEntry=r,o.postMessage({cmd:"getRawEntry",blob:e,bcvPos:t,vList:n,encoding:s,intro:a})}function s(e,t,n,s,a){i.processText=a,o.postMessage({cmd:"processText",raw:e,source:t,direction:n,options:s})}var i={},a="";a=t.workerPath+"/swordWorker.min.js";var o=new Worker(a);return o.addEventListener("message",function(e){var t=e.data.cmd,n=e.data.result;return t&&i[t]?(i[t](null,n),delete i[t]):console.log(e.data),!0},!1),o.addEventListener("error",function(e){return console.log("ERROR: ",e),!0},!1),{getRawEntry:n,processText:s}}),require("sword")});

// source/api.js
var api={isInitialized:!1,db:null,isBmInitialized:!1,bmStore:null,isNoteInitialized:!1,noteStore:null,isHlInitialized:!1,hlStore:null,store:sword.dataMgr.getIDBWrapper(),wrapper:function(e){if(this.isInitialized)e&&e(null,this.db);else{var t=this;this.db=new this.store({storeName:"biblez",dbVersion:5,indexes:[{name:"osisRef",keyPath:"osisRef",unique:!0}],onStoreReady:function(){t.isInitialized=!0,e&&e(null,t.db)},onError:function(n){t.isInitialized=!1,e&&e(n)}})}},bmWrapper:function(e){if(this.isBmInitialized)e&&e(null,this.bmStore);else{var t=this;this.bmStore=new this.store({storeName:"bookmarks",keyPath:"id",autoIncrement:!0,dbVersion:2,indexes:[{name:"osisRef",keyPath:"osisRef",unique:!0}],onStoreReady:function(){t.isBmInitialized=!0,e&&e(null,t.bmStore)},onError:function(n){t.isBmInitialized=!1,e&&e(n)}})}},hlWrapper:function(e){if(this.isHlInitialized)e&&e(null,this.hlStore);else{var t=this;this.hlStore=new this.store({storeName:"highlights",keyPath:"id",autoIncrement:!0,dbVersion:2,indexes:[{name:"osisRef",keyPath:"osisRef",unique:!0}],onStoreReady:function(){t.isHlInitialized=!0,e&&e(null,t.hlStore)},onError:function(n){t.isHlInitialized=!1,e&&e(n)}})}},noteWrapper:function(e){if(this.isNoteInitialized)e&&e(null,this.noteStore);else{var t=this;this.noteStore=new this.store({storeName:"notes",keyPath:"id",autoIncrement:!0,dbVersion:2,indexes:[{name:"osisRef",keyPath:"osisRef",unique:!0}],onStoreReady:function(){t.isNoteInitialized=!0,e&&e(null,t.noteStore)},onError:function(n){t.isNoteInitialized=!1,e&&e(n)}})}},_put:function(e,t,n){e.put(t,function(e){n&&n(null,e)},function(e){n&&n(e)})},put:function(e,t){this.wrapper(enyo.bind(this,function(n,s){n?t&&t(n):this._put(s,e,t)}))},putBookmark:function(e,t){this.bmWrapper(enyo.bind(this,function(n,s){n?t&&t(n):this._put(s,e,enyo.bind(this,function(n,s){n?t&&t(n):this.get(e.osisRef,enyo.bind(this,function(n,i){n?t&&t(n):(void 0===i&&(i={id:e.osisRef}),i.bookmarkId=s,this.put(i,t))}))}))}))},putHighlight:function(e,t){this.hlWrapper(enyo.bind(this,function(n,s){n?t&&t(n):this._put(s,e,enyo.bind(this,function(n,s){n?t&&t(n):this.get(e.osisRef,enyo.bind(this,function(n,i){n?t&&t(n):(void 0===i&&(i={id:e.osisRef}),i.highlightId=s,this.put(i,t))}))}))}))},putNote:function(e,t){this.noteWrapper(enyo.bind(this,function(n,s){n?t&&t(n):e.id?this.getNote(e.id,enyo.bind(this,function(n,i){n?t&&t(n):(i.text=e.text,this._put(s,i,t))})):(delete e.id,this._put(s,e,enyo.bind(this,function(n,s){n?t&&t(n):this.get(e.osisRef,enyo.bind(this,function(n,i){n?t&&t(n):(void 0===i&&(i={id:e.osisRef}),i.noteId=s,this.put(i,t))}))})))}))},_get:function(e,t,n){e.get(t,function(e){n&&n(null,e)},function(e){console.log(e),n&&n(e)})},_getBatch:function(e,t,n){e.getBatch(t,function(e){n&&n(null,e)},function(e){n&&n(e)})},_getAll:function(e,t){e.getAll(function(e){t&&t(null,e)},function(e){t&&t(e)})},_query:function(e,t,n){e.query(function(e){n&&n(null,e)},t)},get:function(e,t){this.wrapper(enyo.bind(this,function(n,s){n?t&&t(n):this._get(s,e,t)}))},getAll:function(e){this.wrapper(enyo.bind(this,function(t,n){t?e&&e(t):this._getAll(n,e)}))},getBatch:function(e,t){this.wrapper(enyo.bind(this,function(n,s){n?t&&t(n):this._getBatch(s,e,t)}))},getBookmark:function(e,t){this.bmWrapper(enyo.bind(this,function(n,s){n?t&&t(n):this._get(s,e,t)}))},getAllBookmarks:function(e){this.bmWrapper(enyo.bind(this,function(t,n){t?e&&e(t):this._query(n,{index:"osisRef"},e)}))},getHighlights:function(e,t){this.hlWrapper(enyo.bind(this,function(n,s){n?t&&t(n):this._getBatch(s,e,t)}))},getAllHighlights:function(e){this.hlWrapper(enyo.bind(this,function(t,n){t?e&&e(t):this._query(n,{index:"osisRef"},e)}))},getNote:function(e,t){this.noteWrapper(enyo.bind(this,function(n,s){n?t&&t(n):this._get(s,e,t)}))},getNotes:function(e,t){this.noteWrapper(enyo.bind(this,function(n,s){n?t&&t(n):this._getBatch(s,e,t)}))},getAllNotes:function(e){this.noteWrapper(enyo.bind(this,function(t,n){t?e&&e(t):this._query(n,{index:"osisRef"},e)}))},getUserData:function(e,t,n){var s={},i=[];e=2===e.split(".").length?e:e.split(".")[0]+"."+e.split(".")[1];for(var a=1;t+1>a;a++)i.push(e+"."+a);this.getBatch(i,function(e,t){e?n&&n(e):(t.forEach(function(e){e.bookmarkId&&(s[e.id]=e),e.highlightId&&(s[e.id]=e),e.noteId&&(s[e.id]=e)}),n(null,s))})},_remove:function(e,t,n){e.remove(t,function(){n&&n(null)},function(e){n&&n(e)})},removeBookmark:function(e,t){this.bmWrapper(enyo.bind(this,function(n,s){n?t&&t(n):this._remove(s,e.id,enyo.bind(this,function(n){n?t&&t(n):this.get(e.osisRef,enyo.bind(this,function(e,n){e?t&&t(e):void 0!==n?(delete n.bookmarkId,this.put(n,t)):t&&t({message:"api.removeBookmark: Couldn't remove bookmarkId from osisObject"})}))}))}))},removeHighlight:function(e,t){this.hlWrapper(enyo.bind(this,function(n,s){n?t&&t(n):this._remove(s,e.id,enyo.bind(this,function(n){n?t&&t(n):this.get(e.osisRef,enyo.bind(this,function(e,n){e?t&&t(e):void 0!==n?(delete n.highlightId,this.put(n,t)):t&&t({message:"api.removeHighlight: Couldn't remove highlightId from osisObject"})}))}))}))},removeNote:function(e,t){this.noteWrapper(enyo.bind(this,function(n,s){n?t&&t(n):this._remove(s,e.id,enyo.bind(this,function(n){n?t&&t(n):this.get(e.osisRef,enyo.bind(this,function(e,n){e?t&&t(e):void 0!==n?(delete n.noteId,this.put(n,t)):t&&t({message:"api.removeHighlight: Couldn't remove noteId from osisObject"})}))}))}))},putSetting:function(e,t,n){this.get("settings",enyo.bind(this,function(s,i){s?n&&n(s):(i||(i={id:"settings"}),i[e]=t,this.put(i,n))}))},deleteDatabases:function(){this.wrapper(function(e,t){t.clear()}),this.bmWrapper(function(e,t){t.clear()}),this.hlWrapper(function(e,t){t.clear()})},formatOsis:function(e){var t=e.split("."),n=t[0]+" "+t[1];return t[2]?n+":"+t[2]:n},extend:function(e){var t=[].slice.call(arguments,1);return t.forEach(function(t){for(var n in t)e[n]=t[n]}),e},dynamicSort:function(e){return function(t,n){return t[e]>n[e]?1:t[e]<n[e]?-1:0}},dynamicSortMultiple:function(){var e=arguments;return function(t,n){for(var s=0,i=0,a=e.length;0===i&&a>s;)i=api.dynamicSort(e[s])(t,n),s++;return i}},cleanArray:function(e){for(var t=[],n=0;e.length>n;n++)e[n]&&t.push(e[n]);return t},escapeRegExp:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}};

// source/mapping.js
var languages={af:"Afrikaans",am:"Amharic",ang:"Old English (ca. 450-1100)",ar:"Arabic",as:"Assamese",az:"Azerbaijani",azb:"South Azerbaijani",bal:"Balochi",bar:"Bavarian",be:"Belarusian",bg:"Bulgarian",bn:"Bengali",bn_IN:"Bengali (India)",br:"Breton",bs:"Bosnian","ca@valencia":"Catalan (Valencian)",ch:"Chamorro",chr:"Cherokee",ckb:"Central Kurdish",cs:"Czech",cy:"Welsh",da:"Danish",de:"German",de_CH:"Swiss German",dz:"Dzongkha",el:"Greek",en:"English",en_GB:"English (United Kingdom)",en_ZA:"English (South Africa)",enm:"Middle English (1100-1500)",es:"Spanish (Castilian)",et:"Estonian",eu:"Basque",fa:"Persian",fi:"Finnish",fr:"French",fur:"Friulian",fy:"Western Frisian",ga:"Irish",gl:"Galician",got:"Gothic",grc:"Ancient Greek (to 1453)",gu:"Gujarati",gv:"Manx",haw:"Hawaiian",he:"Hebrew",hi:"Hindi",hr:"Croatian",ht:"Haitian (Haitian Creole)",hu:"Hungarian",hy:"Armenian",id:"Indonesian",ilo:"Iloko",is:"Icelandic",it:"Italian",itz:"Itz\u00e1",ja:"Japanese",ka:"Georgian",kek:"Kekch\u00ed",kn:"Kannada",ko:"Korean",ku:"Kurdish",lo:"Lao",lt:"Lithuanian",lv:"Latvian",mai:"Maithili",mk:"Macedonian",ml:"Malayalam",mn:"Mongolian",mr:"Marathi",ms:"Malay",mt:"Maltese",my:"Burmese",nb:"Norwegian Bokm\u00e5l",nd:"North Ndebele",ne:"Nepali",nl:"Dutch (Netherlands)",nn:"Norwegian Nynorsk",no:"Norwegian",nso:"Northern Sotho",or:"Oriya",pa:"Panjabi (Punjabi)",pl:"Polish",pot:"Potawatomi",ppk:"Uma",pt:"Portuguese",pt_BR:"Portuguese (Brazilian)",rmk:"Cal\u00f3",ro:"Romanian",ru:"Russian",si:"Sinhala",sk:"Slovak",sl:"Slovenian",sn:"Shona",so:"Somali",sq:"Albanian",sr:"Serbian","sr@latin":"Serbian (Latin)",srn:"Sranan Tongo",st:"Sotho, Southern",sv:"Swedish",syr:"Syriac",ta:"Tamil",te:"Telugu",tg:"Tajik",th:"Thai",tl:"Tagalog",tlh:"Klingon",tn:"Tswana",tr:"Turkish",ty:"Tahitian",ur:"Urdu",ury:"Orya",uk:"Ukrainian",vi:"Vietnamese",wo:"Wolof",zh:"Chinese",zh_CN:"Chinese (China)",zh_HK:"Chinese (Hong Kong)",zh_TW:"Chinese (Taiwan)",zu:"Zulu",es_AR:"Spanish (Argentinian)",bo:"Tibetan",ast:"Asturian",en_US:"English (United States)",eo:"Esperanto",ks:"Kashmiri",ky:"Kirgyz",la:"Latin",xh:"Xhosa",es_MX:"Spanish (Mexican)",km:"Khmer",fo:"Faroese",kk:"Kazakh",nl_BE:"Dutch (Belgium/Flemish)",ca:"Catalan",tk:"Turkmen",uz:"Uzbek",bn_BD:"Bengali (Bangladesh)",sw:"Swahili",sco:"Scots",lb:"Luxembourgish",ln:"Lingala",tt:"Tatar",fil:"Filipino",gun:"Gun",pms:"Piemontese",arn:"Mapudungun",rm:"Romansh",wa:"Walloon",jv:"Javanese",oc:"Occitan (post 1500)",ps:"Pushto",ha:"Hausa",mg:"Malagasy",mi:"Maori",ug:"Uighur",ak:"Akan",an:"Aragonese",su:"Sundanese",pap:"Papiamento",nah:"Nahuatl",csb:"Kashubian",nap:"Neapolitan",kw:"Cornish",ve:"Venda",son:"Songhay",en_CA:" English (Canada)",rw:"Kinyarwanda",crh:"Crimean Turkish",li:"Limburgian",es_VE:"Spanish (Venezuela)",frp:"Franco-Proven\u00e7al (Arpitan)",yi:"Yiddish",es_ES:"Spanish (Spain)",fr_FR:"French (France)",de_DE:"German (Germany)",yo:"Yoruba",ig:"Igbo",es_PR:"Spanish (Puerto Rico)",nds:"Low German",nr:"Ndebele, South",gd:"Gaelic, Scottish",es_CL:"Spanish (Chile)",en_IE:"English (Ireland)",ta_LK:"Tamil (Sri-Lanka)",se:"Northern Sami",hsb:"Upper Sorbian",hne:"Chhattisgarhi",en_AU:"English (Australia)",fr_CA:"French (Canada)",ia:"Interlingua"},mappings={texts:$L("Biblical Texts"),lexdict:$L("Lexicons / Dictionaries"),genbook:$L("Generic Books"),comments:$L("Commentaries")};

// source/bcSelector.js
enyo.kind({name:"biblez.bcSelector",kind:"enyo.FittableRows",events:{onSelect:"",onBack:""},classes:"enyo-fit",published:{module:null},components:[{name:"bcPanel",kind:"Panels",arrangerKind:"CardArranger",fit:!0,animate:!1,components:[{name:"bookPanel",kind:"enyo.FittableRows",components:[{kind:"onyx.Toolbar",components:[{kind:"onyx.IconButton",src:"assets/back.png",ontap:"doBack"},{content:$L("Books")}]},{kind:"enyo.Scroller",fit:!0,touch:!0,components:[{name:"bookRepeater",kind:"Repeater",count:0,onSetupItem:"setBookItems",components:[{name:"bookItem",kind:"onyx.Button",classes:"bc-item",ontap:"handleBook"}]}]}]},{name:"chapterPanel",kind:"enyo.FittableRows",components:[{name:"tbChapter",kind:"onyx.Toolbar",components:[{kind:"onyx.IconButton",src:"assets/back.png",ontap:"handleBack"},{name:"chapterLabel",content:$L("Chapters"),classes:"text-ellipsis"}]},{kind:"enyo.Scroller",fit:!0,touch:!0,components:[{name:"chapterRepeater",kind:"Repeater",count:0,onSetupItem:"setChapterItems",components:[{name:"chapterItem",kind:"onyx.Button",classes:"bc-item",ontap:"handleChapter"}]}]}]}]}],books:[],currentBook:null,setPanel:function(e){this.$.bcPanel.setIndex(e)},handleBack:function(){this.$.bcPanel.setIndex(0)},moduleChanged:function(){this.module.getAllBooks(enyo.bind(this,function(e,t){e?console.log("getAllBooks",e):(this.books=t,this.$.bookRepeater.setCount(this.books.length))}))},setBookItems:function(e,t){var n=t.item,s=t.index;39===this.books[s].bookNum&&n.$.bookItem.addStyles("clear: both;"),this.books[s].bookNum>=39?n.$.bookItem.addClass("books-nt"):n.$.bookItem.addClass("books-ot"),n.$.bookItem.setContent(this.books[s].abbrev.slice(0,4))},handleBook:function(e,t){if(this.currentBook=this.books[t.index],this.$.chapterRepeater.setCount(this.currentBook.maxChapter),this.$.chapterLabel.setContent($L("Chapters in ")+this.currentBook.name),this.$.bcPanel.setIndex(1),window.innerWidth-60<this.$.chapterLabel.hasNode().clientWidth){var n=this.$.tbChapter.hasNode().clientWidth-60+"px";this.$.chapterLabel.applyStyle("width",n)}},setChapterItems:function(e,t){t.item.$.chapterItem.setContent(t.index+1)},handleChapter:function(e,t){this.$.bcPanel.setIndex(0),this.doSelect({book:this.currentBook.abbrev,chapter:t.index+1,osisRef:this.currentBook.abbrev+"."+(t.index+1),label:this.currentBook.abbrev+" "+(t.index+1)})},resizeHandler:function(){this.inherited(arguments);var e=this.$.tbChapter.hasNode().clientWidth-60+"px";this.$.chapterLabel.applyStyle("width",e)}});

// source/kinds.js
enyo.kind({name:"VerseList",kind:"List",published:{clientStyle:"display: inline;"},events:{onOffset:""},create:function(){this.inherited(arguments),this.$.port.addRemoveClass("verse-view",!0),this.clientStyleChanged()},clientStyleChanged:function(){this.$.generator.setClientStyle(this.clientStyle)},reset:function(e){this.getSelection().clear(),this.invalidateMetrics(),this.invalidatePages(),this.stabilize(),e?this.scrollToRow(e+1):this.scrollToRow(1)}});

// source/main.js
enyo.kind({name:"biblez.main",kind:"FittableRows",fit:!0,events:{onOpenModuleManager:"",onOpenPreferences:"",onModuleChanged:"",onOpenBC:"",onOpenNotes:"",onOpenDataView:"",onOpenAbout:""},published:{passage:""},components:[{kind:"biblez.versePopup",name:"versePopup",onBookmark:"handleBookmark",onHighlight:"handleHighlight",onNoteTap:"handleNoteTap"},{name:"fontMenu",kind:"biblez.fontMenu",onFontSize:"handleFontSize",onFont:"handleFont"},{name:"notePopup",kind:"biblez.notePopup",onEdit:"handleNoteTap"},{name:"footnotePopup",kind:"biblez.footnotePopup"},{name:"messagePopup",kind:"onyx.Popup",centered:!0,floating:!0,classes:"message-popup"},{name:"bcPopup",classes:"biblez-bc-popup",kind:"onyx.Popup",modal:!0,floating:!0},{name:"stuffPopup",classes:"biblez-notes-popup onyx-light",kind:"onyx.Popup",scrim:!0,autoDismiss:!1,modal:!0,floating:!0,centered:!0},{kind:"enyo.FittableColumns",fit:!0,name:"mainView",components:[{kind:"enyo.FittableRows",fit:!0,components:[{kind:"onyx.Toolbar",showing:!1,classes:"main-toolbar",noStretch:!0,name:"topTB",layoutKind:"FittableColumnsLayout",components:[{name:"moduleSelector",kind:"onyx.MenuDecorator",onSelect:"moduleSelected",components:[{kind:"onyx.Button",name:"btnModules",classes:"tb-button",style:"background-color: #934A15;"},{kind:"onyx.Menu",maxHeight:"300",name:"moduleMenu",style:"width: 250px;"}]},{kind:"onyx.Button",name:"btnPassage",classes:"tb-button",ontap:"handleBcSelector"},{name:"historySelector",kind:"onyx.MenuDecorator",onSelect:"historySelected",components:[{kind:"onyx.IconButton",name:"btnHistory",src:"assets/history.png"},{kind:"onyx.Menu",maxHeight:"300",name:"historyMenu"}]},{fit:!0},{classes:"toolbar-spinner",name:"tbSpinner",showing:!1},{name:"actionSelector",kind:"onyx.MenuDecorator",onSelect:"actionSelected",components:[{kind:"onyx.IconButton",src:"assets/menu.png"},{kind:"onyx.Menu",name:"actionMenu",maxHeight:"400",style:"width: 200px;",components:[{action:"bookmarks",classes:"menu-item",components:[{kind:"onyx.IconButton",src:"assets/bookmarks.png"},{content:$L("Bookmarks"),classes:"menu-label"}]},{action:"notes",classes:"menu-item",components:[{kind:"onyx.IconButton",src:"assets/notes.png"},{content:$L("Notes"),classes:"menu-label"}]},{action:"highlights",classes:"menu-item",components:[{kind:"onyx.IconButton",src:"assets/highlights.png"},{content:$L("Highlights"),classes:"menu-label"}]},{classes:"onyx-menu-divider"},{action:"moduleManager",classes:"menu-item",components:[{kind:"onyx.IconButton",src:"assets/add.png"},{content:$L("Module Manager"),classes:"menu-label"}]},{action:"preferences",classes:"menu-item",components:[{kind:"onyx.IconButton",src:"assets/settings.png"},{content:$L("Preferences"),classes:"menu-label"}]},{action:"font",classes:"menu-item",components:[{kind:"onyx.IconButton",src:"assets/font.png"},{content:$L("Font"),classes:"menu-label"}]},{action:"about",classes:"menu-item",components:[{kind:"onyx.IconButton",src:"assets/info.png"},{content:$L("About"),classes:"menu-label"}]}]}]}]},{name:"mainPanel",kind:"Panels",draggable:!1,fit:!0,ondragfinish:"handleChangeChapter",onTransitionStart:"handlePanelIndex",arrangerKind:"LeftRightArranger",margin:0,classes:"background",components:[{name:"verseList",kind:"VerseList",thumb:!1,touchOverscroll:!1,count:0,onSetupItem:"setVerses",onScroll:"handleOnScroll",classes:"enyo-selectable",components:[{name:"text",allowHtml:!0,style:"display: inline;",ontap:"handleVerseTap",onclick:"handleVerseTap"},{name:"imgBm",tag:"img",style:"display: inline;",showing:!1,src:"assets/bookmark.png"},{name:"imgNote",content:"",allowHtml:!0,style:"display: inline; margin: 0 3px;",showing:!1,ontap:"handleVerseTap",onclick:"handleVerseTap"}]}]}]},{name:"sidebar",content:"",classes:"sidebar",showing:!1,style:"width: 320px;"}]}],currentModule:null,passage:{osisRef:"Matt.1",label:"Matt 1",chapter:1},userData:{},modules:[],history:[],panelIndex:2,settings:{id:"settings"},footnotes:{},verses:[],reachedTop:!1,reachedBottom:!1,offset:0,rowSize:0,hasVerseNumber:0,timer:null,create:function(){this.inherited(arguments),this.startUp()},startUp:function(){api.get("settings",enyo.bind(this,function(e,t){e?this.handleError("Couldn't load settings!"):(this.settings=t?t:this.settings,this.getInstalledModules(),this.settings.fontSize&&(this.$.fontMenu.setFontSize(this.settings.fontSize),this.$.verseList.applyStyle("font-size",this.settings.fontSize+"em")),this.settings.font&&(this.$.fontMenu.setFont(this.settings.font),"default"!==this.settings.font&&this.$.verseList.applyStyle("font-family",this.settings.font)),this.settings.history&&(this.history=this.settings.history))}))},handleSettings:function(){api.get("settings",enyo.bind(this,function(e,t){e?this.handleError("Couldn't load settings!"):(this.settings=t?t:this.settings,this.handlePassage())}))},getInstalledModules:function(){sword.moduleMgr.getModules(enyo.bind(this,function(e,t){e?this.handleError(e):(0!==t.length?(this.$.mainPanel.selectPanelByName("verseList"),this.$.mainPanel.draggable=!0,this.$.topTB.show(),this.modules=t,this.renderModuleMenu(this.modules),this.$.firstStart&&(this.$.firstStart.destroy(),this.$.endPlaceholder.destroy())):(this.$.topTB.hide(),this.$.mainPanel.draggable=!1,this.$.mainPanel.createComponent({name:"firstStart",classes:"center",style:"margin-top: 20px;",components:[{tag:"img",src:"assets/biblez128.png",style:"margin: 20px;"},{content:$L("You have no modules installed. Open the Module Manager to install one."),style:"font-weight: bold; margin-bottom: 20px;"},{kind:"onyx.Button",classes:"onyx-affirmative",content:$L("Open Module Manager"),ontap:"doOpenModuleManager"}]},{owner:this}).render(),this.$.mainPanel.createComponent({name:"endPlaceholder"},{owner:this}).render(),this.$.mainPanel.selectPanelByName("firstStart"),this.$.mainPanel.resized()),this.resized())}))},renderModuleMenu:function(e){var t=null;e||(e=this.modules),this.settings.lastModule&&(t=this.settings.lastModule),this.$.moduleMenu.destroyClientControls();var n=[];this.currentModule=null,this.modules.forEach(enyo.bind(this,function(e,s){t&&t===e.modKey?(this.$.btnModules.setContent(t),n.push({classes:"menu-modules-item",index:s,active:!0,components:[{kind:"onyx.IconButton",src:"assets/checkmark.png",style:"float: right;"},{content:e.config.moduleKey,index:s},{tag:"br"},{content:e.config.description,classes:"menu-module-title",index:s}]}),this.currentModule=e):n.push({classes:"menu-modules-item",index:s,components:[{content:e.config.moduleKey,index:s},{tag:"br"},{content:e.config.description,classes:"menu-module-title",index:s}]})})),null===this.currentModule&&(this.currentModule=this.modules[0],n[0].active=!0,n[0].components=[{kind:"onyx.IconButton",src:"assets/checkmark.png",style:"float: right;"},{content:this.currentModule.modKey,index:0},{tag:"br"},{content:this.currentModule.config.description,classes:"menu-module-title",index:0}],n[0].classes="menu-modules-item",n[0].index=0,this.$.btnModules.setContent(this.currentModule.modKey),this.settings.lastModule=this.currentModule.modKey),this.$.moduleMenu.createComponents(n,{owner:this.$.moduleMenu}),this.$.moduleMenu.render(),this.doModuleChanged({module:this.currentModule}),this.passage!==this.settings.lastRead&&this.settings.lastRead||(api.put(this.settings),this.handlePassage(this.passage)),this.settings&&this.setPassage(this.settings.lastRead?this.settings.lastRead:this.passage)},moduleSelected:function(e,t){isNaN(t.originator.index)||(this.currentModule=this.modules[t.originator.index],this.settings.lastModule=this.currentModule.modKey,this.renderModuleMenu())},handleModuleTree:function(e,t){this.currentModule=t.module,this.settings.lastModule=this.currentModule.modKey,this.renderModuleMenu(null,!1)},passageChanged:function(e,t){return this.$.bcSelector&&this.$.bcPopup.destroyClientControls(),this.$.bcPopup.hide(),t.offsetRef?t.offsetRef.hasOwnProperty("osisRef")?this.passage=t.offsetRef:(inOsis=t.offsetRef.split(".").length>2?t.offsetRef.slice(0,t.offsetRef.lastIndexOf(".")):t.offsetRef,this.passage={osisRef:inOsis,label:inOsis.replace("."," "),chapter:parseInt(inOsis.split(".")[1],10)}):(delete t.originator,delete t.delegate,delete t.type,this.passage=t),(this.settings.lastRead&&this.passage.osisRef!==this.settings.lastRead.osisRef||!this.settings.lastRead)&&(this.addToHistory(this.passage),this.renderHistory(),this.settings.lastRead=this.passage,api.put(this.settings),this.$.btnPassage.setContent(this.passage.label?this.passage.label:api.formatOsis(this.passage.osisRef)),this.$.topTB.resized()),this.reachedBottom||this.reachedTop||t.offsetRef||this.handlePassage(this.passage),!0},handlePassage:function(e,t){this.verses=[],this.$.verseList.setCount(this.verses.length),this.$.verseList.refresh();var n=this.passage.verseNumber?this.passage.verseNumber:0;return("string"==typeof e||t&&t.osisRef&&!t.label&&!t.chapter)&&(e=t&&t.osisRef?t.osisRef:e,e.split(".").length>2?(n=parseInt(e.slice(e.lastIndexOf(".")+1,e.length),10),e=e.slice(0,e.lastIndexOf("."))):n=0,this.passage={osisRef:e,label:e.replace("."," "),chapter:parseInt(e.split(".")[1],10)},this.settings.lastRead=this.passage,api.put(this.settings)),this.$.btnPassage.setContent(this.passage.label?this.passage.label:api.formatOsis(this.passage.osisRef)),this.loadText(this.passage.osisRef,enyo.bind(this,function(e,t){if(e)this.handleError(e.message);else{this.footnotes=t.footnotes,this.verses=t.verses;var s="";t.rtol?(this.$.verseList.applyStyle("text-align","right"),s="<br><div class='caps-rtol'>"+this.passage.chapter+"</div>"):(this.$.verseList.applyStyle("text-align","left"),s="<br><div class='caps'>"+this.passage.chapter+"</div>"),this.handleUserData(this.passage.osisRef),this.verses.unshift({osisRef:this.passage.osisRef,text:s}),this.$.verseList.setCount(this.verses.length),this.$.verseList.refresh(),0===n?(this.$.verseList.scrollToStart(),this.hasVerseNumber=0):(this.$.verseList.scrollToRow(n+1),this.hasVerseNumber=n+1)}})),this.renderHistory(),!0},setVerses:function(e,t){var n=t.index,s=this.verses[n];return this.$.text.setContent(s.text),s.bookmark?this.$.imgBm.show():this.$.imgBm.hide(),s.note?(this.$.imgNote.setContent("<a href='?type=note&osisRef="+s.osisRef+"&noteId="+s.noteId+"'><img src='assets/note.png'></a>"),this.$.imgNote.show()):this.$.imgNote.hide(),s.highlight?this.$.text.applyStyle("background-color",s.color):this.$.text.applyStyle("background-color","none"),!0},renderHistory:function(){this.$.historyMenu.destroyClientControls();var e=[];this.history.forEach(enyo.bind(this,function(t,n){t.osisRef&&e.push({content:api.formatOsis(t.osisRef),index:n,osisRef:t.osisRef})})),this.$.historyMenu.createComponents(e,{owner:this.$.historyMenu}),this.$.historyMenu.render()},historySelected:function(e,t){isNaN(t.originator.index)||this.setPassage(this.history[t.originator.index])},addToHistory:function(e){this.history.length>15&&this.history.splice(16,this.history.length-15);for(var t=0;this.history.length>t;t++)this.history[t].osisRef===e.osisRef&&this.history.splice(t,1);this.history.unshift(e),this.settings.history=this.history},handleUserData:function(e){var t=this.currentModule.getVersesInChapter(e),n=[],s=[];api.getUserData(e,t,enyo.bind(this,function(e,t){e||(this.userData=api.extend(this.userData,t),Object.keys(t).forEach(enyo.bind(this,function(e){t[e].bookmarkId&&this.updateVerses(e,{bookmark:!0}),t[e].highlightId&&n.push(t[e].highlightId),t[e].noteId&&s.push(t[e].noteId)})),0!==n.length&&api.getHighlights(n,enyo.bind(this,function(e,t){e?this.handleError(e):t.forEach(enyo.bind(this,function(e){this.updateVerses(e.osisRef,{highlight:!0,color:e.color})}))})),0!==s.length&&api.getNotes(s,enyo.bind(this,function(e,t){e?this.handleError(e):t.forEach(enyo.bind(this,function(e){this.updateVerses(e.osisRef,{note:!0,type:"note",osisRef:e.osisRef,noteId:e.id})}))})))}))},handleBookmark:function(e,t){"remove"===t.action?this.updateVerses(t.osisRef,{bookmark:!1}):this.updateVerses(t.osisRef,{bookmark:!0}),this.handleUserData(t.osisRef),this.$.dataView&&this.$.dataView.updateSection()},handleHighlight:function(e,t){"remove"===t.action&&this.updateVerses(t.osisRef,{highlight:!1}),this.handleUserData(t.osisRef),this.$.dataView&&this.$.dataView.updateSection()},handleNoteTap:function(e,t){this.userData[t.osisRef]&&void 0!==this.userData[t.osisRef].noteId&&(t.noteId=this.userData[t.osisRef].noteId),enyo.Panels.isScreenNarrow()?this.doOpenNotes(t):(this.$.notes||this.$.stuffPopup.createComponent({name:"notes",kind:"biblez.notes",onBack:"closePopup",onChange:"handleNote"},{owner:this}).render(),this.$.notes.setOsisRef(t.osisRef),this.$.notes.setNoteId(t.noteId),this.$.stuffPopup.show()),this.$.notePopup.hide()},handleNote:function(e,t){"remove"===t.action&&this.updateVerses(t.osisRef,{note:!1}),this.handleUserData(t.osisRef),this.$.dataView&&this.$.dataView.updateSection()},handleBcSelector:function(e,t){enyo.Panels.isScreenNarrow()?this.doOpenBC():(this.$.bcSelector||this.$.bcPopup.createComponent({kind:"biblez.bcSelector",name:"bcSelector",onSelect:"passageChanged",onBack:"closePopup"},{owner:this}).render(),this.$.bcSelector.setModule(this.currentModule),this.$.bcPopup.showAtEvent(t))},closePopup:function(){this.$.bcSelector&&this.$.bcPopup.destroyClientControls(),this.$.bcPopup.hide(),this.$.notes&&this.$.stuffPopup.destroyClientControls(),this.$.stuffPopup.hide()},handleFontMenu:function(){this.$.fontMenu.show()},handleFont:function(e,t){this.$.verseList.applyStyle("font-family",t.font),this.$.verseList.reset(this.offset),api.putSetting("font",t.font)},handleFontSize:function(e,t){"default"!==t.font?this.$.verseList.applyStyle("font-size",t.fontSize+"em"):this.$.verseList.applyStyle("font-size",null),this.$.verseList.reset(this.offset),api.putSetting("fontSize",t.fontSize)},handleChangeChapter:function(){return 5!==this.$.mainPanel.getIndex()&&(this.currentModule&&(1===this.panelIndex?this.handlePassage(sword.verseKey.previous(this.passage.osisRef,this.currentModule.config.Versification).osisRef):3===this.panelIndex&&this.handlePassage(sword.verseKey.next(this.passage.osisRef,this.currentModule.config.Versification).osisRef)),this.$.mainPanel.setIndexDirect(2)),!0},handleVerseTap:function(e,t){t.preventDefault();var n={};if(t.target.href||t.target.parentNode.href){var s=t.target.href||t.target.parentNode.href;s.split("?")[1].split("&").forEach(function(e){e=e.split("="),n[e[0]]=e[1]})}return"verseNum"===n.type?(this.$.versePopup.setOsisRef(n.osisRef),this.userData.hasOwnProperty(n.osisRef)?(this.userData[n.osisRef].bookmarkId?(this.$.versePopup.setBmExists(!0),this.$.versePopup.setBmId(this.userData[n.osisRef].bookmarkId)):this.$.versePopup.setBmExists(!1),this.userData[n.osisRef].highlightId?(this.$.versePopup.setHlExists(!0),this.$.versePopup.setHlId(this.userData[n.osisRef].highlightId)):this.$.versePopup.setHlExists(!1),this.userData[n.osisRef].noteId?(this.$.versePopup.setNoteExists(!0),this.$.versePopup.setNoteId(this.userData[n.osisRef].noteId)):(this.$.versePopup.setNoteExists(!1),this.$.versePopup.setNoteId(null))):(this.$.versePopup.setBmExists(!1),this.$.versePopup.setHlExists(!1),this.$.versePopup.setNoteExists(!1),this.$.versePopup.setNoteId(null)),this.$.versePopup.setLabels(),this.$.versePopup.showAtEvent(t)):"note"===n.type?api.getNote(parseInt(n.noteId,10),enyo.bind(this,function(e,n){e?this.handleError(e):(this.$.notePopup.setText(n.text),this.$.notePopup.setOsisRef(n.osisRef),this.$.notePopup.showAtEvent(t))})):"footnote"===n.type?(this.footnotes[n.osisRef].forEach(enyo.bind(this,function(e){e.n===n.n?this.$.footnotePopup.setText(e.note):isNaN(e.n)||e.n!==parseInt(n.n,10)||this.$.footnotePopup.setText(e.note)})),this.$.footnotePopup.showAtEvent(t)):"crossReference"===n.type&&(this.$.footnotePopup.setText(""),this.$.footnotePopup.showAtEvent(t),this.$.footnotePopup.handleSpinner(!0),this.currentModule.renderText(n.osisRef,{oneVersePerLine:!1,footnotes:!1,headings:!1},enyo.bind(this,function(e,n){e?(this.$.footnotePopup.hide(),this.handleError(e.message)):(this.$.footnotePopup.hide(),this.$.footnotePopup.setText(n.text),this.$.footnotePopup.handleSpinner(!1),this.$.footnotePopup.showAtEvent(t))}))),!1},handleOnScroll:function(e,t){enyo.job("handleScrolling",this.bindSafely(function(){this.handleScrolling(e,t)}),100)},handleScrolling:function(e,t){if(0!==this.verses.length){var n=t.scrollBounds,s=n.clientHeight,i=n.top,a=n.height;n.yDir,n&&n.top>0&&(this.rowSize=Math.round(n.height/this.verses.length),this.offset=Math.round(n.top/this.rowSize),this.verses[this.offset]&&this.verses[this.offset].osisRef&&this.setPassage({offsetRef:this.verses[this.offset].osisRef})),!this.reachedBottom&&s+i>a-200?(this.reachedBottom=!0,enyo.job("updateBottom",this.bindSafely(function(){this.reachedBottom=!1}),2e3),this.addText(!0,enyo.bind(this,function(){this.reachedBottom=!1}))):!this.reachedTop&&30>i&&(this.reachedTop=!0,enyo.job("updateTop",this.bindSafely(function(){this.reachedTop=!1}),2e3),this.addText(!1,enyo.bind(this,function(){this.reachedTop=!1})))}return!0},addText:function(e,t){if(!this.currentModule||0===this.verses.length)return t(),void 0;if(e===!0){var n=this.verses[this.verses.length-1].osisRef.slice(0,this.verses[this.verses.length-1].osisRef.lastIndexOf("."));if("Rev.22"===n)return t(),void 0;var s=sword.verseKey.next(n,this.currentModule.config.Versification);this.loadText(s.osisRef,enyo.bind(this,function(e,n){if(e)this.handleError(e.message);else{var i="";n.rtol?(this.$.verseList.applyStyle("text-align","right"),i="<br><div class='caps-rtol'>"+s.chapter+"</div>"):i="<br><div class='caps'>"+s.chapter+"</div>",this.verses.push({osisRef:s.osisRef,text:i}),this.verses.push.apply(this.verses,n.verses),n.hasOwnProperty("footnotes")&&(this.footnotes=api.extend(this.footnotes,n.footnotes)),this.$.verseList.setCount(this.verses.length),this.$.verseList.refresh(),this.handleUserData(s.osisRef)}t()}))}else{var i=this.verses[1].osisRef.slice(0,this.verses[1].osisRef.lastIndexOf("."));if("Gen.1"===i)return t(),void 0;var a=sword.verseKey.previous(i,this.currentModule.config.Versification);this.loadText(a.osisRef,enyo.bind(this,function(e,n){if(e)this.handleError(e.message);else{n.hasOwnProperty("footnotes")&&(this.footnotes=api.extend(this.footnotes,n.footnotes));var s=n.verses.length;n.verses.push.apply(n.verses,this.verses),this.verses=n.verses;var i="";n.rtol?(this.$.verseList.applyStyle("text-align","right"),i="<br><div class='caps-rtol'>"+a.chapter+"</div>"):i="<br><div class='caps'>"+a.chapter+"</div>",this.verses.unshift({osisRef:a.osisRef,text:i}),this.$.verseList.setCount(this.verses.length),this.$.verseList.refresh(),0===this.hasVerseNumber?this.$.verseList.scrollToRow(s+1):(this.$.verseList.scrollToRow(s+this.hasVerseNumber),this.hasVerseNumber=0),this.handleUserData(a.osisRef)}t()}))}},loadText:function(e,t){this.$.tbSpinner.show(),this.$.topTB.resized(),this.currentModule.renderText(e,{oneVersePerLine:this.settings.linebreak?!0:!1,footnotes:this.settings.footnotes?!0:!1,crossReferences:this.settings.crossReferences?!0:!1,intro:this.settings.introductions?!0:!1,headings:this.settings.hasOwnProperty("headings")?this.settings.headings:!0,wordsOfChristInRed:this.settings.woc?!0:!1,array:!0},enyo.bind(this,function(e,n){t(e,n),this.$.tbSpinner.hide(),this.$.topTB.resized()}))},actionSelected:function(e,t){"moduleManager"===t.originator.action?this.doOpenModuleManager():"preferences"===t.originator.action?this.doOpenPreferences():"about"===t.originator.action?this.doOpenAbout():"font"===t.originator.action?this.handleFontMenu():enyo.Panels.isScreenNarrow()?this.doOpenDataView({section:t.originator.action}):(this.$.sidebar.show(),this.$.mainView.resized(),this.$.verseList.reset(this.offset),this.$.dataView||(this.$.sidebar.createComponent({name:"dataView",kind:"biblez.dataView",onBack:"handleBack",onVerse:"handlePassage"},{owner:this}).render(),this.$.dataView.showHideButton()),this.$.dataView.updateSection(t.originator.action))},handleBack:function(){return this.$.sidebar.destroyClientControls(),this.$.sidebar.hide(),this.$.mainView.resized(),this.$.verseList.reset(this.offset),!0},handlePanelIndex:function(e,t){this.panelIndex=t.toIndex},updateVerses:function(e,t){this.verses.forEach(enyo.bind(this,function(n,s){n.osisRef===e&&(this.verses[s]=api.extend(n,t),this.$.verseList.renderRow(s))}))},handleOrientation:function(){var e=screen.mozOrientation;"portrait-primary"===e||"portrait-secondary"===e?this.$.topTB.show():("landscape-primary"===e||"landscape-secondary"===e)&&this.$.topTB.hide()},resizeHandler:function(){this.inherited(arguments),enyo.Panels.isScreenNarrow()&&(this.$.sidebar.destroyClientControls(),this.$.sidebar.hide())},handleError:function(e){this.$.messagePopup.setContent(e),this.$.messagePopup.show()}});

// source/moduleManager.js
enyo.kind({name:"biblez.moduleManager",kind:"enyo.FittableRows",fit:!0,events:{onBack:"",onInstalled:""},components:[{name:"messagePopup",kind:"onyx.Popup",centered:!0,floating:!0,classes:"message-popup"},{name:"scrim",kind:"onyx.Scrim",classes:"onyx-scrim-translucent"},{kind:"onyx.MoreToolbar",components:[{kind:"onyx.IconButton",src:"assets/back.png",ontap:"handleBack"},{content:$L("Module Manager")}]},{name:"panel",arrangerKind:"CollapsingArranger",fit:!0,kind:"Panels",classes:"app-panels",components:[{name:"panelLang",kind:"enyo.FittableRows",components:[{classes:"center",components:[{kind:"onyx.Spinner",name:"spinner",classes:"onyx-light center"}]},{name:"langList",kind:"List",fit:!0,onSetupItem:"setupLangItem",components:[{name:"langItem",classes:"item",ontap:"handleLanguage",components:[{kind:"enyo.FittableColumns",components:[{name:"langShort",classes:"item-left"},{name:"langName",style:"font-style: italic;"}]}]}]}]},{name:"panelModules",kind:"enyo.FittableRows",components:[{name:"modList",kind:"List",fit:!0,onSetupItem:"setupModItem",components:[{name:"modItem",classes:"item",ontap:"handleModule",components:[{name:"modName"}]}]}]},{name:"panelDescription",kind:"enyo.FittableRows",components:[{kind:enyo.Scroller,fit:!0,components:[{name:"detailsContainer",showing:!1,classes:"content-container",components:[{name:"detailsName",classes:"title"},{kind:"onyx.Button",ontap:"installModule",name:"btnInstall",classes:"onyx-affirmative",content:$L("Install Module"),style:"margin-left: 10px;"},{kind:"onyx.Button",ontap:"removeModule",name:"btnRemove",showing:!1,classes:"onyx-negative",content:$L("Remove Module"),style:"margin-left: 10px;"},{name:"detailsDescription",allowHtml:!0,classes:"nice-padding"}]}]}]}]},{kind:"onyx.MoreToolbar",name:"bottomTB",components:[{kind:"onyx.PickerDecorator",components:[{},{name:"repoPicker",kind:"onyx.Picker",onSelect:"handleRepoChange"}]},{kind:"onyx.ProgressBar",name:"progressBar",progress:0,showing:!1,showStripes:!1,animateStripes:!0,fit:!0}]}],lang:[],started:!1,repos:[],modules:[],langModules:[],currentModule:null,installedModules:[],start:function(){this.started||(this.$.spinner.show(),api.get("repos",enyo.bind(this,function(e,t){e?this.handleError(e):t?this.setupRepoPicker(t.repos,t.currentRepo):this.getRepos()}))),this.getInstalledModules(),this.started=!0},getInstalledModules:function(){sword.moduleMgr.getModules(enyo.bind(this,function(e,t){e||0===t.length||(this.installedModules=t)}))},handleBack:function(){enyo.Panels.isScreenNarrow()?0!==this.$.panel.getIndex()?this.$.panel.previous():this.doBack():this.doBack()},handleRepoChange:function(e,t){this.$.detailsContainer.hide(),this.$.modList.setCount(0),this.$.modList.refresh(),this.$.langList.setCount(0),this.$.langList.refresh(),this.$.spinner.show(),this.$.panel.setIndex(0),api.get("repos",enyo.bind(this,function(e,n){e?this.handleError(e):(n.currentRepo=this.repos[t.selected.index],api.put(n))})),this.getRemoteModules(this.repos[t.selected.index])},getRepos:function(){if(navigator.onLine){if(window.navigator.mozApps){var e=navigator.mozApps.getSelf();e.onsuccess=enyo.bind(this,function(){if(e.result&&!enyo.platform.firefox)sword.installMgr.getRepositories(enyo.bind(this,function(e,t){e?this.handleError(e):this.saveRepoData(t)}));else{var t=new enyo.Ajax({url:"http://zefanjas.de/apps/biblezMasterlist.php"});t.go(),t.response(this,function(e,t){this.saveRepoData(t)}),t.error(this,function(e,t){console.log(e,t),this.handleError({message:"Couldn't download MasterList!"})})}})}}else this.$.spinner.stop(),this.handleError({message:$L("You need an internet connection to download modules!")})},saveRepoData:function(e){api.put({id:"repos",repos:e,lastRepoUpdate:{time:(new Date).getTime()}},enyo.bind(this,function(t){t?this.handleError(t):this.setupRepoPicker(e)}))},setupRepoPicker:function(e,t){this.currentRepo=t;var n=[],s=null;e.forEach(enyo.bind(this,function(e,t){this.currentRepo&&e.name===this.currentRepo.name||"CrossWire"===e.name?(n.push({content:e.name,index:t,active:!0}),s=e):n.push({content:e.name,index:t})})),this.repos=e,this.$.repoPicker.createComponents(n,{owner:this}),this.$.repoPicker.render(),this.currentRepo?this.getRemoteModules(this.currentRepo):this.getRemoteModules(s)},getRemoteModules:function(e){this.currentRepo=e,api.get("downloadedModules",enyo.bind(this,function(t,n){if(t)this.handleError(t);else if(n&&n.hasOwnProperty(e.name.replace(" ","")))this.modules=n[e.name.replace(" ","")].modules,this.prepareLangList(this.modules);else if(navigator.onLine){if(window.navigator.mozApps){var s=navigator.mozApps.getSelf();s.onsuccess=enyo.bind(this,function(){if(s.result&&!enyo.platform.firefox)sword.installMgr.getModules(e,enyo.bind(this,function(t,s){t?this.handleError(t.message?t.message:t):(n||(n={id:"downloadedModules"}),this.handleGotRemoteModules(n,s,e))}));else{var t=new enyo.Ajax({url:"http://zefanjas.de/apps/biblezModules.php"});t.go({modUrl:e.url}),t.response(this,function(t,s){s=api.cleanArray(s).sort(api.dynamicSortMultiple("Lang","moduleKey")),n||(n={id:"downloadedModules"}),this.handleGotRemoteModules(n,s,e)}),t.error(this,function(){this.handleError({message:"Couldn't download Modules!"})})}})}}else this.$.spinner.stop(),this.handleError({message:$L("You need an internet connection to download modules!")})}))},handleGotRemoteModules:function(e,t,n){e[n.name.replace(" ","")]={modules:t,name:n.name},api.put(e,enyo.bind(this,function(e){e&&this.handleError(e)})),this.modules=t,this.prepareLangList(this.modules)},prepareLangList:function(e){this.$.spinner.hide(),this.lang=[],e.forEach(enyo.bind(this,function(t,n){0===n?this.lang.push({lang:t.Lang}):n>0&&t.Lang!==e[n-1].Lang&&this.lang.push({lang:t.Lang})})),this.$.panelLang.reflow(),this.$.langList.setCount(this.lang.length),this.$.langList.reset()},setupLangItem:function(e,t){var n=this.lang[t.index];this.$.langShort.setContent(n.lang),this.$.langName.setContent(languages[n.lang]),this.$.langItem.addRemoveClass("list-selected",e.isSelected(t.index))},handleLanguage:function(e,t){enyo.Panels.isScreenNarrow()&&this.$.panel.next(),this.langModules=[],this.modules.forEach(enyo.bind(this,function(e){e.Lang===this.lang[t.index].lang&&this.langModules.push(e)})),this.$.modList.setCount(this.langModules.length),this.$.modList.reset()},setupModItem:function(e,t){var n=this.langModules[t.index];this.$.modName.setContent(n.Description),this.$.modItem.addRemoveClass("list-selected",e.isSelected(t.index))},handleModule:function(e,t){enyo.Panels.isScreenNarrow()&&this.$.panel.next(),this.$.btnInstall.show(),this.$.btnRemove.hide(),this.currentModule=this.langModules[t.index],this.installedModules.forEach(enyo.bind(this,function(e){e.modKey===this.currentModule.moduleKey&&(this.$.btnInstall.hide(),this.$.btnRemove.show())})),this.$.detailsContainer.show(),this.$.detailsName.setContent(this.currentModule.Description),this.$.detailsDescription.setContent(this.currentModule.About.replace(/\\par/g,"<br>"))},installModule:function(){if(this.$.btnInstall.setDisabled(!0),this.$.progressBar.show(),this.$.bottomTB.render(),window.navigator.mozApps){var e=navigator.mozApps.getSelf();e.onsuccess=enyo.bind(this,function(){if(e.result&&!enyo.platform.firefox)this.$.progressBar.setShowStripes(!1),sword.installMgr.installModule(this.currentModule.url,enyo.bind(this,this.handleInstalled),enyo.bind(this,function(e){this.$.progressBar.animateProgressTo(100*(e.loaded/e.total))}));else{this.$.progressBar.setShowStripes(!0);var t=new XMLHttpRequest({mozSystem:!0,mozAnon:!0}),n="http://zefanjas.de/apps/biblezGetModule.php?modKey="+this.currentModule.moduleKey+"&type="+this.currentRepo.type;t.open("GET",n,!0),t.responseType="blob",t.onreadystatechange=enyo.bind(this,function(){4==t.readyState&&(200===t.status?sword.installMgr.installModule(t.response,enyo.bind(this,this.handleInstalled)):this.handleError({message:"Couldn't download module.",error:t.status}))}),t.onprogress=enyo.bind(this,function(){this.$.progressBar.animateProgressTo(100)}),t.onerror=enyo.bind(this,function(){this.handleError({message:"Couldn't download Module!"}),this.$.btnInstall.show(),this.$.btnRemove.hide()}),t.send(null)}})}},handleInstalled:function(e){e?(console.log(e),this.handleError(e),this.$.btnInstall.show(),this.$.btnRemove.hide()):(this.doInstalled(),this.getInstalledModules(),this.$.btnInstall.hide(),this.$.btnRemove.show()),this.$.progressBar.hide(),this.$.progressBar.setProgress(0),this.$.btnInstall.setDisabled(!1)},removeModule:function(){sword.installMgr.removeModule(this.currentModule.moduleKey,enyo.bind(this,function(e){e?this.handleError(e):(this.doInstalled(),this.$.btnInstall.show(),this.$.btnRemove.hide())}))},clearDB:function(){sword.dataMgr.clearDatabase()},handleError:function(e){e.message&&(e=e.message),this.$.messagePopup.setContent(e),this.$.messagePopup.show()}});

// source/popup.js
enyo.kind({name:"biblez.versePopup",kind:"onyx.Popup",modal:!0,floating:!0,classes:"verse-popup",events:{onBookmark:"",onNote:"",onHighlight:"",onNoteTap:""},published:{osisRef:null,bmExists:!1,noteExists:!1,hlExists:!1,bmId:null,noteId:null,hlId:null},components:[{kind:"enyo.FittableRows",components:[{kind:"enyo.FittableColumns",components:[{name:"bmLabel",content:$L("Bookmark"),classes:"verse-popup-cell cell-top-left",ontap:"handleBookmark"},{name:"noteLabel",content:$L("Note"),classes:"verse-popup-cell cell-top-right",ontap:"handleNote"}]},{kind:"enyo.FittableColumns",classes:"color-container",components:[{kind:"onyx.Button",content:" ",ontap:"highlightVerse",classes:"color-button",color:"rgba(255,99,71,0.5)",style:"background-color: red;"},{kind:"onyx.Button",content:" ",ontap:"highlightVerse",classes:"color-button",color:"rgba(255,255,0,0.5)",style:"background-color: yellow;"},{kind:"onyx.Button",content:" ",ontap:"highlightVerse",classes:"color-button",color:"rgba(152,251,152,0.5)",style:"background-color: green;"},{kind:"onyx.Button",content:" ",ontap:"highlightVerse",classes:"color-button",color:"rgba(238,130,238,0.5)",style:"background-color: violet;"},{kind:"onyx.Button",caption:" ",ontap:"highlightVerse",classes:"color-button",color:"rgba(255,165,0,0.5)",style:"background-color: orange;"},{kind:"onyx.IconButton",src:"assets/delete.png",ontap:"removeHighlight"}]}]}],setLabels:function(){this.bmExists?this.$.bmLabel.setContent($L("Bookmark")+" - "):this.$.bmLabel.setContent($L("Bookmark")+" + ")},handleBookmark:function(){this.hide(),this.bmExists?api.removeBookmark({id:this.bmId,osisRef:this.osisRef},enyo.bind(this,function(e){e?console.log(e):this.doBookmark({action:"remove",osisRef:this.osisRef})})):api.putBookmark({osisRef:this.osisRef},enyo.bind(this,function(e){e?console.log(e):this.doBookmark({action:"add",osisRef:this.osisRef})}))},highlightVerse:function(e){this.hide();var t=this.hlExists?{id:this.hlId,osisRef:this.osisRef,color:e.color}:{osisRef:this.osisRef,color:e.color};api.putHighlight(t,enyo.bind(this,function(t){t?console.log(t):this.doHighlight({osisRef:this.osisRef,color:e.color})}))},removeHighlight:function(){this.hide(),this.hlExists&&api.removeHighlight({id:this.hlId,osisRef:this.osisRef},enyo.bind(this,function(e){e?console.log(e):this.doHighlight({action:"remove",osisRef:this.osisRef})}))},handleNote:function(){this.hide(),this.doNoteTap({osisRef:this.osisRef,noteId:this.noteId})}}),enyo.kind({name:"biblez.fontMenu",kind:"onyx.Popup",events:{onFontSize:"",onFont:""},classes:"font-popup",published:{fontSize:1.2,font:"default"},centered:!0,components:[{kind:"enyo.FittableRows",fit:!0,components:[{name:"fontSlider",kind:"onyx.Slider",value:50,onChange:"sliderChanged",classes:"font-slider"},{name:"fontSelector",kind:"onyx.PickerDecorator",classes:"font-selector",onSelect:"fontSelected",components:[{},{kind:"onyx.Picker",components:[{content:$L("Default"),name:"default",active:!0},{content:"Verdana",name:"Verdana"},{content:"Arial",name:"Arial"},{content:"Georgia",name:"Georgia"},{content:"Times",name:"Times"}]}]}]}],rendered:function(){this.inherited(arguments),enyo.platform.firefoxOS&&this.$.fontSelector.hide()},sliderChanged:function(e){this.fontSize=10>e.value?.8:20>e.value?.9:30>e.value?1:40>e.value?1.1:50>e.value?1.2:60>e.value?1.3:70>e.value?1.4:80>e.value?1.6:90>e.value?1.8:2,this.doFontSize({fontSize:this.fontSize})},fontSizeChanged:function(){.8===this.fontSize?this.$.fontSlider.setValue(10):.9===this.fontSize?this.$.fontSlider.setValue(20):1===this.fontSize?this.$.fontSlider.setValue(30):1.1===this.fontSize?this.$.fontSlider.setValue(40):1.2===this.fontSize?this.$.fontSlider.setValue(50):1.3===this.fontSize?this.$.fontSlider.setValue(60):1.4===this.fontSize?this.$.fontSlider.setValue(70):1.6===this.fontSize?this.$.fontSlider.setValue(80):1.8===this.fontSize?this.$.fontSlider.setValue(90):this.$.fontSlider.setValue(100)},fontSelected:function(e,t){this.doFont({font:t.selected.name})},fontChanged:function(){this.$[this.font].setActive(!0)}}),enyo.kind({name:"biblez.notePopup",kind:"onyx.Popup",events:{onEdit:""},published:{osisRef:null,text:""},components:[{kind:"enyo.Scroller",touch:!0,fit:!0,classes:"note-popup",components:[{name:"noteText",content:"",allowHtml:!0,ontap:"handleTap"}]}],textChanged:function(){this.$.noteText.setContent(this.text)},handleTap:function(){this.doEdit({osisRef:this.osisRef})}}),enyo.kind({name:"biblez.footnotePopup",kind:"onyx.Popup",floating:!0,published:{text:""},components:[{kind:"enyo.Scroller",touch:!0,fit:!0,classes:"note-popup",components:[{classes:"center",components:[{kind:"onyx.Spinner",showing:!1,name:"spinner",classes:"center"}]},{name:"noteText",content:"",allowHtml:!0,onclick:"handleTap"}]}],handleSpinner:function(e){e?this.$.spinner.show():this.$.spinner.hide()},textChanged:function(){this.$.noteText.setContent(this.text)},handleTap:function(e,t){return t.preventDefault(),!0}});

// source/settings.js
enyo.kind({name:"biblez.settings",kind:"enyo.FittableRows",fit:!0,events:{onBack:"",onChange:""},components:[{name:"messagePopup",kind:"onyx.Popup",scrim:!0,centered:!0,floating:!0,classes:"message-popup"},{kind:"onyx.MoreToolbar",components:[{kind:"onyx.IconButton",src:"assets/back.png",ontap:"handleBack"},{content:$L("Preferences")}]},{kind:"enyo.Scroller",touch:!0,fit:!0,components:[{classes:"settings-container",components:[{name:"container",kind:"onyx.Groupbox",components:[{kind:"onyx.GroupboxHeader",content:$L("General")},{kind:"enyo.FittableColumns",classes:"settings-row",components:[{content:$L("Enable Linebreak"),classes:"settings-item",fit:!0},{name:"tbLinebreak",key:"linebreak",kind:"onyx.ToggleButton",onChange:"handleSettings"}]},{kind:"enyo.FittableColumns",classes:"settings-row",components:[{content:$L("Enable Headings"),classes:"settings-item",fit:!0},{name:"tbHeadings",key:"headings",kind:"onyx.ToggleButton",onChange:"handleSettings"}]},{kind:"enyo.FittableColumns",classes:"settings-row",components:[{content:$L("Enable Footnotes"),classes:"settings-item",fit:!0},{name:"tbFootnote",key:"footnotes",kind:"onyx.ToggleButton",onChange:"handleSettings"}]},{kind:"enyo.FittableColumns",classes:"settings-row",components:[{content:$L("Enable Cross-References"),classes:"settings-item",fit:!0},{name:"tbCrossRef",key:"crossReferences",kind:"onyx.ToggleButton",onChange:"handleSettings"}]},{kind:"enyo.FittableColumns",classes:"settings-row",components:[{content:$L("Enable Words of Christ in Red"),classes:"settings-item",fit:!0},{name:"tbWoc",key:"woc",kind:"onyx.ToggleButton",onChange:"handleSettings"}]},{kind:"enyo.FittableColumns",classes:"settings-row",components:[{content:$L("Enable Introductions"),classes:"settings-item",fit:!0},{name:"tbIntro",key:"introductions",kind:"onyx.ToggleButton",onChange:"handleSettings"}]}]}]}]}],changed:!1,rendered:function(){this.inherited(arguments),this.$.container.resized()},handleBack:function(){this.changed&&this.doChange(),this.doBack()},setSettings:function(){api.get("settings",enyo.bind(this,function(e,t){e||t&&(this.$.tbLinebreak.value=t.hasOwnProperty("linebreak")?t.linebreak:!1,this.$.tbLinebreak.updateVisualState(),this.$.tbHeadings.value=t.hasOwnProperty("headings")?t.headings:!0,this.$.tbHeadings.updateVisualState(),this.$.tbFootnote.value=t.hasOwnProperty("footnotes")?t.footnotes:!1,this.$.tbFootnote.updateVisualState(),this.$.tbCrossRef.value=t.hasOwnProperty("crossReferences")?t.crossReferences:!1,this.$.tbCrossRef.updateVisualState(),this.$.tbIntro.value=t.hasOwnProperty("introductions")?t.introductions:!1,this.$.tbIntro.updateVisualState(),this.$.tbWoc.value=t.hasOwnProperty("woc")?t.woc:!1,this.$.tbWoc.updateVisualState())}))},handleSettings:function(e){return api.putSetting(e.key,e.getValue(),enyo.bind(this,function(e){e||(this.changed=!0)})),!0},deleteModules:function(){sword.dataMgr.clearDatabase()},deleteDatabases:function(){api.deleteDatabases()},handleError:function(e){e.message&&(e=e.message),this.$.messagePopup.setContent(e),this.$.messagePopup.show()}});

// source/notes.js
enyo.kind({name:"biblez.notes",kind:"enyo.FittableRows",classes:"enyo-fit",events:{onBack:"",onChange:""},published:{osisRef:null,noteId:null,noteText:""},components:[{name:"messagePopup",kind:"onyx.Popup",scrim:!0,centered:!0,floating:!0,classes:"message-popup"},{kind:"onyx.Toolbar",components:[{kind:"onyx.IconButton",src:"assets/back.png",ontap:"handleBack"},{name:"label",content:$L("Notes")}]},{kind:"enyo.Scroller",fit:!0,style:"text-align: center;",components:[{kind:"onyx.InputDecorator",style:"margin: 10px;",alwaysLooksFocused:!0,components:[{name:"noteInput",kind:"onyx.RichText",classes:"note-input",placeholder:"Enter your note here",allowHmtl:!1,oninput:"handleInput"}]},{tag:"br"},{name:"btDelete",kind:"onyx.Button",content:$L("Delete Note"),disabled:!0,classes:"onyx-negative",style:"margin: 10px;",ontap:"removeNote"}]}],rendered:function(){this.inherited(arguments),this.$.noteInput.applyStyle("width",enyo.Panels.isScreenNarrow()?window.innerWidth-40+"px":"420px")},setFocus:function(){},osisRefChanged:function(){this.$.noteInput.setValue(""),this.$.label.setContent($L("Notes for")+" "+api.formatOsis(this.osisRef))},noteIdChanged:function(){null!==this.noteId?api.getNote(this.noteId,enyo.bind(this,function(e,t){e?this.handleError(e):(this.$.noteInput.setValue(t.text),this.$.btDelete.setDisabled(!1))})):this.$.btDelete.setDisabled(!0)},handleInput:function(){return!0},updateNote:function(){api.putNote({id:this.noteId,text:this.$.noteInput.getValue().replace(/"/g,"&quot;"),osisRef:this.osisRef},enyo.bind(this,function(e){e?console.log(e):(this.doChange({action:"update",osisRef:this.osisRef}),this.doBack())}))},removeNote:function(){api.removeNote({id:this.noteId,osisRef:this.osisRef},enyo.bind(this,function(e){e?this.handleError(e):(this.doChange({action:"remove",osisRef:this.osisRef}),this.doBack())}))},handleBack:function(){return""!==this.$.noteInput.getValue()?(this.updateNote(),this.$.noteInput.setValue(" ")):this.doBack(),!0},handleError:function(e){return e.message&&(e=e.message),this.$.messagePopup.setContent(e),this.$.messagePopup.show(),!0}});

// source/dataView.js
enyo.kind({name:"biblez.dataView",kind:"enyo.FittableRows",fit:!0,events:{onBack:"",onVerse:""},published:{section:""},components:[{name:"messagePopup",kind:"onyx.Popup",centered:!0,floating:!0,classes:"message-popup"},{kind:"onyx.MoreToolbar",layoutKind:"FittableColumnsLayout",classes:"main-toolbar",components:[{name:"btBack",kind:"onyx.IconButton",src:"assets/back.png",ontap:"handleBack"},{name:"btHide",kind:"onyx.IconButton",src:"assets/hide.png",showing:!1,ontap:"handleBack"},{kind:"onyx.RadioGroup",onActivate:"sectionActivated",classes:"center",fit:!0,defaultKind:"onyx.IconButton",components:[{name:"rbBm",src:"assets/bookmarksTB.png",section:"bookmarks",style:"margin: 0 10px;"},{name:"rbNotes",src:"assets/notesTB.png",section:"notes",style:"margin: 0 10px;"},{name:"rbHl",src:"assets/highlightsTB.png",section:"highlights",style:"margin: 0 10px;"}]}]},{name:"noData",classes:"center",style:"margin-top: 10px;",showing:!1},{name:"dataList",kind:"AroundList",fit:!0,onSetupItem:"setupItem",aboveComponents:[{kind:"onyx.Toolbar",layoutKind:"FittableColumnsLayout",components:[{name:"searchField",kind:"onyx.InputDecorator",fit:!0,noStretch:!0,layoutKind:"FittableColumnsLayout",components:[{kind:"onyx.Input",name:"searchInput",placeholder:$L("Search..."),fit:!0,oninput:"searchInputChange"},{kind:"Image",src:"assets/search-input.png",style:"height: 20px; width: 20px;"}]},{name:"colorSelector",showing:!1,kind:"Group",classes:"center",style:"width: 100%;",defaultKind:"onyx.Button",highlander:!1,components:[{caption:" ",ontap:"searchHighlights",classes:"color-button",color:"rgba(255,99,71,0.5)",style:"background-color: red;"},{caption:" ",ontap:"searchHighlights",classes:"color-button",color:"rgba(255,255,0,0.5)",style:"background-color: yellow;"},{caption:" ",ontap:"searchHighlights",classes:"color-button",color:"rgba(152,251,152,0.5)",style:"background-color: green;"},{caption:" ",ontap:"searchHighlights",classes:"color-button",color:"rgba(238,130,238,0.5)",style:"background-color: violet;"},{caption:" ",ontap:"searchHighlights",classes:"color-button",color:"rgba(255,165,0,0.5)",style:"background-color: orange;"}]}]}],components:[{name:"item",classes:"item",ontap:"handleListTap",components:[{name:"itemOsis",classes:""},{name:"itemText",classes:"item-text",allowHtml:!0}]}]}],data:[],filtered:[],showHideButton:function(){this.$.btHide.show(),this.$.btBack.hide()},sectionActivated:function(e,t){return t.originator.getActive()&&this.setSection(t.originator.section),!0},updateSection:function(e){e&&(this.section=e),this.sectionChanged()},sectionChanged:function(){this.filter=null,"bookmarks"===this.section?(this.$.rbBm.setActive(!0),this.$.searchField.show(),this.$.colorSelector.hide(),api.getAllBookmarks(enyo.bind(this,function(e,t){e?this.handleError(e):(this.data=t,""!==this.$.searchInput.getValue()?this.searchInputChange(this.$.searchInput):this.updateList())}))):"notes"===this.section?(this.$.rbNotes.setActive(!0),this.$.searchField.show(),this.$.colorSelector.hide(),api.getAllNotes(enyo.bind(this,function(e,t){e?this.handleError(e):(this.data=t,""!==this.$.searchInput.getValue()?this.searchInputChange(this.$.searchInput):this.updateList())}))):"highlights"===this.section&&(this.$.rbHl.setActive(!0),this.$.searchField.hide(),this.$.colorSelector.show(),api.getAllHighlights(enyo.bind(this,function(e,t){e?this.handleError(e):(this.data=t,this.updateList(),this.searchHighlights())})))},updateList:function(){this.$.dataList.setCount(this.data.length),0===this.data.length?(this.$.dataList.hide(),this.$.noData.show(),"bookmarks"===this.section?this.$.noData.setContent($L("No Bookmarks.")+" "+$L("Tap on a verse number to add one.")):"notes"===this.section?this.$.noData.setContent($L("No Notes.")+" "+$L("Tap on a verse number to add one.")):"highlights"===this.section&&this.$.noData.setContent($L("No Highlights.")+" "+$L("Tap on a verse number to add one."))):(this.$.noData.hide(),this.$.dataList.show()),this.$.dataList.reset(),this.$.dataList.reflow(),this.$.dataList.scrollToRow(0)},setupItem:function(e,t){var n=this.filter?this.filtered[t.index]:this.data[t.index];this.$.itemOsis.setContent(api.formatOsis(n.osisRef)),"highlights"===this.section?(this.$.item.applyStyle("background-color",n.color),this.$.itemOsis.addRemoveClass("list-selected-bold",e.isSelected(t.index))):(this.$.item.applyStyle("background-color",null),this.$.itemOsis.addRemoveClass("list-selected-bold",e.isSelected(t.index))),"notes"===this.section?this.$.itemText.setContent(n.text):this.$.itemText.setContent(""),this.$.item.addRemoveClass("list-selected",e.isSelected(t.index))},handleListTap:function(e,t){this.doVerse({osisRef:this.data[t.index].osisRef})},searchInputChange:function(e){return enyo.job(this.id+":search",this.bindSafely("filterList",e.getValue()),200),!0},searchHighlights:function(e){var t="";e&&(e.addRemoveClass("active",!e.hasClass("active")),e.hasClass("active")||(e.active=!1));var n=this.$.colorSelector.getClientControls();n.forEach(function(e){e.active&&(t+=""===t?api.escapeRegExp(e.color):"|"+api.escapeRegExp(e.color))}),this.filterList(t)},filterList:function(e){e!=this.filter&&(this.filter=e,this.filtered=this.generateFilteredData(e),this.$.dataList.setCount(this.filtered.length),this.$.dataList.reset())},generateFilteredData:function(e){for(var t,n=RegExp(e,"i"),s=[],i=0;t=this.data[i];i++)(t.osisRef.match(n)||api.formatOsis(t.osisRef).match(n)||t.text&&t.text.match(n)||t.color&&t.color.match(n))&&s.push(t);return s},handleBack:function(){this.doBack()},handleError:function(e){e.message&&(e=e.message),this.$.messagePopup.setContent(e),this.$.messagePopup.show()}});

// source/about.js
enyo.kind({name:"biblez.about",kind:"enyo.FittableRows",fit:!0,events:{onBack:""},components:[{kind:"onyx.MoreToolbar",layoutKind:"FittableColumnsLayout",components:[{kind:"onyx.IconButton",src:"assets/back.png",ontap:"handleBack"},{name:"title",content:$L("About BibleZ")}]},{kind:"enyo.Scroller",fit:!0,components:[{classes:"settings-container",style:"text-align: center;",components:[{tag:"img",src:"assets/biblez128.png"},{allowHtml:!0,content:"BibleZ is based on <a href='https://github.com/zefanja/swordjs' target='_blank'>swordjs</a>, a Javascript library to access the bible modules from the <a href='http://crosswire.org/sword' target='_blank'>SWORD Project</a>.<br><br>BibleZ is licenced under the GPLv3. (<a href='https://github.com/zefanja/biblez-ng' target='_blank'>Source Code</a>)"},{tag:"br"},{tag:"span",content:"<a href='https://twitter.com/biblez' target='_blank'><img src='assets/twitter_32.png'></a>",allowHtml:!0,style:"margin: 5px;"},{tag:"span",content:"<a href='https://www.facebook.com/zefanjas' target='_blank'><img src='assets/facebook_32.png'></a>",allowHtml:!0,style:"margin: 5px;"},{tag:"br"},{kind:"onyx.Button",content:"Send eMail",ontap:"handleMail",classes:"onyx-affirmative",style:"margin-top: 10px;"}]}]}],version:"",rendered:function(){this.inherited(arguments);var e=navigator.mozApps.getSelf();e.onsuccess=enyo.bind(this,function(){e.result&&(this.version=e.result.manifest.version,this.$.title.addContent(" v"+this.version))})},handleMail:function(){window.location="mailto:info@zefanjas.de?subject=BibleZ "+this.version},handleBack:function(){this.doBack()}});

// source/App.js
enyo.ready(function(){window.App||alert("No application build found, please open debug.html."),(new App).renderInto(document.body)}),enyo.kind({name:"App",kind:enyo.FittableRows,fit:!0,components:[{name:"panel",kind:"Panels",fit:!0,animate:!1,classes:"app-panels",arrangerKind:"CardArranger",draggable:!1,onTransitionFinish:"handlePanels",components:[{name:"main",kind:"biblez.main",onOpenModuleManager:"openModuleManager",onOpenBC:"openSelector",onModuleChanged:"handleChangeModule",onOpenPreferences:"openPreferences",onOpenNotes:"openNotes",onOpenDataView:"openDataView",onOpenAbout:"openAbout"},{name:"bcSelector",kind:"biblez.bcSelector",onSelect:"handlePassageSelect",onBack:"handleBack"},{name:"notes",kind:"biblez.notes",onBack:"handleBack",onChange:"handleNote"}]}],handleBack:function(e){return this.$.panel.selectPanelByName("main"),"bcSelector"!==e.name&&"notes"!==e.name&&enyo.asyncMethod(e,"destroy"),!0},handleInstalledModule:function(){return this.$.main.getInstalledModules(),!0},openModuleManager:function(){return this.$.panel.createComponent({name:"moduleManager",kind:"biblez.moduleManager",onBack:"handleBack",onInstalled:"handleInstalledModule"},{owner:this}).render(),this.$.panel.selectPanelByName("moduleManager"),this.$.moduleManager.start(),!0},openSelector:function(){return this.$.panel.selectPanelByName("bcSelector"),this.$.bcSelector.setPanel(0),!0},handleChangeModule:function(e,t){return this.$.bcSelector.setModule(t.module),!0},handlePassageSelect:function(e,t){this.$.panel.selectPanelByName("main"),delete t.originator,this.$.main.setPassage(t)},openPreferences:function(){this.$.panel.createComponent({name:"settings",kind:"biblez.settings",onBack:"handleBack",onChange:"handleSettings"},{owner:this}).render(),this.$.settings.setSettings(),this.$.panel.selectPanelByName("settings")},handleSettings:function(e,t){this.$.main.handleSettings(e,t),enyo.asyncMethod(this.$.settings,"destroy"),this.$.panel.selectPanelByName("main")},openNotes:function(e,t){this.$.notes.setOsisRef(t.osisRef),this.$.notes.setNoteId(t.noteId),this.$.panel.selectPanelByName("notes")},handleNote:function(e,t){return this.$.main.handleNote(e,t),this.$.panel.selectPanelByName("main"),!0},openDataView:function(e,t){this.$.panel.createComponent({name:"dataView",kind:"biblez.dataView",onBack:"handleBack",onVerse:"handleVerse"},{owner:this}).render(),this.$.dataView.updateSection(t.section),this.$.panel.selectPanelByName("dataView")},handleVerse:function(e,t){return e.destroy(),this.$.main.handlePassage(t.osisRef),this.$.panel.selectPanelByName("main"),!0},openAbout:function(){this.$.panel.createComponent({name:"about",kind:"biblez.about",onBack:"handleBack"},{owner:this}).render(),this.$.panel.selectPanelByName("about")}}),window.screen.onmozorientationchange=function(){enyo.Signals.send("onOrientationChange")};
